"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3800"],{77984:function(e,t,a){a.d(t,{F:()=>r});var l=a(68271),s=a(94821),i=a(76882);let r=()=>{let{t:e}=i.Z.global,{copy:t,isSupported:a,copied:r}=(0,s.VPI)({legacy:!0});return{copied:r,copyText:async function(s){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!s)return void l.v0.error(e("common.useCopy.noText"));a.value?(await t(s),i&&l.v0.success(e("common.useCopy.success"))):l.v0.error(e("common.useCopy.failed"))}}}},51169:function(e,t,a){a.d(t,{d:()=>r});var l=a(58786),s=a(49247);let i=Symbol("MODAL_INJECT"),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:r,onConfirm:n}=e,u=(0,l.qj)({});return a?[(0,l.aZ)({setup(s,r){let{attrs:n,slots:o}=r;return(0,l.JJ)(i,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(u,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...s,...n},o)}}),u]:[(0,l.aZ)({setup(t,a){let{attrs:o,slots:d}=a,m=(0,l.f3)(i),M=(0,l.iH)(!1);return u.open=()=>{var t;M.value=!0,null==(t=e.onChangeState)||t.call(e,M.value)},u.close=()=>{M.value=!1},u.setState=t=>{var a;null==m||m.setState(t),null==(a=e.onChangeState)||a.call(e,M.value)},u.getState=()=>(null==m?void 0:m.state)??{},null==m||m.extendApi(u),()=>(0,l.Wm)(s.Z,(0,l.dG)({show:M.value},t,o,{onCancel:r,onConfirm:n,"onUpdate:show":e=>{M.value=e??!1}}),d)}}),u]}},16893:function(e,t,a){a.d(t,{Z:()=>r});var l=a(15496),s=a(58786);let i={class:"mr-4px"},r=(0,s.aZ)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let t=()=>{window.open(e.href)};return(a,r)=>{let n=l.ZP;return(0,s.wg)(),(0,s.j4)(n,{text:"",onClick:t},{default:(0,s.w5)(()=>[(0,s._)("span",i,(0,s.zw)(e.text||a.$t("common.actions.help")),1),r[0]||(r[0]=(0,s._)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1,__:[0]})}}})},76631:function(e,t,a){a.d(t,{Z:()=>u});var l=a(90340),s=a(56357),i=a(58786),r=a(17351);let n={class:"ml-8px text-13px text-primary"},u=(0,i.aZ)({__name:"index",props:(0,i.Vf)({title:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(e){let t=(0,i.tT)(e,"show"),a=()=>{t.value=!t.value},u=!!(0,i.Rr)().title;return(o,d)=>{let m=s.g,M=l.Z;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:"flex items-center mb-20px cursor-pointer",onClick:a},[(0,i.Wm)(m,{size:"16",style:(0,i.j5)({transform:`rotate(${t.value?"90":"0"}deg)`,transition:"transform 0.3s"})},{default:(0,i.w5)(()=>[(0,i.Wm)((0,i.SU)(r.Z))]),_:1},8,["style"]),(0,i._)("div",n,[(0,i.WI)(o.$slots,"title"),(0,i.Uk)(" "+(0,i.zw)(u?"":e.title),1)])]),(0,i.Wm)(M,{show:t.value},{default:(0,i.w5)(()=>[(0,i.WI)(o.$slots,"default")]),_:3},8,["show"])],64)}}})},66760:function(e,t,a){a.d(t,{Z:()=>n});var l=a(81021),s=a(15496),i=a(58786);let r={class:"leading-22px text-13px text-desc text-center"},n=(0,i.aZ)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,n)=>{let u=s.ZP,o=(0,i.up)("i18n-t"),d=l.Z;return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)(()=>[(0,i._)("div",r,[(0,i.Wm)(o,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,i.w5)(()=>[(0,i.Wm)(u,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,i.w5)(()=>n[0]||(n[0]=[(0,i._)("span",null,"Issues",-1),(0,i._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,i.w5)(()=>[(0,i.Wm)(u,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,i.w5)(()=>n[1]||(n[1]=[(0,i.Uk)(" Star "),(0,i._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),n[2]||(n[2]=(0,i._)("br",null,null,-1)),(0,i._)("span",null,(0,i.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},46244:function(e,t,a){a.d(t,{Z:()=>i});var l=a(98048),s=a(58786);let i=(0,s.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:a}=t,i=(0,s.iH)(null);return a({validate:()=>{var e;return null==(e=i.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=i.value)?void 0:e.restoreValidation()}}),(e,t)=>{let a=l.Z;return(0,s.wg)(),(0,s.j4)(a,(0,s.dG)(e.$attrs,{ref_key:"formRef",ref:i,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},3566:function(e,t,a){a.r(t),a.d(t,{default:()=>ej});var l=a(66760),s=a(16893),i=a(52742),r=a(15496),n=a(58786),u=a(68271),o=a(51169),d=a(34541);let{t:m}=a(76882).Z.global,M=()=>d.e.get("/relay/list"),c=e=>d.e.post("/relay/add",e,{fetchOptions:{successMessage:!0,loading:m("smtp.api.loading.adding")}}),p=e=>d.e.post("/relay/edit",e,{fetchOptions:{successMessage:!0,loading:m("smtp.api.loading.editing")}}),g=e=>d.e.post("/relay/test_connection",e,{fetchOptions:{successMessage:!0,loading:m("smtp.api.loading.testing")}}),N=e=>d.e.post("/relay/delete",e,{fetchOptions:{successMessage:!0,loading:m("smtp.api.loading.deleting")}}),y=()=>d.e.get("/relay/get_unbound_domains");var I=a(35409),w=a(53903),_=a(29875);let D={class:"status-text"},j=(0,n.aZ)({__name:"SmtpStatus",props:{value:{type:Boolean,default:!1}},setup:e=>(t,a)=>{let l=w.ZP;return(0,n.wg)(),(0,n.j4)(l,{size:"small",bordered:!1},{default:(0,n.w5)(()=>[(0,n._)("div",{class:(0,n.C_)(["status-icon",e.value?"status-success":"status-error"])},null,2),(0,n._)("div",D,(0,n.zw)(e.value?t.$t("smtp.status.online"):t.$t("smtp.status.offline")),1)]),_:1})}});var v=a(41748);let T=(0,v.default)(j,[["__scopeId","data-v-32ed8e22"]]),x={class:"smtp-card relative rounded-8px p-16px shadow-sm"},h={class:"flex items-center mb-16px"},L={class:"flex items-center flex-1"},z={class:"w-32px h-32px flex items-center justify-center rounded-full bg-primary-100"},A=["src"],f={class:"ml-16px flex items-center gap-10px flex-1 min-w-0"},S={class:"text-18px font-600 truncate"},C={class:"ml-8px"},b={class:"smtp-desc"},k={class:"smtp-info"},E={class:"info-row"},O={class:"info-label"},U={class:"info-value flex flex-wrap gap-8px"},W={class:"flex items-center gap-4px"},Z={class:"info-row"},Y={class:"info-label"},Q={class:"info-value"},P={class:"info-row"},R={class:"info-label"},G={class:"info-value"},H={class:"info-row"},B={class:"info-label"},$={class:"info-value truncate"},F={class:"action-buttons"},J=(0,n.aZ)({__name:"SmtpCard",props:{service:{type:Object,required:!0}},emits:["edit","delete","showDns"],setup(e,t){let{emit:a}=t,l=(0,n.Fl)(()=>{switch(e.service.smtp_name){case"Gmail":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMjQgNS40NTd2MTMuOTA5YzAgLjkwNC0uNzMyIDEuNjM2LTEuNjM2IDEuNjM2aC0zLjgxOVYxMS43M0wxMiAxNi42NGwtNi41NDUtNC45MXY5LjI3M0gxLjYzNkExLjYzNiAxLjYzNiAwIDAgMSAwIDE5LjM2NlY1LjQ1N2MwLTIuMDIzIDIuMzA5LTMuMTc4IDMuOTI3LTEuOTY0TDUuNDU1IDQuNjQgMTIgOS41NDhsNi41NDUtNC45MSAxLjUyOC0xLjE0NUMyMS42OSAyLjI4IDI0IDMuNDM0IDI0IDUuNDU3eiIgZmlsbD0iI0QxNDgzNiIvPjwvc3ZnPg==";case"Mailgun":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6IiBmaWxsPSIjRjA0MjNCIi8+PHBhdGggZD0iTTEyIDZjLTMuMzEgMC02IDIuNjktNiA2czIuNjkgNiA2IDYgNi0yLjY5IDYtNi0yLjY5LTYtNi02em0wIDEwYy0yLjIxIDAtNC0xLjc5LTQtNHMxLjc5LTQgNC00IDQgMS43OSA0IDQtMS43OSA0LTQgNHoiIGZpbGw9IiNGMDQyM0IiLz48L3N2Zz4=";case"AWS SES":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTMuMTA2IDEwLjYzM0wyMi44IDEyLjczQTExLjk0NyAxMS45NDcgMCAwIDAgMTIgNC4yYy02LjYyNCAwLTEyIDUuMzc2LTEyIDEyczUuMzc2IDEyIDEyIDEyYzQuOTY4IDAgOS4yNDItMy4wMyAxMS4xMDYtNy4zNDJMMTMuMTA2IDE4Ljc1VjEwLjYzM3oiIGZpbGw9IiNGRjk5MDAiLz48cGF0aCBkPSJNMTQuNCA4LjR2MTAuOEwyNCAxNi44bC05LjYtOC40eiIgZmlsbD0iI0ZGOTkwMCIvPjwvc3ZnPg==";case"SendGrid":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptLTEgMTVoLTJ2LTZoMnY2em00IDBoLTJ2LTZoMnY2em00LTcuNWMwIC44My0uNjcgMS41LTEuNSAxLjVoLTljLS44MyAwLTEuNS0uNjctMS41LTEuNVY4YzAtLjgzLjY3LTEuNSAxLjUtMS41aDljLjgzIDAgMS41LjY3IDEuNSAxLjV2MS41eiIgZmlsbD0iIzFBODJFMiIvPjwvc3ZnPg==";case"custom":default:return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjIwNDUzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjUgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM4MTciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwLjE5NTMxMjUiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODQxLjE0Mjg1NyA3My4xNDI4NTdhMTA5LjcxNDI4NiAxMDkuNzE0Mjg2IDAgMCAxIDEwOS4yMDIyODYgOTkuMTgxNzE0TDk1MC44NTcxNDMgMTgyLjg1NzE0M3YyOTQuMTA3NDI4YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEtNzIuNTU3NzE0IDYuNTgyODU4TDg3Ny43MTQyODYgNDc2Ljk2NDU3MVYxOTQuMzQwNTcxTDU2OS4wNTE0MjkgNDU5Ljc3NmMtMzIuMTgyODU3IDE5LjUyOTE0My03MS44MjYyODYgMjEuMjExNDI5LTEwOC45MDk3MTUgMi4xMjExNDNsLTEwLjAyMDU3MS01LjcwNTE0M0wxNDYuMjg1NzE0IDE5NC41NnY1NzMuNDRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMCAyOS45ODg1NzIgMzUuOTg2Mjg2TDE4Mi44NTcxNDMgODA0LjU3MTQyOWgyMjEuODQyMjg2YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgNi41ODI4NTcgNzIuNTU3NzE0bC02LjU4Mjg1NyAwLjU4NTE0M0gxODIuODU3MTQzYTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMS0xMDkuMjAyMjg2LTk5LjE4MTcxNUw3My4xNDI4NTcgNzY4di01ODUuMTQyODU3YTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMSA5OS4xODE3MTQtMTA5LjIwMjI4NkwxODIuODU3MTQzIDczLjE0Mjg1N2g2NTguMjg1NzE0eiBtLTE5LjY3NTQyOCA3My4xNDI4NTdIMjAyLjI0TDQ5Mi45ODI4NTcgMzk3LjIzODg1N2E0MC43NDA1NzEgNDAuNzQwNTcxIDAgMCAwIDI5LjI1NzE0MyA1LjA0Njg1N2wzLjk0OTcxNC0xLjQ2Mjg1N0w4MjEuNDY3NDI5IDE0Ni4yODU3MTR6IiBmaWxsPSIjNEM1RDdDIiBwLWlkPSIzODE4Ij48L3BhdGg+PHBhdGggZD0iTTg1Ny41MjY4NTcgNjI2LjM5NTQyOWw1LjYzMiAzLjUxMDg1NyAxNDYuNjUxNDI5IDEwOS40MjE3MTRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMSA1LjU1ODg1NyA1My42MTM3MTRsLTUuMjY2Mjg2IDQuODI3NDI5LTE0Mi40ODIyODYgMTA4LjU0NGEzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTQ5LjIyNTE0Mi01My43Nmw0LjkwMDU3MS00LjM4ODU3MiA1Ni4zMi00My4wMDgtMjU3Ljc1NTQyOSAwLjA3MzE0M2EzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTYuNTgyODU3LTcyLjU1NzcxNGw2LjU4Mjg1Ny0wLjU4NTE0M0g4NzcuNzE0Mjg2bC01OC4yOTQ4NTctNDMuNTkzMTQzYTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgMzguMTA3NDI4LTYyLjA5ODI4NXoiIGZpbGw9IiMxNDc2QkIiIHAtaWQ9IjM4MTkiPjwvcGF0aD48L3N2Zz4=";case"local":return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjAxODg1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI3ODIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTgyOC44NDg3ODggMTI5LjUwMzYyNGMxNzIuNTAwODc1IDE2OC45MTc3NzEgMTc1LjA2MDIzNSA0NDUuODQwNTQgNi4xNDI0NjQgNjE4LjM0MTQxNWwtNi4xNDI0NjQgNi4xNDI0NjQtMjQzLjY1MTA4NyAyNDAuMDY3OTgzYy00MC40Mzc4OTEgMzkuOTI2MDE4LTEwNS40NDU2MzkgMzkuOTI2MDE4LTE0NS44ODM1MyAwbC0yNDMuNjUxMDg3LTI0MC4wNjc5ODNDMjMuMTYyMjA5IDU4NS4wNjk3MzMgMjAuNjAyODQ5IDMwOC4xNDY5NjMgMTg5LjUyMDYyIDEzNS42NDYwODhsNi4xNDI0NjQtNi4xNDI0NjRjMTc0LjU0ODM2My0xNzIuNTAwODc1IDQ1OC4xMjU0NjktMTcyLjUwMDg3NSA2MzMuMTg1NzA0IDB6TTUxMiAyMzguMDIwNDk1Yy0xMTQuMTQ3NDYzIDAtMjA2Ljc5NjMwMSA5MS4xMTMyMjItMjA2Ljc5NjMwMSAyMDMuNzI1MDY5czkyLjY0ODgzOCAyMDMuNzI1MDY5IDIwNi43OTYzMDEgMjAzLjcyNTA2OCAyMDYuNzk2MzAxLTkxLjExMzIyMiAyMDYuNzk2MzAxLTIwMy43MjUwNjgtOTIuNjQ4ODM4LTIwMy43MjUwNjktMjA2Ljc5NjMwMS0yMDMuNzI1MDY5eiIgZmlsbD0iIzRFNTRDOCIgcC1pZD0iMjc4MyI+PC9wYXRoPjwvc3ZnPg=="}}),s=()=>{a("edit",e.service)},i=()=>{a("delete",e.service)},u=()=>{a("showDns",e.service)},o=async t=>{await p({id:e.service.id,active:t}),e.service.active=t};return(t,a)=>{let d=_.Z,m=w.ZP,M=I.ZP,c=r.ZP;return(0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",h,[(0,n._)("div",L,[(0,n._)("div",z,[(0,n._)("img",{src:(0,n.SU)(l),class:"w-full h-full object-contain"},null,8,A)]),(0,n._)("div",f,[(0,n._)("div",S,(0,n.zw)(e.service.smtp_name),1),(0,n.Wm)(T,{value:e.service.smtp_status.status},null,8,["value"])])]),(0,n._)("div",C,[(0,n.Wm)(d,{value:e.service.active,"checked-value":1,"unchecked-value":0,"onUpdate:value":o},null,8,["value"])])]),(0,n._)("div",b,(0,n.zw)(e.service.remark),1),(0,n._)("div",k,[(0,n._)("div",E,[(0,n._)("span",O,(0,n.zw)(t.$t("smtp.card.domain"))+"：",1),(0,n._)("span",U,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.service.sender_domains,e=>((0,n.wg)(),(0,n.j4)(m,{key:e,bordered:!1},{default:(0,n.w5)(()=>[(0,n.Uk)((0,n.zw)(e),1)]),_:2},1024))),128)),1===e.service.check_spf?((0,n.wg)(),(0,n.j4)(m,{key:0,type:"warning",class:"cursor-pointer",bordered:!1,onClick:u},{default:(0,n.w5)(()=>[(0,n._)("div",W,[a[0]||(a[0]=(0,n._)("i",{class:"i-carbon:warning-filled text-16px"},null,-1)),(0,n._)("span",null,(0,n.zw)(t.$t("smtp.card.dnsUpdateRequired")),1)])]),_:1})):(0,n.kq)("",!0)])]),(0,n._)("div",Z,[(0,n._)("span",Y,(0,n.zw)(t.$t("smtp.card.server"))+"：",1),(0,n._)("span",Q,[(0,n.Wm)(M,null,{default:(0,n.w5)(()=>[(0,n.Uk)((0,n.zw)(e.service.relay_host),1)]),_:1})])]),(0,n._)("div",P,[(0,n._)("span",R,(0,n.zw)(t.$t("smtp.card.port"))+"：",1),(0,n._)("span",G,(0,n.zw)(e.service.relay_port),1)]),(0,n._)("div",H,[(0,n._)("span",B,(0,n.zw)(t.$t("smtp.card.username"))+"：",1),(0,n._)("span",$,(0,n.zw)(e.service.auth_user),1)])]),(0,n._)("div",F,[(0,n.Wm)(c,{secondary:"",class:"action-btn",onClick:s},{icon:(0,n.w5)(()=>a[1]||(a[1]=[(0,n._)("i",{class:"i-mdi-edit"},null,-1)])),_:1}),(0,n.Wm)(c,{secondary:"",class:"action-btn",onClick:i},{icon:(0,n.w5)(()=>a[2]||(a[2]=[(0,n._)("i",{class:"i-mdi-delete"},null,-1)])),_:1})])])}}}),V=(0,v.default)(J,[["__scopeId","data-v-0abadc72"]]);var q=a(46244),X=a(76631),K=a(29283),ee=a(6455),et=a(8490),ea=a(81833),el=a(37864),es=a(73084),ei=a(52495);let er=(0,n.aZ)({__name:"SmtpForm",setup(e){let{t}=(0,ei.QT)(),a=(0,n.iH)(!1),l=(0,n.Fl)(()=>a.value?t("smtp.form.editTitle"):t("smtp.form.addTitle")),s=(0,n.iH)(0),i=(0,n.AE)("formRef"),d=(0,n.qj)({rtype:"custom",smtp_name:"",sender_domains:[],relay_host:"",relay_port:587,auth_user:"",auth_password:"",remark:"",active:1,auth_method:null,skip_tls_verify:null,helo_name:""}),m={smtp_name:{required:!0,message:t("smtp.form.validation.nameRequired"),trigger:["blur","input"]},sender_domains:{required:!0,trigger:["change"],validator:(e,a)=>!!a&&0!==a.length||Error(t("smtp.form.validation.domainRequired"))},relay_host:{required:!0,message:t("smtp.form.validation.serverRequired"),trigger:["blur","input"]},relay_port:{required:!0,trigger:["blur","input"],validator:(e,a)=>!!a||Error(t("smtp.form.validation.portRequired"))},auth_user:{required:!0,message:t("smtp.form.validation.usernameRequired"),trigger:["blur","input"]},auth_password:{required:!0,message:t("smtp.form.validation.passwordRequired"),trigger:["blur","input"]}},M=(0,n.iH)([]),N=[{label:"LOGIN",value:"LOGIN"},{label:"PLAIN",value:"PLAIN"},{label:"CRAM-MD5",value:"CRAM-MD5"},{label:"NONE",value:"NONE"}],I=[{label:t("smtp.form.tlsOptions.skip"),value:1},{label:t("smtp.form.tlsOptions.noSkip"),value:0}],w=async()=>{let e=await y();(0,u.kJ)(e)&&(M.value=e.map(e=>({label:`${e.domain}${!d.sender_domains.includes(e.domain)&&e.is_bound?t("smtp.form.bind"):""}`,value:e.domain,disabled:!d.sender_domains.includes(e.domain)&&e.is_bound})))},_={gmail:{smtp_name:"Gmail",relay_host:"smtp.gmail.com",relay_port:587,username:"",password:"",remark:"Gmail"},mailgun:{smtp_name:"Mailgun",relay_host:"smtp.mailgun.org",relay_port:587,username:"",password:"",remark:"Mailgun"},aws:{smtp_name:"AWS SES",relay_host:"email-smtp.us-east-1.amazonaws.com",relay_port:587,username:"",password:"",remark:"AWS SES"},sendgrid:{smtp_name:"SendGrid",relay_host:"smtp.sendgrid.net",relay_port:587,username:"apikey",password:"",remark:"SendGrid"},custom:{smtp_name:"Custom SMTP Relay",relay_host:"",relay_port:587,username:"",password:"",remark:"Custom SMTP Relay"}},D=()=>{let e=_[d.rtype];e&&(d.smtp_name=e.smtp_name,d.relay_host=e.relay_host,d.relay_port=e.relay_port,d.auth_user=e.username,d.auth_password=e.password,d.remark=e.remark)},j=()=>{s.value=0,d.smtp_name="",d.sender_domains=[],d.relay_host="",d.relay_port=587,d.auth_user="",d.auth_password="",d.remark="",d.active=1,d.skip_tls_verify=null,d.auth_method=null,d.helo_name=""},v=async()=>{var e;await (null==(e=i.value)?void 0:e.validate()),await g({sender_domains:d.sender_domains,relay_host:d.relay_host,relay_port:d.relay_port,auth_user:d.auth_user,auth_password:d.auth_password})},T=()=>({rtype:d.rtype,smtp_name:d.smtp_name,sender_domains:d.sender_domains,relay_host:d.relay_host,relay_port:d.relay_port,auth_user:d.auth_user,auth_password:d.auth_password,remark:d.remark,active:d.active,skip_tls_verify:d.skip_tls_verify||"",auth_method:d.auth_method||"",helo_name:d.helo_name}),[x,h]=(0,o.d)({onChangeState:e=>{if(e){w();let e=h.getState();if(d.rtype=e.type,a.value=e.isEdit,D(),e.row){let{row:t}=e;s.value=t.id,d.rtype=t.rtype,d.smtp_name=t.smtp_name,d.sender_domains=t.sender_domains,d.relay_host=t.relay_host,d.relay_port=(0,u.Dx)(t.relay_port),d.auth_user=t.auth_user,d.auth_password=t.auth_password,d.remark=t.remark,d.active=t.active,d.skip_tls_verify=t.skip_tls_verify}}else j()},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let t=T();a.value?await p({...t,id:s.value}):await c(t),h.getState().refresh()}});return(e,t)=>{let s=es.Z,u=el.ZP,o=ea.Z,c=et.Z,p=ee.ZP,g=K.Z,y=X.Z,w=q.Z,_=r.ZP;return(0,n.wg)(),(0,n.j4)((0,n.SU)(x),{title:(0,n.SU)(l),width:"500"},{"footer-left":(0,n.w5)(()=>[(0,n.Wm)(_,{type:"primary",ghost:"",onClick:v},{default:(0,n.w5)(()=>[(0,n.Uk)((0,n.zw)(e.$t("smtp.form.testConnection")),1)]),_:1})]),default:(0,n.w5)(()=>[(0,n.Wm)(w,{ref_key:"formRef",ref:i,model:(0,n.SU)(d),rules:m,class:"pt-16px"},{default:(0,n.w5)(()=>[(0,n.Wm)(o,{cols:1,"x-gap":24},{default:(0,n.w5)(()=>[(0,n.Wm)(u,{span:1,label:e.$t("smtp.form.remark"),path:"remark"},{default:(0,n.w5)(()=>[(0,n.Wm)(s,{value:(0,n.SU)(d).remark,"onUpdate:value":t[0]||(t[0]=e=>(0,n.SU)(d).remark=e)},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,n.Wm)(p,{label:e.$t("smtp.form.domain"),path:(0,n.SU)(a)?"":"sender_domains"},{default:(0,n.w5)(()=>[(0,n.Wm)(c,{value:(0,n.SU)(d).sender_domains,"onUpdate:value":t[1]||(t[1]=e=>(0,n.SU)(d).sender_domains=e),multiple:"","max-tag-count":"responsive",options:(0,n.SU)(M)},null,8,["value","options"])]),_:1},8,["label","path"]),(0,n.Wm)(o,{cols:8,"x-gap":24},{default:(0,n.w5)(()=>[(0,n.Wm)(u,{span:6,label:e.$t("smtp.form.server"),path:"relay_host"},{default:(0,n.w5)(()=>[(0,n.Wm)(s,{value:(0,n.SU)(d).relay_host,"onUpdate:value":t[2]||(t[2]=e=>(0,n.SU)(d).relay_host=e)},null,8,["value"])]),_:1},8,["label"]),(0,n.Wm)(u,{span:2,label:e.$t("smtp.form.port"),path:"relay_port"},{default:(0,n.w5)(()=>[(0,n.Wm)(g,{value:(0,n.SU)(d).relay_port,"onUpdate:value":t[3]||(t[3]=e=>(0,n.SU)(d).relay_port=e),class:"flex-1","show-button":!1,min:1},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,n.Wm)(p,{label:e.$t("smtp.form.username"),path:"auth_user"},{default:(0,n.w5)(()=>[(0,n.Wm)(s,{value:(0,n.SU)(d).auth_user,"onUpdate:value":t[4]||(t[4]=e=>(0,n.SU)(d).auth_user=e)},null,8,["value"])]),_:1},8,["label"]),(0,n.Wm)(p,{label:e.$t("smtp.form.password"),path:"auth_password"},{default:(0,n.w5)(()=>[(0,n.Wm)(s,{value:(0,n.SU)(d).auth_password,"onUpdate:value":t[5]||(t[5]=e=>(0,n.SU)(d).auth_password=e),class:"password-input",type:"password"},null,8,["value"])]),_:1},8,["label"]),(0,n.Wm)(y,{title:e.$t("smtp.form.advancedFeatures")},{default:(0,n.w5)(()=>[(0,n.Wm)(p,{label:e.$t("smtp.form.authMethod"),path:"auth_method"},{default:(0,n.w5)(()=>[(0,n.Wm)(c,{value:(0,n.SU)(d).auth_method,"onUpdate:value":t[6]||(t[6]=e=>(0,n.SU)(d).auth_method=e),options:N},null,8,["value"])]),_:1},8,["label"]),(0,n.Wm)(p,{label:e.$t("smtp.form.skipTlsVerify"),path:"skip_tls_verify"},{default:(0,n.w5)(()=>[(0,n.Wm)(c,{value:(0,n.SU)(d).skip_tls_verify,"onUpdate:value":t[7]||(t[7]=e=>(0,n.SU)(d).skip_tls_verify=e),options:I},null,8,["value"])]),_:1},8,["label"]),(0,n.Wm)(p,{label:"HELO Name",path:"helo_name"},{default:(0,n.w5)(()=>[(0,n.Wm)(s,{value:(0,n.SU)(d).helo_name,"onUpdate:value":t[8]||(t[8]=e=>(0,n.SU)(d).helo_name=e)},null,8,["value"])]),_:1})]),_:1},8,["title"])]),_:1},8,["model"])]),_:1},8,["title"])}}});var en=a(50039),eu=a(77984);let eo={width:"140"},ed={width:"160"},em=(0,n.aZ)({__name:"SmtpDns",setup(e){let{copyText:t}=(0,eu.F)(),a=(0,n.iH)([]),[l,s]=(0,o.d)({onChangeState:e=>{if(e){let{smtp:e}=s.getState();e&&(a.value=e.spf_records.filter(e=>1===e.check).map(e=>e.dns_record))}}});return(e,s)=>{let i=I.ZP,u=r.ZP,o=en.Z;return(0,n.wg)(),(0,n.j4)((0,n.SU)(l),{title:"SMTP DNS",width:750,footer:!1},{default:(0,n.w5)(()=>[s[1]||(s[1]=(0,n._)("div",{class:"record-desc"}," 需要调整对应域的spf记录，允许中继发送邮件（如果您已经添加可以忽略） ",-1)),(0,n.Wm)(o,{size:"small"},{default:(0,n.w5)(()=>[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",eo,(0,n.zw)(e.$t("domain.dns.table.recordType")),1),(0,n._)("th",ed,(0,n.zw)(e.$t("domain.dns.table.host")),1),(0,n._)("th",null,(0,n.zw)(e.$t("domain.dns.table.value")),1)])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,n.SU)(a),a=>((0,n.wg)(),(0,n.iD)("tr",null,[s[0]||(s[0]=(0,n._)("td",null,"TXT",-1)),(0,n._)("td",null,(0,n.zw)(a.host),1),(0,n._)("td",null,[(0,n.Wm)(i,{class:"mr-4px max-w-320px!"},{default:(0,n.w5)(()=>[(0,n.Uk)((0,n.zw)(a.value),1)]),_:2},1024),(0,n.Wm)(u,{text:"",type:"primary",onClick:()=>(0,n.SU)(t)(a.value)},{default:(0,n.w5)(()=>[(0,n.Uk)((0,n.zw)(e.$t("common.actions.copy")),1)]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1,__:[1]})}}}),eM=(0,v.default)(em,[["__scopeId","data-v-3ce21b66"]]);var ec=a(86599);let ep={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},eg=(0,v.default)({},[["render",function(e,t){let a=ec.Z;return(0,n.wg)(),(0,n.iD)("div",ep,[(0,n.Wm)(a,{height:266,sharp:!1}),(0,n.Wm)(a,{height:266,sharp:!1}),(0,n.Wm)(a,{height:266,sharp:!1}),(0,n.Wm)(a,{height:266,sharp:!1}),(0,n.Wm)(a,{height:266,sharp:!1})])}]]),eN={class:"p-24px"},ey={class:"bt-title"},eI={class:"flex gap-12px mb-16px"},ew={class:"mr-4px"},e_={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},eD={key:2,class:"flex-center h-400px text-center text-desc"},ej=(0,n.aZ)({__name:"index",setup(e){let{t}=(0,ei.QT)(),a=(0,n.iH)(!1),d=(0,n.iH)([]),m=[{label:"Gmail",key:"gmail"},{label:"Mailgun",key:"mailgun"},{label:"AWS SES",key:"aws"},{label:"SendGrid",key:"sendgrid"},{label:t("smtp.providers.custom"),key:"custom"}],c=e=>{y.setState({isEdit:!1,type:e,row:null}),y.open()},p=async()=>{try{a.value=!0;let e=await M();(0,u.Kn)(e)&&(d.value=(0,u.kJ)(e.list)?e.list:[])}finally{a.value=!1}},[g,y]=(0,o.d)({component:er,state:{isEdit:!1,type:"custom",refresh:p}}),I=e=>{y.setState({isEdit:!0,row:e}),y.open()},[w,_]=(0,o.d)({component:eM,state:{isEdit:!1,type:"custom",refresh:p}}),D=e=>{_.setState({smtp:e}),_.open()},j=e=>{(0,u.iG)({title:t("smtp.delete.title"),content:t("smtp.delete.confirm",{name:e.smtp_name}),onConfirm:async()=>{await N({id:e.id}),p()}})};return p(),(e,t)=>{let u=r.ZP,o=i.Z,M=s.Z,p=l.Z;return(0,n.wg)(),(0,n.iD)("div",eN,[(0,n._)("div",ey,(0,n.zw)(e.$t("smtp.title")),1),(0,n._)("div",eI,[(0,n.Wm)(o,{placement:"bottom-start",trigger:"hover",size:"large",options:m,onSelect:c},{default:(0,n.w5)(()=>[(0,n.Wm)(u,{type:"primary"},{default:(0,n.w5)(()=>[(0,n._)("span",ew,(0,n.zw)(e.$t("common.actions.add")),1),t[0]||(t[0]=(0,n._)("i",{class:"i-mdi-chevron-down text-17px"},null,-1))]),_:1,__:[0]})]),_:1}),(0,n.Wm)(M,{href:"https://www.billionmail.com/start/smtp.html",text:e.$t("smtp.description")},null,8,["text"])]),(0,n.SU)(a)?((0,n.wg)(),(0,n.j4)(eg,{key:0})):(0,n.SU)(d).length>0?((0,n.wg)(),(0,n.iD)("div",e_,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,n.SU)(d),e=>((0,n.wg)(),(0,n.j4)(V,{key:e.id,service:e,onEdit:I,onDelete:j,onShowDns:D},null,8,["service"]))),128))])):((0,n.wg)(),(0,n.iD)("div",eD,[(0,n.Wm)(p)])),(0,n.Wm)((0,n.SU)(g)),(0,n.Wm)((0,n.SU)(w))])}}})}}]);