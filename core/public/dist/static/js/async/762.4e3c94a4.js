"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["762"],{72290:function(e,l,a){a.d(l,{Z:()=>s});var t=a(58786),i=a(36123),u=a.n(i);a(95219),a(7410);let n={class:"code-lines-container"},r=["innerHTML"],o=["innerHTML"],v=(0,t.aZ)({__name:"index",props:{code:{},language:{default:"log"},showLineNumbers:{type:Boolean,default:!0},copyable:{type:Boolean,default:!0},height:{default:"100%"},highlightedLines:{default:()=>[]},wordWrap:{type:Boolean,default:!0},trimWhitespace:{type:Boolean,default:!0},enableVirtualScroll:{type:Boolean,default:!0},itemHeight:{default:21},overscan:{default:5},virtualScrollThreshold:{default:200},scrollToBottom:{type:Boolean,default:!1}},setup(e,l){let{expose:a}=l,i=(0,t.iH)(null),v=(0,t.iH)(null),s=(0,t.iH)(null),g=(0,t.iH)(null),h=(0,t.iH)(null),c=(0,t.iH)(0),d=(0,t.iH)(0),m=(0,t.iH)(!1),f=(0,t.iH)(null),p=(0,t.iH)(new Map),w=(0,t.iH)(new Map),y=(0,t.iH)(e.itemHeight),b=(0,t.Fl)(()=>{let l=e.code;return e.trimWhitespace&&(l=l.trim()),l}),H=(0,t.Fl)(()=>b.value.split("\n")),S=(0,t.Fl)(()=>!1!==e.enableVirtualScroll&&H.value.length>e.virtualScrollThreshold),T=()=>{if(null!==f.value)return f.value;if(S.value&&h.value){let e=document.createElement("div");e.style.cssText=`
			position: absolute;
			visibility: hidden;
			height: auto;
			width: auto;
			white-space: nowrap;
			font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
			font-size: 14px;
			line-height: 1.5;
			padding: 0;
			margin: 0;
		`,e.textContent="Ag",document.body.appendChild(e);let l=e.offsetHeight;if(document.body.removeChild(e),l>0)return f.value=l,y.value=l,l}if(i.value){let e=parseFloat(getComputedStyle(i.value).lineHeight);if(!isNaN(e)&&e>0)return f.value=e,y.value=e,e}return f.value=e.itemHeight,y.value=e.itemHeight,e.itemHeight},L=()=>Math.max(T(),18),_=l=>{if(!e.wordWrap||!i.value)return 1;let a=`${l}_${i.value.clientWidth}`;if(p.value.has(a))return p.value.get(a);let t=i.value.clientWidth-32;if(t<=0)return p.value.set(a,1),1;let u=Math.floor(t/8),n=Math.max(1,Math.ceil(l.length/u));return p.value.set(a,n),n},k=(0,t.iH)(null),U=(0,t.iH)(0),x=(0,t.Fl)(()=>{if(U.value,!e.wordWrap)return H.value.map((e,l)=>({lineNumber:l+1,isOriginalLine:!0}));let l=[];return H.value.forEach((e,a)=>{let t=_(e);l.push({lineNumber:a+1,isOriginalLine:!0});for(let e=1;e<t;e++)l.push({lineNumber:a+1,isOriginalLine:!1})}),l}),C=(0,t.Fl)(()=>x.value),F=(0,t.Fl)(()=>{if(S.value)return b.value;let l=`${b.value}_${e.language}`;if(w.value.has(l))return w.value.get(l);try{let a=u().highlight(b.value,u().languages[e.language]||u().languages.log,e.language);return w.value.set(l,a),a}catch(e){return console.warn("代码高亮失败:",e),w.value.set(l,b.value),b.value}}),N=(0,t.Fl)(()=>S.value?H.value.length*y.value:0),M=(0,t.Fl)(()=>S.value?Math.max(0,Math.floor(c.value/y.value)-e.overscan):0),Y=(0,t.Fl)(()=>{if(!S.value)return 0;let l=Math.ceil(d.value/y.value),a=M.value+l+2*e.overscan;return Math.min(H.value.length-1,a)}),$=(0,t.Fl)(()=>S.value?M.value*y.value:0),D=(0,t.Fl)(()=>S.value?(Y.value-M.value+1)*y.value:0),B=(0,t.Fl)(()=>M.value),O=(0,t.Fl)(()=>{if(!S.value)return[];let e=M.value,l=Y.value+1,a=[];for(let t=e;t<l&&t<H.value.length;t++)a.push({lineNumber:t+1,isOriginalLine:!0,originalIndex:t});return a}),W=(0,t.Fl)(()=>{if(!S.value)return[];let e=M.value,l=Y.value+1;return H.value.slice(e,l)}),j=l=>{let a=`line_${l}_${e.language}`;if(w.value.has(a))return w.value.get(a);try{let t=u().highlight(l,u().languages[e.language]||u().languages.log,e.language);return w.value.set(a,t),t}catch(e){return console.warn("代码高亮失败:",e),w.value.set(a,l),l}},z=e=>{var l;return(null==(l=C.value[e])?void 0:l.lineNumber)||1},A=null,E=null,q=()=>{h.value&&(m.value=!0,A&&cancelAnimationFrame(A),E&&clearTimeout(E),A=requestAnimationFrame(()=>{if(!h.value)return;let e=h.value.scrollTop;Math.abs(e-c.value)>.5&&(c.value=e),!S.value&&s.value&&(s.value.scrollTop=e)}),E=setTimeout(()=>{m.value=!1,S.value&&R()},150))},I=()=>{if(!h.value)return;let e=h.value.clientHeight;Math.abs(e-d.value)>1&&(d.value=e,f.value=null,(0,t.Y3)(()=>{T(),S.value&&q()}))},K=()=>{h.value&&(0,t.Y3)(()=>{if(S.value){let e=Math.max(0,N.value-d.value+20);h.value.scrollTop=e,c.value=e}else h.value.scrollTop=h.value.scrollHeight})},P=()=>{p.value.clear(),w.value.clear(),f.value=null},V=(e,l)=>{let a;return function(){for(var t=arguments.length,i=Array(t),u=0;u<t;u++)i[u]=arguments[u];clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...i)},l)}},R=()=>{S.value&&h.value&&!m.value&&(0,t.Y3)(()=>{I(),T(),m.value||q()})},Z=()=>{e.scrollToBottom&&K()};(0,t.bv)(()=>{(0,t.Y3)(()=>{I(),T(),window.addEventListener("resize",V(I,100)),h.value&&ResizeObserver&&(k.value=new ResizeObserver(V(()=>{P(),I(),U.value++},100)),k.value.observe(h.value)),setTimeout(()=>{Z()},200)})}),(0,t.YP)(()=>[b.value,e.language,S.value],()=>{w.value.clear(),(0,t.Y3)(()=>{S.value&&setTimeout(()=>{R()},50),e.scrollToBottom&&setTimeout(()=>{Z()},100)})},{deep:!0}),(0,t.YP)(()=>e.wordWrap,()=>{p.value.clear(),U.value++,S.value&&setTimeout(()=>{R()},50)}),(0,t.YP)(()=>e.itemHeight,()=>{f.value=null,y.value=e.itemHeight,S.value&&setTimeout(()=>{R()},50)}),(0,t.SK)(()=>{k.value&&k.value.disconnect(),window.removeEventListener("resize",I),A&&cancelAnimationFrame(A),E&&clearTimeout(E),P()}),a({scrollToBottom:K,scrollToLine:e=>{!h.value||e<1||e>H.value.length||(0,t.Y3)(()=>{if(S.value){let l=(e-1)*y.value;h.value.scrollTop=l,c.value=l}else{let l=h.value.querySelector(`.line-number:nth-child(${e})`);l&&l.scrollIntoView({behavior:"smooth",block:"center"})}})},clearCaches:P,calibrateVirtualScroll:R});let G=(0,t.Fl)(()=>{let e=H.value.length.toString().length;return`${1.5+.6*e+1.5}em`});return(e,l)=>((0,t.wg)(),(0,t.iD)("div",{ref_key:"codeContainer",ref:h,class:(0,t.C_)(["code-container",{"with-line-numbers":e.showLineNumbers,"word-wrap":e.wordWrap}]),style:(0,t.j5)({height:e.height}),onScroll:q},[(0,t.SU)(S)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"virtual-scroll-container",style:(0,t.j5)({height:(0,t.SU)(N)+"px",minHeight:"100%"})},[e.showLineNumbers?((0,t.wg)(),(0,t.iD)("div",{key:0,ref_key:"lineNumbersContainer",ref:s,class:"line-numbers-container virtual",style:(0,t.j5)({width:(0,t.SU)(G),transform:`translate3d(0, ${(0,t.SU)($)}px, 0)`,height:(0,t.SU)(D)+"px"})},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,t.SU)(O),(l,a)=>((0,t.wg)(),(0,t.iD)("div",{key:l.originalIndex,class:(0,t.C_)(["line-number",{highlighted:e.highlightedLines.includes(l.lineNumber),"original-line":l.isOriginalLine}]),style:(0,t.j5)({height:(0,t.SU)(y)+"px",lineHeight:(0,t.SU)(y)+"px"})},(0,t.zw)(l.isOriginalLine?l.lineNumber:""),7))),128))],4)):(0,t.kq)("",!0),(0,t._)("div",{ref_key:"codeContent",ref:g,class:"code-content virtual",style:(0,t.j5)({marginLeft:e.showLineNumbers?(0,t.SU)(G):"0",transform:`translate3d(0, ${(0,t.SU)($)}px, 0)`,height:(0,t.SU)(D)+"px"})},[(0,t._)("div",n,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,t.SU)(W),(l,a)=>((0,t.wg)(),(0,t.iD)("div",{key:(0,t.SU)(B)+a,class:(0,t.C_)(["code-line",{"highlighted-line":e.highlightedLines.includes((0,t.SU)(B)+a+1)}]),style:(0,t.j5)({height:(0,t.SU)(y)+"px",lineHeight:(0,t.SU)(y)+"px"}),innerHTML:j(l)},null,14,r))),128))])],4)],4)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[e.showLineNumbers?((0,t.wg)(),(0,t.iD)("div",{key:0,ref_key:"lineNumbersContainer",ref:s,class:"line-numbers-container non-virtual",style:(0,t.j5)({width:(0,t.SU)(G)})},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,t.SU)(x),(l,a)=>((0,t.wg)(),(0,t.iD)("div",{key:`line-${a}`,class:(0,t.C_)(["line-number",{highlighted:e.highlightedLines.includes(z(a)),"original-line":l.isOriginalLine}]),style:(0,t.j5)({minHeight:L()+"px"})},(0,t.zw)(l.isOriginalLine?l.lineNumber:""),7))),128))],4)):(0,t.kq)("",!0),(0,t._)("div",{ref_key:"codeContent",ref:g,class:"code-content non-virtual",style:(0,t.j5)({marginLeft:e.showLineNumbers?(0,t.SU)(G):"0"})},[(0,t._)("pre",{ref_key:"codePre",ref:i,class:(0,t.C_)(["code-pre",[`language-${e.language}`,{"word-wrap":e.wordWrap}]])},[l[0]||(l[0]=(0,t.Uk)("					")),(0,t._)("code",{ref_key:"codeElement",ref:v,class:(0,t.C_)(`language-${e.language}`),innerHTML:(0,t.SU)(F)},null,10,o),l[1]||(l[1]=(0,t.Uk)("\n				"))],2)],4)],64))],38))}}),s=(0,a(41748).default)(v,[["__scopeId","data-v-7071a4e3"]])}}]);