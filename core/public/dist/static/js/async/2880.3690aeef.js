"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2880"],{51169:function(e,t,l){l.d(t,{d:()=>n});var a=l(58786),s=l(49247);let i=Symbol("MODAL_INJECT"),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:l,onCancel:n,onConfirm:o}=e,c=(0,a.qj)({});return l?[(0,a.aZ)({setup(s,n){let{attrs:o,slots:d}=n;return(0,a.JJ)(i,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(c,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,a.h)(l,{...s,...o},d)}}),c]:[(0,a.aZ)({setup(t,l){let{attrs:d,slots:r}=l,u=(0,a.f3)(i),p=(0,a.iH)(!1);return c.open=()=>{var t;p.value=!0,null==(t=e.onChangeState)||t.call(e,p.value)},c.close=()=>{p.value=!1},c.setState=t=>{var l;null==u||u.setState(t),null==(l=e.onChangeState)||l.call(e,p.value)},c.getState=()=>(null==u?void 0:u.state)??{},null==u||u.extendApi(c),()=>(0,a.Wm)(s.Z,(0,a.dG)({show:p.value},t,d,{onCancel:n,onConfirm:o,"onUpdate:show":e=>{p.value=e??!1}}),r)}}),c]}},46244:function(e,t,l){l.d(t,{Z:()=>i});var a=l(98048),s=l(58786);let i=(0,s.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:l}=t,i=(0,s.iH)(null);return l({validate:()=>{var e;return null==(e=i.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=i.value)?void 0:e.restoreValidation()}}),(e,t)=>{let l=a.Z;return(0,s.wg)(),(0,s.j4)(l,(0,s.dG)(e.$attrs,{ref_key:"formRef",ref:i,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},88559:function(e,t,l){l.r(t),l.d(t,{default:()=>C});var a=l(39244),s=l(25170),i=l(60424),n=l(66760),o=l(58786),c=l(93953),d=l(15496),r=l(68271),u=l(67512),p=l(51169),m=l(34541);let{t:g}=l(76882).Z.global,v=e=>m.e.get("/mail_bcc/list",{params:e}),b=e=>m.e.post("/mail_bcc/add",e,{fetchOptions:{loading:g("settings.bcc.loading.adding"),successMessage:!0}}),f=e=>m.e.post("/mail_bcc/edit",e,{fetchOptions:{loading:g("settings.bcc.loading.saving"),successMessage:!0}}),S=e=>m.e.post("/mail_bcc/delete",e,{fetchOptions:{loading:g("settings.bcc.loading.deleting"),successMessage:!0}});var y=l(46244),U=l(29875),h=l(8490),w=l(6455),_=l(73084),W=l(52495);let Z=(0,o.aZ)({__name:"BccForm",setup(e){let{t}=(0,W.QT)(),l=(0,o.iH)(!1),a=(0,o.Fl)(()=>l.value?t("settings.bcc.edit"):t("settings.bcc.add")),s=(0,o.AE)("formRef"),i=(0,o.iH)(0),n=(0,o.qj)({address:"",goto:"",type:"sender",active:1}),c=(0,o.Fl)(()=>[{label:t("settings.bcc.types.sender"),value:"sender"},{label:t("settings.bcc.types.recipient"),value:"recipient"}]),d={},[r,u]=(0,p.d)({onChangeState:e=>{if(e){let e=u.getState(),{row:t}=e;l.value=e.isEdit,t&&(i.value=t.id,n.address=t.address,n.goto=t.goto,n.type=t.type,n.active=t.active)}else i.value=0,n.address="",n.goto="",n.type="sender",n.active=1},onConfirm:async()=>{var e;await (null==(e=s.value)?void 0:e.validate()),l.value?await f({id:i.value,...(0,o.IU)(n)}):await b((0,o.IU)(n)),u.getState().refresh()}});return(e,i)=>{let u=_.Z,p=w.ZP,m=h.Z,g=U.Z,v=y.Z;return(0,o.wg)(),(0,o.j4)((0,o.SU)(r),{title:(0,o.SU)(a),width:"500"},{default:(0,o.w5)(()=>[(0,o.Wm)(v,{ref_key:"formRef",ref:s,class:"pt-8px",model:(0,o.SU)(n),rules:d},{default:(0,o.w5)(()=>[(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.needCopy"),path:"user"},{default:(0,o.w5)(()=>[(0,o.Wm)(u,{value:(0,o.SU)(n).address,"onUpdate:value":i[0]||(i[0]=e=>(0,o.SU)(n).address=e),disabled:(0,o.SU)(l),placeholder:(0,o.SU)(t)("settings.bcc.placeholders.needCopy")},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.copyTo"),path:"forward_user"},{default:(0,o.w5)(()=>[(0,o.Wm)(u,{value:(0,o.SU)(n).goto,"onUpdate:value":i[1]||(i[1]=e=>(0,o.SU)(n).goto=e),placeholder:(0,o.SU)(t)("settings.bcc.placeholders.copyTo")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.type"),path:"type"},{default:(0,o.w5)(()=>[(0,o.Wm)(m,{value:(0,o.SU)(n).type,"onUpdate:value":i[2]||(i[2]=e=>(0,o.SU)(n).type=e),options:(0,o.SU)(c)},null,8,["value","options"])]),_:1},8,["label"]),(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.status"),"show-feedback":!1},{default:(0,o.w5)(()=>[(0,o.Wm)(g,{value:(0,o.SU)(n).active,"onUpdate:value":i[3]||(i[3]=e=>(0,o.SU)(n).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});function k(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,o.lA)(e)}let C=(0,o.aZ)({__name:"index",setup(e){let{t}=(0,W.QT)(),{tableParams:l,tableList:m,loading:g,tableTotal:b,getTableData:f}=(0,u.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:"",keyword:""},fetchFn:v}),y=(0,o.iH)([{key:"address",title:()=>t("settings.bcc.needCopy"),ellipsis:{tooltip:!0}},{key:"goto",title:()=>t("settings.bcc.copyTo"),ellipsis:{tooltip:!0}},{key:"domain",title:()=>t("settings.bcc.domain"),ellipsis:{tooltip:!0}},{key:"type",title:()=>t("settings.bcc.type"),render:e=>t(`settings.bcc.types.${e.type}`)},{key:"active",title:()=>t("settings.bcc.status"),render:e=>(0,o.Wm)("div",{class:["text-16px",1===e.active?"text-primary":"text-error"]},[(0,o.Wm)("i",{class:[1===e.active?"i-mdi-success-circle":"i-mdi-remove-circle"]},null)])},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let l,a;return(0,o.Wm)(c.Z,{inline:!0},{default:()=>[(0,o.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{C(e)}},k(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,o.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{x(e)}},k(a=t("common.actions.delete"))?a:{default:()=>[a]})]})}}]),[U,h]=(0,p.d)({component:Z,state:{isEdit:!1,refresh:f}}),w=()=>{h.setState({isEdit:!1,row:null}),h.open()},_=()=>{f(!0)},C=e=>{h.setState({isEdit:!0,row:e}),h.open()},x=e=>{(0,r.iG)({title:t("settings.bcc.delete.title",{address:e.address}),content:t("settings.bcc.delete.content"),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await S({id:e.id}),f()}})};return(e,t)=>{let c=n.Z,r=i.Z,u=s.Z,p=a.Z;return(0,o.wg)(),(0,o.j4)(p,null,{toolsLeft:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(d.ZP),{type:"primary",onClick:w},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("settings.bcc.add")),1)]),_:1})]),toolsRight:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(d.ZP),{onClick:_},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),table:(0,o.w5)(()=>[(0,o.Wm)(r,{loading:(0,o.SU)(g),columns:(0,o.SU)(y),data:(0,o.SU)(m)},{empty:(0,o.w5)(()=>[(0,o.Wm)(c)]),_:1},8,["loading","columns","data"])]),pageRight:(0,o.w5)(()=>[(0,o.Wm)(u,{page:(0,o.SU)(l).page,"onUpdate:page":t[0]||(t[0]=e=>(0,o.SU)(l).page=e),"page-size":(0,o.SU)(l).page_size,"onUpdate:pageSize":t[1]||(t[1]=e=>(0,o.SU)(l).page_size=e),"item-count":(0,o.SU)(b),onRefresh:(0,o.SU)(f)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(U))]),_:1})}}})}}]);