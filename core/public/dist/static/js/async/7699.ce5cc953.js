"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["7699"],{39432:function(e,t,a){a.d(t,{Au:()=>m,Fj:()=>d,LC:()=>o,Lb:()=>h,M7:()=>_,OV:()=>p,dj:()=>r,gK:()=>u,i7:()=>n,qt:()=>s,rU:()=>g,v1:()=>c,xh:()=>v,yW:()=>f});var l=a(34541);let{t:i}=a(76882).Z.global,n=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),s=()=>l.e.post("/multi_ip_domain/apply"),d=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),r=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),p=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),m=e=>l.e.get("/domains/get_ssl",{params:e}),c=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),f=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),v=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:i("domain.api.loading.settingDefault"),successMessage:!0}}),g=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:i("domain.api.loading.settingBrandInfo"),successMessage:!0}}),_=e=>l.e.post("/multi_ip_domain/test",e,{fetchOptions:{loading:i("domain.api.loading.testingConnection"),successMessage:!0}}),h=()=>l.e.post("/askai/supplier/status")},31651:function(e,t,a){a.d(t,{A8:()=>o,NI:()=>s,QB:()=>u,WF:()=>d,Xc:()=>p,ef:()=>r});var l=a(76882),i=a(34541);let{t:n}=l.Z.global;function o(e){return i.e.get("/email_template/list",{params:e})}function s(){return i.e.get("/email_template/all")}function d(e){return i.e.post("/email_template/create",e,{fetchOptions:{loading:n("market.template.loading.creating"),successMessage:!0}})}function u(e){return i.e.post("/email_template/update",e,{fetchOptions:{loading:n("market.template.loading.updating"),successMessage:!0}})}function r(e){return i.e.post("/email_template/copy",e,{fetchOptions:{loading:n("market.template.loading.copying"),successMessage:!0}})}function p(e){return i.e.post("/email_template/delete",e,{fetchOptions:{loading:n("market.template.loading.deleting"),successMessage:!0}})}},16634:function(e,t,a){a.d(t,{Ao:()=>o,mL:()=>s,uL:()=>n});var l=a(34541),i=a(42205);let n={fetchOptions:{loading:"Loading... Please wait.",successMessage:!0}};async function o(e){let{legal_company_name:t,web_site:a,company_profile:n,email:o,phone:s,support_url:d,hasGotCompanyProfile:u}=(0,i.J)();if(!u.value)try{let i=await l.e.post("/askai/project/get_company_profile",{domain:e});t.value=i.legal_company_name,a.value=i.web_site,n.value=i.company_profile,o.value=i.email,s.value=i.phone,d.value=i.support_url,u.value=!0}catch(e){console.warn(e)}}async function s(e){let{legal_company_name:t,web_site:a,company_profile:o,email:s,phone:d,support_url:u}=(0,i.J)();try{await l.e.post("/askai/project/modify_company_profile",{domain:e,legal_company_name:t.value,web_site:a.value,company_profile:o.value,email:s.value,phone:d.value,support_url:u.value},n)}catch(e){console.warn(e)}}},54686:function(e,t,a){a.d(t,{L7:()=>g,M7:()=>m,Rw:()=>_,VP:()=>h,Vq:()=>y,Xe:()=>f,gK:()=>c,ke:()=>v,lQ:()=>r});var l=a(34541),i=a(16634),n=a(42205),o=a(68271),s=a(39432),d=a(31708),u=a(76882);async function r(e){let{domainTit:t,domainIp:a,hostname:i,quota:s,unit:d,mailboxes:u,catch_email:r,hasGotDomainConfiguration:m,urls:c}=(0,n.J)();if(!m.value)try{let n=await l.e.get("/domains/list",{params:{keyword:e,page:1,page_size:1}});if((0,o.Kn)(n)){var f;let{list:l}=n,v=(0,o.UO)(l[0].quota,!0,2).split(" ");t.value=l[0].domain,a.value=(null==(f=l[0].multi_ip_domains)?void 0:f.outbound_ip)||"",i.value=l[0].a_record,s.value=v[0],d.value=v[1],u.value=l[0].mailboxes,r.value=l[0].email,c.value=l[0].urls&&l[0].urls.length>0&&""!=l[0].urls[0]?l[0].urls:[`https://${e}`],await p(e),m.value=!0}}catch(e){console.warn(e)}}async function p(e){let{brandInfo:t,createdBrandInfo:a}=(0,n.J)();try{let i=await l.e.post("/askai/project/get_project_status",{domain:e});t.value=i.status,a.value=i.create_status}catch(e){console.warn(e)}}async function m(){let{domainTit:e,domainIp:t}=(0,n.J)();if(""==t.value)return void o.v0.error(u.Z.global.t("domain.edit.domainConfiguration.validation.setDedicatedIpFirst"));try{await l.e.post("/multi_ip_domain/test",{domain:e.value,outbound_ip:t.value},{fetchOptions:{loading:u.Z.global.t("domain.edit.domainConfiguration.api.testingConnection"),successMessage:!0}})}catch(e){console.warn(e)}}async function c(){let{domainTit:e,domainIp:t,hostname:a,quota:o,unit:s,urls:d,mailboxes:u,catch_email:r}=(0,n.J)(),p=function(e,t){switch(t){case"KB":return 1024*e;case"MB":return 1024*e*1024;case"GB":return 1024*e*1048576;case"TB":return 1024*e*0x40000000;default:return e}}(Number(o.value),s.value);try{await l.e.post("/domains/update",{domain:e.value,mailboxes:u.value,mailboxQuota:p,quota:p,rateLimit:1,active:1,email:r.value,urls:d.value,outbound_ip:t.value,hostname:a.value},i.uL)}catch(e){console.warn(e)}}async function f(){let{waitAndCheckDomainStatusRef:e,domainTit:t,urls:a,hasGotDomainConfiguration:l}=(0,n.J)(),i=(0,d.s6)();if(l.value=!1,0==a.value.length||""==a.value[0])o.v0.error(u.Z.global.t("domain.edit.domainConfiguration.fillDomain"));else if((0,o.CB)(a.value[0]))try{await (0,s.rU)({domain:t.value,urls:a.value}),i.domainSource=t.value,e.value.open(t.value,()=>{v(t.value,1),r(t.value)})}catch(e){console.warn(e)}else o.v0.error(u.Z.global.t("domain.edit.domainConfiguration.fillValidDomain"))}async function v(e,t){try{await l.e.post("/domains/update",{domain:e,hasbrandinfo:t})}catch(e){console.warn(e)}}function g(e){let{urls:t}=(0,n.J)(),a=t.value[0].match(/http:\/\/?/g),l=t.value[0].match(/https:\/\/?/g);a&&(t.value[0]=a[0]+e),l&&(t.value[0]=l[0]+e),a||l||(t.value[0]="https://"+e)}function _(e){let{urls:t}=(0,n.J)();t.value.splice(e,1)}function h(){let{hasGotAisettings:e,hasGotCompanyProfile:t,hasGotDomainConfiguration:a,hasGotFootersettings:l,hasGotProjectDetail:i,hasGotSitemap:o,hasGotStyling:s}=(0,n.J)();e.value=!1,t.value=!1,a.value=!1,l.value=!1,i.value=!1,o.value=!1,s.value=!1}async function y(e){let{brandInfo:t,domainTit:a}=(0,n.J)();try{await l.e.post("/askai/project/set_project_status",{domain:a.value,status:e},i.uL),await l.e.post("/domains/update",{domain:a.value,active:1,hasbrandinfo:Number(e)})}catch(a){t.value=!e,console.warn(a)}}},42205:function(e,t,a){a.d(t,{J:()=>o});var l=a(30989),i=a(58786);let n=(0,l.Q_)("editDomainStore",()=>{let e=(0,i.iH)(!1),t=(0,i.iH)(""),a=(0,i.iH)(""),l=(0,i.iH)(""),n=(0,i.iH)("0"),o=(0,i.iH)("B"),s=(0,i.iH)(0),d=(0,i.iH)(""),u=(0,i.iH)(["https://"]),r=(0,i.iH)(!1),p=(0,i.iH)(),m=(0,i.iH)(!1),c=(0,i.iH)(!1),f=(0,i.iH)(""),v=(0,i.iH)(""),g=(0,i.iH)(""),_=(0,i.iH)(""),h=(0,i.iH)(""),y=(0,i.iH)(""),w=(0,i.iH)(""),k=(0,i.iH)([]),H=(0,i.iH)({title:"",content:"",kid:"",update_time:0}),S=(0,i.iH)(""),U=(0,i.iH)(""),b=(0,i.iH)(!1),x=(0,i.iH)(!1),Z=(0,i.iH)(""),W=(0,i.iH)(!1),C=(0,i.iH)(""),M=(0,i.iH)(!1),j=(0,i.iH)(""),P=(0,i.iH)(""),O=(0,i.iH)(""),z=(0,i.iH)(""),L=(0,i.iH)(""),J=(0,i.iH)(""),T=(0,i.iH)(!1),E=(0,i.iH)(""),B=(0,i.iH)(""),D=(0,i.iH)(""),R=(0,i.iH)(""),V=(0,i.iH)(""),F=(0,i.iH)(""),A=(0,i.iH)(""),I=(0,i.iH)(""),K=(0,i.iH)(!1),$=(0,i.iH)([{title:"",uri_path:""}]),q=(0,i.iH)(!1),N=(0,i.iH)(""),Q=(0,i.iH)("");return{hasGotDomainConfiguration:e,domainTit:t,domainIp:a,hostname:l,quota:n,unit:o,mailboxes:s,catch_email:d,urls:u,brandInfo:r,waitAndCheckDomainStatusRef:p,createdBrandInfo:m,hasGotProjectDetail:c,domain:f,description:v,favicon:g,industry:_,primary_logo:h,project_name:y,secondary_logo:w,knowledge_base:k,activeKnowledge:H,knowledgeTitle:S,knowledgeContent:U,knowledgeModalShow:b,isEditKnowledge:x,knowledge_base_content:Z,knowledgeBasePreview:W,knowledgeBasePreviewTit:C,hasGotCompanyProfile:M,legal_company_name:j,web_site:P,company_profile:O,email:z,phone:L,support_url:J,hasGotStyling:T,accent_color:E,text_color:B,page_background:D,container_background:R,link_social_color:V,link_footer_color:F,heading_font:A,body_font:I,hasGotSitemap:K,sitemap:$,hasGotFootersettings:q,copyright_text:N,disclaimer:Q,hasGotAisettings:(0,i.iH)(!1),prompt:(0,i.iH)("")}});function o(){let e=n();return{...(0,l.Jk)(e)}}},88253:function(e,t,a){a.d(t,{Z:()=>s});var l=a(60579),i=a(58786),n=a(6768);let o=(0,i.aZ)({__name:"index",props:(0,i.Vf)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:(0,i.Vf)(["save"],["update:value"]),setup(e,t){let{expose:a,emit:o}=t,s=(0,i.tT)(e,"value"),d=(0,i.iH)(null),u=null,r=(0,i.iH)(!1);n.Z.config({paths:{vs:`${location.origin}/static/plugin/monaco`}});let p=async()=>{if(d.value&&!u)try{r.value=!0;let t=await n.Z.init();(u=t.editor.create(d.value,{value:s.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{s.value=(null==u?void 0:u.getValue())||""}),u.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,function(){o("save")})}finally{r.value=!1}},m=()=>{u&&(u.dispose(),u=null)};return(0,i.YP)(()=>s.value,e=>{u&&e!==u.getValue()&&u.setValue(e)}),(0,i.bv)(()=>{p()}),(0,i.Jd)(()=>{m()}),a({getEditor:()=>u}),(e,t)=>{let a=l.Z;return(0,i.wg)(),(0,i.j4)(a,{class:"h-full",show:(0,i.SU)(r)},{default:(0,i.w5)(()=>[(0,i._)("div",{ref_key:"containerRef",ref:d,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}}),s=(0,a(41748).default)(o,[["__scopeId","data-v-72ffe419"]])},53472:function(e,t,a){a.d(t,{Z:()=>n});var l=a(58786);let i=["height","srcdoc"],n=(0,l.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(t,a)=>((0,l.wg)(),(0,l.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,i))})},86559:function(e,t,a){a.d(t,{Z:()=>n});var l=a(73084),i=a(58786);let n=(0,i.aZ)({__name:"index",props:(0,i.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,i.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:n}=t,o=(0,i.iH)(null),s=(0,i.tT)(e,"value"),d=()=>{n("search",s.value)};return a({focus:()=>{var e;null==(e=o.value)||e.focus()}}),(e,t)=>{let a=l.Z;return(0,i.wg)(),(0,i.j4)(a,(0,i.dG)({ref_key:"inputRef",ref:o,value:s.value,"onUpdate:value":t[0]||(t[0]=e=>s.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,i.D2)(d,["enter"])}),(0,i.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,i.w5)(()=>[(0,i._)("div",{class:"flex items-center cursor-pointer",onClick:d},t[1]||(t[1]=[(0,i._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,i.w5)(()=>[(0,i._)("div",{class:"flex items-center cursor-pointer",onClick:d},t[2]||(t[2]=[(0,i._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},13269:function(e,t,a){a.r(t),a.d(t,{default:()=>T});var l=a(39244),i=a(25170),n=a(60424),o=a(66760),s=a(86559),d=a(15496),u=a(73084),r=a(58786),p=a(53903),m=a(93953),c=a(51169),f=a(67512),v=a(68271),g=a(31651),_=a(46244),h=a(6455),y=a(88253),w=a(3179),k=a(81833),H=a(8490),S=a(37864);let U={class:"flex flex-col flex-1 h-580px"},b={class:"flex justify-end gap-12px mb-8px"},x={class:"flex-1"},Z=(0,r.aZ)({__name:"TemplateForm",setup(e){let t=(0,r.RC)(()=>Promise.all([a.e("9780"),a.e("7303"),a.e("5867"),a.e("3697"),a.e("9380")]).then(a.bind(a,48555))),l=(0,r.iH)(!1),i=(0,r.Fl)(()=>l.value?"Edit template":"New template"),n=(0,r.iH)(0),o=(0,r.qj)({temp_name:"",add_type:0,html_content:"",drag_data:""}),s=[{label:"HTML",value:0},{label:"Drag",value:1}],p=(0,r.Fl)(()=>{var e;return(null==(e=s.find(e=>e.value===o.add_type))?void 0:e.label)||""}),m=e=>{let t=new FileReader;t.onload=e=>{var t;o.html_content=null==(t=e.target)?void 0:t.result},e.file&&t.readAsText(e.file)},f=()=>{let e=Z.getState();e.preview&&e.preview(o.html_content)},[v,Z]=(0,c.d)({onChangeState:e=>{if(e){let e=Z.getState(),{row:t}=e;l.value=e.isEdit,e.type&&(o.add_type=e.type),t&&(n.value=t.id,o.temp_name=t.temp_name,o.add_type=t.add_type,o.html_content=t.html_content,o.drag_data=t.drag_data)}else n.value=0,o.temp_name="",o.add_type=0,o.html_content="",o.drag_data=""},onConfirm:async()=>{l.value?await (0,g.QB)({id:n.value,...(0,r.IU)(o)}):await (0,g.WF)((0,r.IU)(o)),Z.getState().refresh()}});return(e,a)=>{let n=u.Z,c=S.ZP,g=H.Z,Z=k.Z,W=w.Z,C=d.ZP,M=y.Z,j=h.ZP,P=_.Z;return(0,r.wg)(),(0,r.j4)((0,r.SU)(v),{title:(0,r.SU)(i),width:1200},{default:(0,r.w5)(()=>[(0,r.Wm)(P,{class:"pt-8px",model:(0,r.SU)(o)},{default:(0,r.w5)(()=>[(0,r.Wm)(Z,{cols:24,"x-gap":24},{default:(0,r.w5)(()=>[(0,r.Wm)(c,{span:18,label:"Name",path:"temp_name"},{default:(0,r.w5)(()=>[(0,r.Wm)(n,{value:(0,r.SU)(o).temp_name,"onUpdate:value":a[0]||(a[0]=e=>(0,r.SU)(o).temp_name=e),placeholder:e.$t("market.template.add.namePlaceholder")},null,8,["value","placeholder"])]),_:1}),(0,r.Wm)(c,{span:6,label:"Type",path:"add_type"},{default:(0,r.w5)(()=>[(0,r.Wm)(g,{value:(0,r.SU)(o).add_type,"onUpdate:value":a[1]||(a[1]=e=>(0,r.SU)(o).add_type=e),disabled:(0,r.SU)(l),options:s},null,8,["value","disabled"])]),_:1})]),_:1}),(0,r.Wm)(j,{label:(0,r.SU)(p),"show-feedback":!1},{default:(0,r.w5)(()=>[(0,r._)("div",U,[(0,r._)("div",b,[(0,r._)("div",null,[(0,r.Wm)(W,{mode:"button","button-type":"primary","is-upload":!1,accept:["html"],onChange:m},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("market.template.uploadHtml")),1)]),_:1})]),(0,r.Wm)(C,{type:"primary",ghost:"",onClick:f},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("common.actions.preview")),1)]),_:1})]),(0,r._)("div",x,[1===(0,r.SU)(o).add_type?((0,r.wg)(),(0,r.j4)((0,r.SU)(t),{key:0,config:(0,r.SU)(o).drag_data,"onUpdate:config":a[2]||(a[2]=e=>(0,r.SU)(o).drag_data=e),html:(0,r.SU)(o).html_content,"onUpdate:html":a[3]||(a[3]=e=>(0,r.SU)(o).html_content=e)},null,8,["config","html"])):(0,r.kq)("",!0),0===(0,r.SU)(o).add_type?((0,r.wg)(),(0,r.j4)(M,{key:1,value:(0,r.SU)(o).html_content,"onUpdate:value":a[4]||(a[4]=e=>(0,r.SU)(o).html_content=e),language:"html"},null,8,["value"])):(0,r.kq)("",!0)])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});var W=a(53472);let C=(0,r.aZ)({__name:"TemplatePreview",setup(e){let t=(0,r.iH)(""),[a,l]=(0,c.d)({onChangeState:e=>{e&&(t.value=l.getState().html||"")}});return(e,l)=>{let i=W.Z;return(0,r.wg)(),(0,r.j4)((0,r.SU)(a),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,r.w5)(()=>[(0,r.Wm)(i,{height:580,value:(0,r.SU)(t)},null,8,["value"])]),_:1},8,["title"])}}});var M=a(99778),j=a(65965),P=a(52495);let O={class:"p-24px"},z={class:"bt-title"};function L(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.lA)(e)}let J=(0,r.aZ)({__name:"index",setup(e){let t=(0,j.tv)(),{t:a}=(0,P.QT)(),_=(0,r.iH)(),{tableParams:h,tableList:y,loading:w,tableTotal:k,getTableData:H}=(0,f.Z)({loading:!0,immediate:!1,params:{page:1,page_size:10,keyword:""},fetchFn:g.A8});(async()=>{await H(),y.value.forEach(e=>{e.isEdit=!1,e.edit_name=""})})();let S=(0,r.iH)([{key:"temp_name",title:a("market.template.columns.name"),minWidth:120,ellipsis:{tooltip:!0},render:e=>{if(!e.isEdit)return(0,r.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,r.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{T(e)}},{default:()=>[e.temp_name]}),(0,r.Wm)("i",{class:"i-ci:edit-pencil-line-01 text-14px cursor-pointer",onClick:()=>{e.isEdit=!0,e.edit_name=e.temp_name}},null)]);{let t,l;return(0,r.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,r.Wm)(u.Z,{class:"edit-domain-input",value:e.edit_name,"onUpdate:value":t=>e.edit_name=t},null),(0,r.Wm)(d.ZP,{text:!0,type:"info",class:"text-12px",onClick:()=>J(e)},L(t=a("market.template.edit.confirm"))?t:{default:()=>[t]}),(0,r.Wm)(d.ZP,{text:!0,type:"default",onClick:()=>{e.isEdit=!1,e.edit_name=""}},L(l=a("market.template.edit.cancel"))?l:{default:()=>[l]})])}}},{key:"add_type",title:a("market.template.columns.type"),minWidth:140,render:e=>{if(1===e.add_type){let e;return(0,r.Wm)(p.ZP,{size:"small",bordered:!1,type:"primary"},L(e=a("market.template.types.drag"))?e:{default:()=>[e]})}if(0===e.add_type){let e;return(0,r.Wm)(p.ZP,{size:"small",bordered:!1,type:"info"},L(e=a("market.template.types.html"))?e:{default:()=>[e]})}if(2==e.add_type){let e;return(0,r.Wm)(p.ZP,{size:"small",bordered:!1,type:"success"},L(e=a("market.template.types.ai"))?e:{default:()=>[e]})}}},{key:"create_time",title:a("market.template.columns.createdAt"),minWidth:140,render:e=>(0,v.mr)(e.create_time)},{title:a("common.columns.actions"),key:"actions",align:"right",width:240,render:e=>{let t,l,i,n;return(0,r.Wm)(m.Z,{inline:!0},{default:()=>[(0,r.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{D(e.html_content)}},L(t=a("common.actions.preview"))?t:{default:()=>[t]}),(0,r.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{T(e)}},L(l=a("common.actions.edit"))?l:{default:()=>[l]}),(0,r.Wm)(d.ZP,{type:"primary",text:!0,disabled:2==e.add_type,onClick:()=>{R(e)}},L(i=a("market.template.actions.duplicate"))?i:{default:()=>[i]}),(0,r.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{V(e)}},L(n=a("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[U,b]=(0,c.d)({component:Z,state:{isEdit:!1,refresh:H,preview:e=>{D(e)}}}),x=()=>{_.value.open()},W=e=>{"Drag"==e?b.setState({isEdit:!1,type:1,row:null}):"HTML"==e&&b.setState({isEdit:!1,type:0,row:null}),b.open()},J=async e=>{e.temp_name=e.edit_name,await (0,g.QB)(e),e.isEdit=!1},T=e=>{2==e.add_type&&e.chat_id?t.push({name:"ai-template",params:{chatId:e.chat_id}}):(b.setState({isEdit:!0,row:e}),b.open())},[E,B]=(0,c.d)({component:C}),D=e=>{B.setState({html:e}),B.open()},R=async e=>{await (0,g.ef)({id:e.id}),H()},V=e=>{(0,v.iG)({title:a("market.template.delete.title"),content:a("market.template.delete.confirm",{name:e.temp_name}),confirmText:a("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,g.Xc)({id:e.id}),H()}})};return(e,t)=>{let u=s.Z,p=o.Z,m=n.Z,c=i.Z,f=l.Z;return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",O,[(0,r._)("div",z,(0,r.zw)((0,r.SU)(a)("template.template")),1),(0,r.Wm)(f,null,{toolsLeft:(0,r.w5)(()=>[(0,r.Wm)((0,r.SU)(d.ZP),{type:"primary",onClick:x},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)((0,r.SU)(a)("market.template.actions.add")),1)]),_:1})]),toolsRight:(0,r.w5)(()=>[(0,r.Wm)(u,{value:(0,r.SU)(h).keyword,"onUpdate:value":t[0]||(t[0]=e=>(0,r.SU)(h).keyword=e),width:240,placeholder:(0,r.SU)(a)("market.template.search.namePlaceholder"),onSearch:t[1]||(t[1]=()=>(0,r.SU)(H)(!0))},null,8,["value","placeholder"])]),table:(0,r.w5)(()=>[(0,r.Wm)(m,{loading:(0,r.SU)(w),columns:(0,r.SU)(S),data:(0,r.SU)(y)},{empty:(0,r.w5)(()=>[(0,r.Wm)(p)]),_:1},8,["loading","columns","data"])]),pageRight:(0,r.w5)(()=>[(0,r.Wm)(c,{page:(0,r.SU)(h).page,"onUpdate:page":t[2]||(t[2]=e=>(0,r.SU)(h).page=e),"page-size":(0,r.SU)(h).page_size,"onUpdate:pageSize":t[3]||(t[3]=e=>(0,r.SU)(h).page_size=e),"item-count":(0,r.SU)(k),onRefresh:(0,r.SU)(H)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,r.w5)(()=>[(0,r.Wm)((0,r.SU)(U)),(0,r.Wm)((0,r.SU)(E))]),_:1})]),(0,r.Wm)(M.Z,{ref_key:"createTemplateModalRef",ref:_,onConfirmType:W},null,512)],64)}}}),T=(0,a(41748).default)(J,[["__scopeId","data-v-0e970b7e"]])}}]);