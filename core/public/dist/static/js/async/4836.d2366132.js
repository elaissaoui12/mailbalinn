"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["4836"],{93953:function(e,t,a){a.d(t,{Z:()=>v});var l=a(65083),n=a(58786),o=a(56946),i=a(54470),s=a(51048),r=a(71309),c=a(60951),u=a(6445),d=a(73238);let p={name:"Flex",self:function(){return d.Z}},h=Object.assign(Object.assign({},o.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),v=(0,n.aZ)({name:"Flex",props:h,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,i.ZP)(e),c=(0,o.Z)("Flex","-flex",void 0,p,e,t);return{rtlEnabled:(0,s.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,n.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,r.Tl)("gap",t)]:a}}=c.value,{row:n,col:o}=(0,l.yU)(a);return{horizontal:(0,l.fQ)(o),vertical:(0,l.fQ)(n)}})}},render(){let{vertical:e,reverse:t,align:a,inline:l,justify:o,margin:i,wrap:s,mergedClsPrefix:r,rtlEnabled:d}=this,p=(0,c.x)((0,u.z)(this),!1);return p.length?(0,n.h)("div",{role:"none",class:[`${r}-flex`,d&&`${r}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:o,flexWrap:!s||e?"nowrap":"wrap",alignItems:a,gap:`${i.vertical}px ${i.horizontal}px`}},p):null}})},29875:function(e,t,a){let l;a.d(t,{Z:()=>k});var n=a(65083),o=a(20013),i=a(58786),s=a(76128),r=a(62594),c=a(56946),u=a(54470),d=a(32196),p=a(53198),h=a(44267),v=a(71309),f=a(93950),g=a(19595),m=a(9798),b=a(30951);let w={name:"Switch",common:m.Z,self:function(e){let{primaryColor:t,opacityDisabled:a,borderRadius:l,textColor3:n}=e;return Object.assign(Object.assign({},b.Z),{iconColor:n,textColor:"white",loadingColor:t,opacityDisabled:a,railColor:"rgba(0, 0, 0, .14)",railColorActive:t,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:l,railBorderRadiusMedium:l,railBorderRadiusLarge:l,buttonBorderRadiusSmall:l,buttonBorderRadiusMedium:l,buttonBorderRadiusLarge:l,boxShadowFocus:`0 0 0 2px ${(0,g.zX)(t,{alpha:.2})}`})}};var y=a(28632);let _=(0,v.cB)("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[(0,v.cE)("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),(0,v.cE)("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),(0,v.cE)("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),(0,v.cB)("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[(0,y.c)({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),(0,v.cE)("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),(0,v.cE)("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),(0,v.cE)("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),(0,v.c)("&:focus",[(0,v.cE)("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),(0,v.cM)("round",[(0,v.cE)("rail","border-radius: calc(var(--n-rail-height) / 2);",[(0,v.cE)("button","border-radius: calc(var(--n-button-height) / 2);")])]),(0,v.u4)("disabled",[(0,v.u4)("icon",[(0,v.cM)("rubber-band",[(0,v.cM)("pressed",[(0,v.cE)("rail",[(0,v.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,v.cE)("rail",[(0,v.c)("&:active",[(0,v.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,v.cM)("active",[(0,v.cM)("pressed",[(0,v.cE)("rail",[(0,v.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),(0,v.cE)("rail",[(0,v.c)("&:active",[(0,v.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),(0,v.cM)("active",[(0,v.cE)("rail",[(0,v.cE)("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),(0,v.cE)("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[(0,v.cE)("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[(0,y.c)()]),(0,v.cE)("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-height);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),(0,v.cM)("active",[(0,v.cE)("rail","background-color: var(--n-rail-color-active);")]),(0,v.cM)("loading",[(0,v.cE)("rail",`
 cursor: wait;
 `)]),(0,v.cM)("disabled",[(0,v.cE)("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]),x=Object.assign(Object.assign({},c.Z.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]}),k=(0,i.aZ)({name:"Switch",props:x,slots:Object,setup(e){void 0===l&&(l="undefined"==typeof CSS||void 0!==CSS.supports&&CSS.supports("width","max(1px)"));let{mergedClsPrefixRef:t,inlineThemeDisabled:a}=(0,u.ZP)(e),s=(0,c.Z)("Switch","-switch",_,w,e,t),r=(0,d.Z)(e),{mergedSizeRef:f,mergedDisabledRef:g}=r,m=(0,i.iH)(e.defaultValue),b=(0,i.Vh)(e,"value"),y=(0,o.Z)(b,m),x=(0,i.Fl)(()=>y.value===e.checkedValue),k=(0,i.iH)(!1),S=(0,i.iH)(!1),z=(0,i.Fl)(()=>{let{railStyle:t}=e;if(t)return t({focused:S.value,checked:x.value})});function $(t){let{"onUpdate:value":a,onChange:l,onUpdateValue:n}=e,{nTriggerFormInput:o,nTriggerFormChange:i}=r;a&&(0,h.R)(a,t),n&&(0,h.R)(n,t),l&&(0,h.R)(l,t),m.value=t,o(),i()}let Z=(0,i.Fl)(()=>{let e,t,a,{value:o}=f,{self:{opacityDisabled:i,railColor:r,railColorActive:c,buttonBoxShadow:u,buttonColor:d,boxShadowFocus:p,loadingColor:h,textColor:g,iconColor:m,[(0,v.Tl)("buttonHeight",o)]:b,[(0,v.Tl)("buttonWidth",o)]:w,[(0,v.Tl)("buttonWidthPressed",o)]:y,[(0,v.Tl)("railHeight",o)]:_,[(0,v.Tl)("railWidth",o)]:x,[(0,v.Tl)("railBorderRadius",o)]:k,[(0,v.Tl)("buttonBorderRadius",o)]:S},common:{cubicBezierEaseInOut:z}}=s.value;return l?(e=`calc((${_} - ${b}) / 2)`,t=`max(${_}, ${b})`,a=`max(${x}, calc(${x} + ${b} - ${_}))`):(e=(0,n.BL)(((0,n.fQ)(_)-(0,n.fQ)(b))/2),t=(0,n.BL)(Math.max((0,n.fQ)(_),(0,n.fQ)(b))),a=(0,n.fQ)(_)>(0,n.fQ)(b)?x:(0,n.BL)((0,n.fQ)(x)+(0,n.fQ)(b)-(0,n.fQ)(_))),{"--n-bezier":z,"--n-button-border-radius":S,"--n-button-box-shadow":u,"--n-button-color":d,"--n-button-width":w,"--n-button-width-pressed":y,"--n-button-height":b,"--n-height":t,"--n-offset":e,"--n-opacity-disabled":i,"--n-rail-border-radius":k,"--n-rail-color":r,"--n-rail-color-active":c,"--n-rail-height":_,"--n-rail-width":x,"--n-width":a,"--n-box-shadow-focus":p,"--n-loading-color":h,"--n-text-color":g,"--n-icon-color":m}}),U=a?(0,p.F)("switch",(0,i.Fl)(()=>f.value[0]),Z,e):void 0;return{handleClick:function(){e.loading||g.value||(y.value!==e.checkedValue?$(e.checkedValue):$(e.uncheckedValue))},handleBlur:function(){S.value=!1;let{nTriggerFormBlur:e}=r;e(),k.value=!1},handleFocus:function(){S.value=!0;let{nTriggerFormFocus:e}=r;e()},handleKeyup:function(t){e.loading||g.value||" "===t.key&&(y.value!==e.checkedValue?$(e.checkedValue):$(e.uncheckedValue),k.value=!1)},handleKeydown:function(t){e.loading||g.value||" "===t.key&&(t.preventDefault(),k.value=!0)},mergedRailStyle:z,pressed:k,mergedClsPrefix:t,mergedValue:y,checked:x,mergedDisabled:g,cssVars:a?void 0:Z,themeClass:null==U?void 0:U.themeClass,onRender:null==U?void 0:U.onRender}},render(){let{mergedClsPrefix:e,mergedDisabled:t,checked:a,mergedRailStyle:l,onRender:n,$slots:o}=this;null==n||n();let{checked:c,unchecked:u,icon:d,"checked-icon":p,"unchecked-icon":h}=o,v=!((0,f.aD)(d)&&(0,f.aD)(p)&&(0,f.aD)(h));return(0,i.h)("div",{role:"switch","aria-checked":a,class:[`${e}-switch`,this.themeClass,v&&`${e}-switch--icon`,a&&`${e}-switch--active`,t&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},(0,i.h)("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:l},(0,f.K9)(c,t=>(0,f.K9)(u,a=>t||a?(0,i.h)("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},(0,i.h)("div",{class:`${e}-switch__rail-placeholder`},(0,i.h)("div",{class:`${e}-switch__button-placeholder`}),t),(0,i.h)("div",{class:`${e}-switch__rail-placeholder`},(0,i.h)("div",{class:`${e}-switch__button-placeholder`}),a)):null)),(0,i.h)("div",{class:`${e}-switch__button`},(0,f.K9)(d,t=>(0,f.K9)(p,a=>(0,f.K9)(h,l=>(0,i.h)(s.Z,null,{default:()=>this.loading?(0,i.h)(r.Z,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(a||t)?(0,i.h)("div",{class:`${e}-switch__button-icon`,key:a?"checked-icon":"icon"},a||t):!this.checked&&(l||t)?(0,i.h)("div",{class:`${e}-switch__button-icon`,key:l?"unchecked-icon":"icon"},l||t):null})))),(0,f.K9)(c,t=>t&&(0,i.h)("div",{key:"checked",class:`${e}-switch__checked`},t)),(0,f.K9)(u,t=>t&&(0,i.h)("div",{key:"unchecked",class:`${e}-switch__unchecked`},t)))))}})},84075:function(e,t,a){a.d(t,{WH:()=>s,hI:()=>i,iE:()=>d,mD:()=>u,sS:()=>c,uz:()=>v,vi:()=>p,yG:()=>h,yL:()=>r});var l=a(76882),n=a(34541);let{t:o}=l.Z.global,i=e=>n.e.get("/contact/group/list",{params:e}),s=()=>n.e.get("/contact/group/all"),r=e=>n.e.get("/contact/group/info",{params:e}),c=e=>n.e.post("/contact/group/create",e,{fetchOptions:{loading:o("contacts.group.loading.createGroup"),successMessage:!0}}),u=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.updateGroup"),successMessage:!0}}),d=e=>n.e.post("/contact/group/delete",e,{fetchOptions:{loading:o("contacts.group.loading.deleteGroup"),successMessage:!0}}),p=e=>n.e.post("/contact/group/contact_count",e),h=e=>n.e.post("/contact/group/export",e,{fetchOptions:{loading:o("contacts.group.loading.exportGroup"),successMessage:!0}}),v=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.saveSettings"),successMessage:!0}})},80947:function(e,t,a){a.d(t,{N:()=>i});var l=a(22895),n=a(68271),o=a(58786);let i=e=>{let{params:t,fetchFn:a,useParams:i,loading:s=!0,immediate:r=!0,rowKey:c=e=>e.id}=e,u=(0,o.iH)(s),d=(0,o.iH)([]),p=(0,o.iH)(0),h=(0,o.iH)(t),v=(0,o.iH)([]),f=()=>i?i(h.value):h.value,g=(0,l.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(h.value.page=1),u.value=!0;try{let e=f(),t=await a(e);(0,n.Kn)(t)&&(d.value=(0,n.kJ)(t.list)?t.list:[],p.value=(0,n.hj)(t.total)?t.total:0)}finally{v.value=[],u.value=!1}},300),m=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g(e)},b=e=>{h.value.page=e},w=e=>{h.value.page_size=e};return(0,o.bv)(()=>{r&&m()}),{tableData:d,tableTotal:p,tableKeys:v,tableParams:h,fetchTable:m,resetTable:()=>m(!0),tableProps:(0,o.Fl)(()=>({rowKey:c,data:d.value,loading:u.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),batchProps:(0,o.Fl)(()=>({rowKey:c,data:d.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),pageProps:(0,o.Fl)(()=>({page:h.value.page,pageSize:h.value.page_size,itemCount:p.value,onUpdatePage:b,onUpdatePageSize:w}))}}},51169:function(e,t,a){a.d(t,{d:()=>i});var l=a(58786),n=a(49247);let o=Symbol("MODAL_INJECT"),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:i,onConfirm:s}=e,r=(0,l.qj)({});return a?[(0,l.aZ)({setup(n,i){let{attrs:s,slots:c}=i;return(0,l.JJ)(o,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(r,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...n,...s},c)}}),r]:[(0,l.aZ)({setup(t,a){let{attrs:c,slots:u}=a,d=(0,l.f3)(o),p=(0,l.iH)(!1);return r.open=()=>{var t;p.value=!0,null==(t=e.onChangeState)||t.call(e,p.value)},r.close=()=>{p.value=!1},r.setState=t=>{var a;null==d||d.setState(t),null==(a=e.onChangeState)||a.call(e,p.value)},r.getState=()=>(null==d?void 0:d.state)??{},null==d||d.extendApi(r),()=>(0,l.Wm)(n.Z,(0,l.dG)({show:p.value},t,c,{onCancel:i,onConfirm:s,"onUpdate:show":e=>{p.value=e??!1}}),u)}}),r]}},86559:function(e,t,a){a.d(t,{Z:()=>o});var l=a(73084),n=a(58786);let o=(0,n.aZ)({__name:"index",props:(0,n.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:o}=t,i=(0,n.iH)(null),s=(0,n.tT)(e,"value"),r=()=>{o("search",s.value)};return a({focus:()=>{var e;null==(e=i.value)||e.focus()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)({ref_key:"inputRef",ref:i,value:s.value,"onUpdate:value":t[0]||(t[0]=e=>s.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,n.D2)(r,["enter"])}),(0,n.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:r},t[1]||(t[1]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:r},t[2]||(t[2]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},39244:function(e,t,a){a.d(t,{Z:()=>o});var l=a(93953),n=a(58786);let o=(0,n.aZ)({__name:"index",setup(e){let t=!!(0,n.Rr)().toolsLeft,a=!!(0,n.Rr)().toolsRight,o=!!(0,n.Rr)().pageLeft||!!(0,n.Rr)().pageRight;return(e,i)=>{let s=l.Z;return(0,n.wg)(),(0,n.iD)("div",null,[t||a?((0,n.wg)(),(0,n.j4)(s,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n.Wm)(s,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsLeft")]),_:3}),(0,n.Wm)(s,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"table"),(0,n.SU)(o)?((0,n.wg)(),(0,n.j4)(s,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n._)("div",null,[(0,n.WI)(e.$slots,"pageLeft")]),(0,n.Wm)(s,null,{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"modal")])}}})},46244:function(e,t,a){a.d(t,{Z:()=>o});var l=a(98048),n=a(58786);let o=(0,n.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:a}=t,o=(0,n.iH)(null);return a({validate:()=>{var e;return null==(e=o.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=o.value)?void 0:e.restoreValidation()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)(e.$attrs,{ref_key:"formRef",ref:o,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},25170:function(e,t,a){a.d(t,{Z:()=>s});var l=a(75459),n=a(58786),o=a(68271);let i={class:"ml-8px text-14px"},s=(0,n.aZ)({__name:"index",props:(0,n.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,n.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,s=(0,n.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),r=(0,n.tT)(e,"page"),c=(0,n.tT)(e,"pageSize"),u=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},d=t=>{var l;r.value=1,null==(l=e.onUpdatePage)||l.call(e,1),p(t),a("refresh")},p=e=>{s.value&&(0,o.qQ)(s.value,String(e))};if(s.value){let e=(0,o.$o)(s.value);e&&(c.value=(0,o.Dx)(e))}return(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)(e.$attrs,{page:r.value,"onUpdate:page":[t[0]||(t[0]=e=>r.value=e),u],"page-size":c.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>c.value=e),d],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,n.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,n.w5)(e=>{let{itemCount:t}=e;return[(0,n._)("span",i," Total "+(0,n.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},58689:function(e,t,a){a.r(t),a.d(t,{default:()=>V});var l=a(39244),n=a(25170),o=a(60424),i=a(86559),s=a(29875),r=a(58786),c=a(93953),u=a(15496),d=a(68271),p=a(80947),h=a(51169),v=a(34541);let{t:f}=a(76882).Z.global,g=e=>v.e.get("/abnormal_recipient/list",{params:e}),m=()=>v.e.get("/abnormal_recipient/check_switch"),b=e=>v.e.post("/abnormal_recipient/delete",e,{fetchOptions:{loading:f("contacts.suspend.api.loading.deleting"),successMessage:!0}}),w=()=>v.e.post("/abnormal_recipient/get_scan_log"),y=e=>v.e.post("/abnormal_recipient/check_group",e,{fetchOptions:{loading:f("contacts.suspend.api.loading.scanning"),successMessage:!0}}),_=()=>v.e.post("/abnormal_recipient/clear_abnormal",{},{fetchOptions:{loading:f("contacts.suspend.api.loading.clearing"),successMessage:!0}}),x=e=>v.e.post("/abnormal_recipient/set_check_switch",e,{fetchOptions:{loading:f("contacts.suspend.api.loading.setting"),successMessage:!0}});var k=a(46244),S=a(16715),z=a(2352),$=a(6455),Z=a(8490),U=a(84075),W=a(52495);let C={class:"pt-12px"},B={class:"h-32px flex items-center"},R={class:"h-32px flex items-center"},j={class:"h-32px flex items-center"},E=(0,r.aZ)({__name:"Scan",setup(e){let{t}=(0,W.QT)(),a=(0,r.AE)("formRef"),l=(0,r.qj)({group_id:null,oper:1}),n={group_id:{trigger:"change",validator:()=>!!l.group_id||Error(t("contacts.suspend.scan.form.groupRequired"))}},o=(0,r.iH)([]),i=async()=>{let e=await (0,U.WH)();(0,d.Kn)(e)&&(o.value=e.list.map(e=>({label:e.name,value:e.id})))},[s,c]=(0,h.d)({onChangeState:e=>{e?i():(l.group_id=null,l.oper=1)},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await y({group_id:l.group_id||0,oper:l.oper}),setTimeout(()=>{let{showLogs:e}=c.getState();e()},1500)}});return(e,t)=>{let i=Z.Z,c=$.ZP,u=z.Z,d=S.Z,p=k.Z;return(0,r.wg)(),(0,r.j4)((0,r.SU)(s),{title:e.$t("contacts.suspend.scan.title"),width:"480","confirm-text":"Scan"},{default:(0,r.w5)(()=>[(0,r._)("div",C,[(0,r.Wm)(p,{ref_key:"formRef",ref:a,form:(0,r.SU)(l),rules:n},{default:(0,r.w5)(()=>[(0,r.Wm)(c,{label:"Group",path:"group_id"},{default:(0,r.w5)(()=>[(0,r.Wm)(i,{value:(0,r.SU)(l).group_id,"onUpdate:value":t[0]||(t[0]=e=>(0,r.SU)(l).group_id=e),options:(0,r.SU)(o)},null,8,["value","options"])]),_:1}),(0,r.Wm)(c,{label:"Method"},{default:(0,r.w5)(()=>[(0,r.Wm)(d,{value:(0,r.SU)(l).oper,"onUpdate:value":t[1]||(t[1]=e=>(0,r.SU)(l).oper=e)},{default:(0,r.w5)(()=>[(0,r._)("div",B,[(0,r.Wm)(u,{value:1},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("contacts.suspend.scan.methods.noOperation")),1)]),_:1})]),(0,r._)("div",R,[(0,r.Wm)(u,{value:2},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("contacts.suspend.scan.methods.addToExceptionTable")),1)]),_:1})]),(0,r._)("div",j,[(0,r.Wm)(u,{value:3},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("contacts.suspend.scan.methods.deleteFromGroup")),1)]),_:1})])]),_:1},8,["value"])]),_:1})]),_:1},8,["form"])])]),_:1},8,["title"])}}});var F=a(60579),T=a(72290);let M={class:"pt-12px mb-8px"},P=(0,r.aZ)({__name:"ScanLogs",setup(e){let{t}=(0,W.QT)(),a=(0,r.iH)(!1),l=(0,r.iH)(t("contacts.suspend.scanLogs.none")),n=null,o=(0,r.iH)(!1),i=(0,r.iH)(0),s=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e&&(a.value=!0);let t=await w();(0,d.HD)(t)?(l.value=t,i.value=0,l.value.includes("Check finished")||l.value.includes("扫描完成")?v():o.value&&p()):c()}finally{e&&(a.value=!1)}},c=()=>{i.value++,i.value>=3?v():o.value&&p()},p=()=>{o.value&&(null!==n&&clearTimeout(n),n=window.setTimeout(()=>{s(!1)},1e3))},v=()=>{null!==n&&(clearTimeout(n),n=null),o.value=!1},[f]=(0,h.d)({onChangeState:e=>{e?s(!0):(l.value=t("contacts.suspend.scanLogs.none"),v())}});return(e,t)=>{let n=u.ZP,o=T.Z,i=F.Z;return(0,r.wg)(),(0,r.j4)((0,r.SU)(f),{title:e.$t("contacts.suspend.scanLogs.title"),width:"820",footer:!1},{default:(0,r.w5)(()=>[(0,r._)("div",M,[(0,r.Wm)(n,{type:"primary",onClick:t[0]||(t[0]=e=>s(!0))},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),(0,r.Wm)(i,{show:(0,r.SU)(a)},{default:(0,r.w5)(()=>[(0,r.Wm)(o,{height:"480px",code:(0,r.SU)(l)},null,8,["code"])]),_:1},8,["show"])]),_:1},8,["title"])}}}),H={class:"ml-8px"},O={class:"mr-12px"},V=(0,r.aZ)({__name:"index",setup(e){let{t}=(0,W.QT)(),a=(0,r.iH)(!1);(async()=>{let e=await m();(0,d.hj)(e)&&(a.value=1===e)})();let v=async e=>{await x({oper:+!!e})},[f,w]=(0,h.d)({component:E,state:{showLogs:()=>{S.open()}}}),y=()=>{w.open()},[k,S]=(0,h.d)({component:P}),z=()=>{S.open()},$=()=>{(0,d.iG)({title:t("contacts.suspend.confirm.clear.title"),content:t("contacts.suspend.confirm.clear.content"),onConfirm:async()=>{await _(),B()}})},{tableParams:Z,tableProps:U,pageProps:C,fetchTable:B,resetTable:R}=(0,p.N)({params:{page:1,page_size:10,status:1,keyword:""},fetchFn:g}),j=(0,r.iH)([{key:"recipient",title:t("contacts.suspend.columns.email")},{key:"description",title:t("contacts.suspend.columns.description")},{key:"state",title:t("contacts.suspend.columns.status"),render:e=>e.state||e.count>=3?t("contacts.suspend.status.invalid"):t("contacts.suspend.status.checking")},{key:"create_time",title:t("contacts.suspend.columns.addTime"),render:e=>(0,d.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:100,render:e=>{let a;return(0,r.Wm)(c.Z,{inline:!0},{default:()=>{var l;return[(0,r.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{F(e)}},"function"!=typeof(l=a=t("common.actions.delete"))&&("[object Object]"!==Object.prototype.toString.call(l)||(0,r.lA)(l))?{default:()=>[a]}:a)]}})}}]),F=e=>{(0,d.iG)({title:t("contacts.suspend.confirm.delete.title"),content:t("contacts.suspend.confirm.delete.content",{email:e.recipient}),onConfirm:async()=>{await b({id:e.id}),B()}})};return(e,t)=>{let c=s.Z,d=i.Z,p=o.Z,h=n.Z,g=l.Z;return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(g,null,{toolsLeft:(0,r.w5)(()=>[(0,r.Wm)((0,r.SU)(u.ZP),{type:"primary",onClick:y},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("contacts.suspend.buttons.scanInvalidDomains")),1)]),_:1}),(0,r.Wm)((0,r.SU)(u.ZP),{onClick:z},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("contacts.suspend.buttons.scanLogs")),1)]),_:1}),(0,r.Wm)((0,r.SU)(u.ZP),{onClick:$},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("common.actions.clear")),1)]),_:1}),(0,r._)("div",H,[(0,r._)("span",O,(0,r.zw)(e.$t("contacts.suspend.buttons.autoBlockFailedEmails")),1),(0,r.Wm)(c,{value:(0,r.SU)(a),"onUpdate:value":[t[0]||(t[0]=e=>(0,r.dq)(a)?a.value=e:null),v]},null,8,["value"])])]),toolsRight:(0,r.w5)(()=>[(0,r.Wm)(d,{value:(0,r.SU)(Z).keyword,"onUpdate:value":t[1]||(t[1]=e=>(0,r.SU)(Z).keyword=e),width:240,placeholder:e.$t("contacts.suspend.search.emailPlaceholder"),onSearch:(0,r.SU)(R)},null,8,["value","placeholder","onSearch"])]),table:(0,r.w5)(()=>[(0,r.Wm)(p,(0,r.dG)((0,r.SU)(U),{columns:(0,r.SU)(j)}),null,16,["columns"])]),pageRight:(0,r.w5)(()=>[(0,r.Wm)(h,(0,r.dG)((0,r.SU)(C),{onRefresh:(0,r.SU)(B)}),null,16,["onRefresh"])]),modal:(0,r.w5)(()=>[(0,r.Wm)((0,r.SU)(f)),(0,r.Wm)((0,r.SU)(k))]),_:1})])}}})}}]);