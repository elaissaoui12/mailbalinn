"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["8128"],{51169:function(e,t,a){a.d(t,{d:()=>s});var l=a(58786),o=a(49247);let r=Symbol("MODAL_INJECT"),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:s,onConfirm:d}=e,n=(0,l.qj)({});return a?[(0,l.aZ)({setup(o,s){let{attrs:d,slots:i}=s;return(0,l.JJ)(r,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(n,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...o,...d},i)}}),n]:[(0,l.aZ)({setup(t,a){let{attrs:i,slots:u}=a,c=(0,l.f3)(r),m=(0,l.iH)(!1);return n.open=()=>{var t;m.value=!0,null==(t=e.onChangeState)||t.call(e,m.value)},n.close=()=>{m.value=!1},n.setState=t=>{var a;null==c||c.setState(t),null==(a=e.onChangeState)||a.call(e,m.value)},n.getState=()=>(null==c?void 0:c.state)??{},null==c||c.extendApi(n),()=>(0,l.Wm)(o.Z,(0,l.dG)({show:m.value},t,i,{onCancel:s,onConfirm:d,"onUpdate:show":e=>{m.value=e??!1}}),u)}}),n]}},46244:function(e,t,a){a.d(t,{Z:()=>r});var l=a(98048),o=a(58786);let r=(0,o.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:a}=t,r=(0,o.iH)(null);return a({validate:()=>{var e;return null==(e=r.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=r.value)?void 0:e.restoreValidation()}}),(e,t)=>{let a=l.Z;return(0,o.wg)(),(0,o.j4)(a,(0,o.dG)(e.$attrs,{ref_key:"formRef",ref:r,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,o.w5)(()=>[(0,o.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},92004:function(e,t,a){a.r(t),a.d(t,{default:()=>W});var l=a(39244),o=a(25170),r=a(60424),s=a(66760),d=a(58786),n=a(29875),i=a(93953),u=a(15496),c=a(68271),m=a(67512),f=a(51169),g=a(34541);let{t:p}=a(76882).Z.global,w=e=>g.e.get("/mail_forward/list",{params:e}),v=e=>g.e.post("/mail_forward/add",e,{fetchOptions:{loading:p("settings.forward.loading.adding"),successMessage:!0}}),U=e=>g.e.post("/mail_forward/edit",e,{fetchOptions:{loading:p("settings.forward.loading.editing"),successMessage:!0}}),S=e=>g.e.post("/mail_forward/delete",e,{fetchOptions:{loading:p("settings.forward.loading.deleting"),successMessage:!0}});var h=a(46244),_=a(73084),b=a(6455),k=a(52495);let y=(0,d.aZ)({__name:"ForwardForm",setup(e){let{t}=(0,k.QT)(),a=(0,d.iH)(!1),l=(0,d.Fl)(()=>a.value?t("settings.forward.edit"):t("settings.forward.add")),o=(0,d.AE)("formRef"),r=(0,d.qj)({active:1,address:"",domain:"",goto:""}),s={},[i,u]=(0,f.d)({onChangeState:e=>{if(e){let e=u.getState(),{row:t}=e;a.value=e.isEdit,t&&(r.address=t.address,r.goto=t.goto,r.active=t.active)}else r.address="",r.goto="",r.domain="",r.active=1},onConfirm:async()=>{var e;await (null==(e=o.value)?void 0:e.validate()),a.value?await U((0,d.IU)(r)):await v((0,d.IU)(r)),u.getState().refresh()}});return(e,u)=>{let c=n.Z,m=b.ZP,f=_.Z,g=h.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(i),{title:(0,d.SU)(l),width:"480"},{default:(0,d.w5)(()=>[(0,d.Wm)(g,{ref_key:"formRef",ref:o,class:"pt-8px",model:(0,d.SU)(r),rules:s},{default:(0,d.w5)(()=>[(0,d.Wm)(m,{label:(0,d.SU)(t)("settings.forward.form.status")},{default:(0,d.w5)(()=>[(0,d.Wm)(c,{value:(0,d.SU)(r).active,"onUpdate:value":u[0]||(u[0]=e=>(0,d.SU)(r).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(m,{label:(0,d.SU)(t)("settings.forward.form.forwardedUsers"),path:"address"},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(r).address,"onUpdate:value":u[1]||(u[1]=e=>(0,d.SU)(r).address=e),disabled:(0,d.SU)(a),placeholder:(0,d.SU)(t)("settings.forward.form.forwardedUsersPlaceholder")},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),(0,d.kq)("",!0),(0,d.Wm)(m,{label:(0,d.SU)(t)("settings.forward.form.receivingUser"),path:"goto"},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(r).goto,"onUpdate:value":u[3]||(u[3]=e=>(0,d.SU)(r).goto=e),type:"textarea",row:4,placeholder:(0,d.SU)(t)("settings.forward.form.receivingUserPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});function Z(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,d.lA)(e)}let W=(0,d.aZ)({__name:"index",setup(e){let{t}=(0,k.QT)(),{tableParams:a,tableList:g,loading:p,tableTotal:v,getTableData:h}=(0,m.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:"",keyword:""},fetchFn:w}),_=(0,d.iH)([{key:"address",title:t("settings.forward.columns.address"),ellipsis:{tooltip:!0}},{key:"goto",title:t("settings.forward.columns.goto"),ellipsis:{tooltip:!0}},{key:"create_time",title:t("settings.forward.columns.created"),render:e=>(0,c.mr)(e.create_time)},{key:"update_time",title:t("settings.forward.columns.modified"),render:e=>(0,c.mr)(e.update_time)},{key:"active",title:t("settings.forward.columns.status"),render:e=>(0,d.Wm)(n.Z,{size:"small",value:e.active,"checked-value":1,"unchecked-value":0,onUpdateValue:t=>{P(t,e)}},null)},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let a,l;return(0,d.Wm)(i.Z,{inline:!0},{default:()=>[(0,d.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{x(e)}},Z(a=t("common.actions.edit"))?a:{default:()=>[a]}),(0,d.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{z(e)}},Z(l=t("common.actions.delete"))?l:{default:()=>[l]})]})}}]),[b,W]=(0,f.d)({component:y,state:{isEdit:!1,refresh:h}}),C=()=>{W.setState({isEdit:!1,row:null}),W.open()},j=()=>{h(!0)},x=e=>{W.setState({isEdit:!0,row:e}),W.open()},P=async(e,t)=>{await U({address:t.address,goto:t.goto,active:e}),h()},z=e=>{(0,c.iG)({title:t("settings.forward.delete.title"),content:t("settings.forward.delete.content",{address:e.address}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await S({address:e.address}),h()}})};return(e,t)=>{let n=s.Z,i=r.Z,c=o.Z,m=l.Z;return(0,d.wg)(),(0,d.j4)(m,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(u.ZP),{type:"primary",onClick:C},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("settings.forward.add")),1)]),_:1})]),toolsRight:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(u.ZP),{onClick:j},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),table:(0,d.w5)(()=>[(0,d.Wm)(i,{loading:(0,d.SU)(p),columns:(0,d.SU)(_),data:(0,d.SU)(g)},{empty:(0,d.w5)(()=>[(0,d.Wm)(n)]),_:1},8,["loading","columns","data"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(c,{page:(0,d.SU)(a).page,"onUpdate:page":t[0]||(t[0]=e=>(0,d.SU)(a).page=e),"page-size":(0,d.SU)(a).page_size,"onUpdate:pageSize":t[1]||(t[1]=e=>(0,d.SU)(a).page_size=e),"item-count":(0,d.SU)(v),onRefresh:(0,d.SU)(h)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(b))]),_:1})}}})}}]);