"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2768"],{84075:function(e,t,l){l.d(t,{WH:()=>u,hI:()=>n,iE:()=>m,mD:()=>r,sS:()=>o,uz:()=>_,vi:()=>d,yG:()=>p,yL:()=>c});var a=l(76882),s=l(34541);let{t:i}=a.Z.global,n=e=>s.e.get("/contact/group/list",{params:e}),u=()=>s.e.get("/contact/group/all"),c=e=>s.e.get("/contact/group/info",{params:e}),o=e=>s.e.post("/contact/group/create",e,{fetchOptions:{loading:i("contacts.group.loading.createGroup"),successMessage:!0}}),r=e=>s.e.post("/contact/group/update",e,{fetchOptions:{loading:i("contacts.group.loading.updateGroup"),successMessage:!0}}),m=e=>s.e.post("/contact/group/delete",e,{fetchOptions:{loading:i("contacts.group.loading.deleteGroup"),successMessage:!0}}),d=e=>s.e.post("/contact/group/contact_count",e),p=e=>s.e.post("/contact/group/export",e,{fetchOptions:{loading:i("contacts.group.loading.exportGroup"),successMessage:!0}}),_=e=>s.e.post("/contact/group/update",e,{fetchOptions:{loading:i("contacts.group.loading.saveSettings"),successMessage:!0}})},77984:function(e,t,l){l.d(t,{F:()=>n});var a=l(68271),s=l(94821),i=l(76882);let n=()=>{let{t:e}=i.Z.global,{copy:t,isSupported:l,copied:n}=(0,s.VPI)({legacy:!0});return{copied:n,copyText:async function(s){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!s)return void a.v0.error(e("common.useCopy.noText"));l.value?(await t(s),i&&a.v0.success(e("common.useCopy.success"))):a.v0.error(e("common.useCopy.failed"))}}}},88253:function(e,t,l){l.d(t,{Z:()=>u});var a=l(60579),s=l(58786),i=l(6768);let n=(0,s.aZ)({__name:"index",props:(0,s.Vf)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:(0,s.Vf)(["save"],["update:value"]),setup(e,t){let{expose:l,emit:n}=t,u=(0,s.tT)(e,"value"),c=(0,s.iH)(null),o=null,r=(0,s.iH)(!1);i.Z.config({paths:{vs:`${location.origin}/static/plugin/monaco`}});let m=async()=>{if(c.value&&!o)try{r.value=!0;let t=await i.Z.init();(o=t.editor.create(c.value,{value:u.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{u.value=(null==o?void 0:o.getValue())||""}),o.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,function(){n("save")})}finally{r.value=!1}},d=()=>{o&&(o.dispose(),o=null)};return(0,s.YP)(()=>u.value,e=>{o&&e!==o.getValue()&&o.setValue(e)}),(0,s.bv)(()=>{m()}),(0,s.Jd)(()=>{d()}),l({getEditor:()=>o}),(e,t)=>{let l=a.Z;return(0,s.wg)(),(0,s.j4)(l,{class:"h-full",show:(0,s.SU)(r)},{default:(0,s.w5)(()=>[(0,s._)("div",{ref_key:"containerRef",ref:c,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}}),u=(0,l(41748).default)(n,[["__scopeId","data-v-72ffe419"]])},53472:function(e,t,l){l.d(t,{Z:()=>i});var a=l(58786);let s=["height","srcdoc"],i=(0,a.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(t,l)=>((0,a.wg)(),(0,a.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,s))})},67068:function(e,t,l){l.r(t),l.d(t,{default:()=>eo});var a=l(10320),s=l(43751),i=l(66236),n=l(70958),u=l(58786),c=l(68271),o=l(84075);let r=Symbol("group-settings");var m=l(15496),d=l(57869),p=l(77984);let _={class:"flex items-center gap-16px w-full"},v=(0,u.aZ)({__name:"Code",props:{value:{type:String,default:""}},setup(e){let{copyText:t}=(0,p.F)(),l=async()=>{await t(e.value)};return(t,a)=>{let s=d.ZP,i=m.ZP;return(0,u.wg)(),(0,u.iD)("div",_,[(0,u.Wm)(s,{class:"flex-1"},{default:(0,u.w5)(()=>[(0,u._)("pre",null,(0,u.zw)(e.value||"--"),1)]),_:1}),(0,u.Wm)(i,{onClick:l},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(t.$t("common.actions.copy")),1)]),_:1})])}}});var b=l(41748);let g=(0,b.default)(v,[["__scopeId","data-v-73f6a82a"]]),f={class:"subscribe-form-container"},w={class:"section"},S={class:"section-title"},h={class:"section-description"},U={class:"section"},y={class:"section-title"},W={class:"section-description"},k=(0,u.aZ)({__name:"SubscribeForm",setup(e){let t=(0,u.iH)(""),l=(0,u.iH)(""),{groupInfo:a}=(0,u.f3)(r);return(0,u.m0)(()=>{a.value&&(t.value=a.value.subscribe_link,l.value=a.value.subscribe_form)}),(e,a)=>((0,u.wg)(),(0,u.iD)("div",f,[(0,u._)("div",w,[(0,u._)("h3",S,(0,u.zw)(e.$t("contacts.settings.subscribeForm.separateSubscriptionPage.title")),1),(0,u._)("p",h,(0,u.zw)(e.$t("contacts.settings.subscribeForm.separateSubscriptionPage.description")),1),(0,u.Wm)(g,{value:(0,u.SU)(t)},null,8,["value"])]),(0,u._)("div",U,[(0,u._)("h3",y,(0,u.zw)(e.$t("contacts.settings.subscribeForm.embeddableForm.title")),1),(0,u._)("p",W,(0,u.zw)(e.$t("contacts.settings.subscribeForm.embeddableForm.description")),1),(0,u.Wm)(g,{value:(0,u.SU)(l)},null,8,["value"])])]))}}),x=(0,b.default)(k,[["__scopeId","data-v-8feacfbe"]]);var z=l(46244),Z=l(29875),$=l(53903),j=l(73084),C=l(6455),E=l(8490),T=l(88253),F=l(3179),P=l(51169),D=l(65302);let H={class:"flex-1"},L={class:"flex justify-end gap-12px mb-8px"},M={class:"h-400px"},O=(0,u.aZ)({__name:"Editor",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let t=(0,u.tT)(e,"value"),l=e=>{let l=new FileReader;l.onload=e=>{var l;t.value=null==(l=e.target)?void 0:l.result},e.file&&l.readAsText(e.file)},[a,s]=(0,P.d)({component:D.Z}),i=()=>{s.setState({html:t.value}),s.open()};return(e,s)=>{let n=F.Z,c=m.ZP,o=T.Z;return(0,u.wg)(),(0,u.iD)("div",H,[(0,u._)("div",L,[(0,u._)("div",null,[(0,u.Wm)(n,{mode:"button","button-type":"primary","button-size":"small",accept:["html"],onChange:l},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("market.template.uploadHtml")),1)]),_:1})]),(0,u.Wm)(c,{type:"primary",ghost:"",onClick:i},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.preview")),1)]),_:1})]),(0,u._)("div",M,[(0,u.Wm)(o,{value:t.value,"onUpdate:value":s[0]||(s[0]=e=>t.value=e),language:"html"},null,8,["value"])]),(0,u.Wm)((0,u.SU)(a))])}}});var I=l(52495);let V={class:"w-200px"},G={class:"w-420px"},q={class:"flex-1"},K={class:"setting-description mb-8px"},R={class:"w-420px"},J={class:"flex-1"},N={class:"setting-description mb-8px"},A={class:"w-420px"},B={class:"flex-1"},Q={class:"setting-description mb-8px"},Y={class:"w-420px"},X={class:"mr-16px"},ee={class:"flex-1"},et={class:"setting-description mb-8px"},el={class:"flex-1"},ea={class:"w-420px"},es=(0,u.aZ)({__name:"SubscribeSettings",setup(e){let{t}=(0,I.QT)(),l=(0,u.iH)("--"),a=(0,u.qj)({group_id:0,double_optin:1,send_welcome_email:1,welcome_subject:"",thank_you_subject:"",welcome_mail_html:"",welcome_mail_drag:"",success_url:"",confirm_subject:"",confirm_mail_html:"",confirm_mail_drag:"",confirm_url:"",already_url:""}),s=[{label:t("contacts.settings.subscribeSettings.listType.options.doubleOptin"),value:1},{label:t("contacts.settings.subscribeSettings.listType.options.singleOptin"),value:0}],{groupInfo:i,getInfo:n}=(0,u.f3)(r),c=async()=>{await (0,o.uz)((0,u.IU)(a)),n()};return(0,u.m0)(()=>{i.value&&(a.group_id=i.value.id,a.double_optin=i.value.double_optin,a.welcome_subject=i.value.welcome_subject,a.send_welcome_email=i.value.send_welcome_email,a.welcome_mail_html=i.value.welcome_mail_html,a.welcome_mail_drag=i.value.welcome_mail_drag,a.success_url=i.value.success_url,a.confirm_subject=i.value.confirm_subject,a.confirm_mail_html=i.value.confirm_mail_html,a.confirm_mail_drag=i.value.confirm_mail_drag,a.confirm_url=i.value.confirm_url,a.already_url=i.value.already_url,l.value=i.value.sender)}),(e,t)=>{let i=E.Z,n=C.ZP,o=j.Z,r=$.ZP,d=Z.Z,p=m.ZP,_=z.Z;return(0,u.wg)(),(0,u.j4)(_,{class:"subscribe-settings"},{default:(0,u.w5)(()=>[(0,u.Wm)(n,{label:e.$t("contacts.settings.subscribeSettings.listType.label")},{default:(0,u.w5)(()=>[(0,u._)("div",V,[(0,u.Wm)(i,{value:(0,u.SU)(a).double_optin,"onUpdate:value":t[0]||(t[0]=e=>(0,u.SU)(a).double_optin=e),options:s,placeholder:e.$t("contacts.settings.subscribeSettings.listType.placeholder")},null,8,["value","placeholder"])])]),_:1},8,["label"]),1===(0,u.SU)(a).double_optin?((0,u.wg)(),(0,u.j4)(n,{key:0,label:e.$t("contacts.settings.subscribeSettings.confirmEmail.subject")},{default:(0,u.w5)(()=>[(0,u._)("div",G,[(0,u.Wm)(o,{value:(0,u.SU)(a).confirm_subject,"onUpdate:value":t[1]||(t[1]=e=>(0,u.SU)(a).confirm_subject=e)},null,8,["value"])])]),_:1},8,["label"])):(0,u.kq)("",!0),1===(0,u.SU)(a).double_optin?((0,u.wg)(),(0,u.j4)(n,{key:1,label:e.$t("contacts.settings.subscribeSettings.confirmEmail.redirectLink")},{default:(0,u.w5)(()=>[(0,u._)("div",q,[(0,u._)("div",K,(0,u.zw)(e.$t("contacts.settings.subscribeSettings.confirmEmail.redirectDescription")),1),(0,u._)("div",R,[(0,u.Wm)(o,{value:(0,u.SU)(a).confirm_url,"onUpdate:value":t[2]||(t[2]=e=>(0,u.SU)(a).confirm_url=e)},null,8,["value"])])])]),_:1},8,["label"])):(0,u.kq)("",!0),1===(0,u.SU)(a).double_optin?((0,u.wg)(),(0,u.j4)(n,{key:2,label:e.$t("contacts.settings.subscribeSettings.confirmEmail.emailContent")},{default:(0,u.w5)(()=>[(0,u._)("div",J,[(0,u._)("div",N,[(0,u._)("p",null,[(0,u._)("span",null,(0,u.zw)(e.$t("contacts.settings.subscribeSettings.confirmEmail.emailTip1")),1),(0,u.Wm)(r,{size:"small"},{default:(0,u.w5)(()=>t[9]||(t[9]=[(0,u.Uk)((0,u.zw)("{{ ConfirmURL . }}"))])),_:1,__:[9]}),(0,u._)("span",null,(0,u.zw)(e.$t("contacts.settings.subscribeSettings.confirmEmail.emailTip2")),1)])]),(0,u.Wm)(O,{value:(0,u.SU)(a).confirm_mail_html,"onUpdate:value":t[3]||(t[3]=e=>(0,u.SU)(a).confirm_mail_html=e)},null,8,["value"])])]),_:1},8,["label"])):(0,u.kq)("",!0),(0,u.Wm)(n,{label:e.$t("contacts.settings.subscribeSettings.welcomeEmail.subject")},{default:(0,u.w5)(()=>[(0,u._)("div",A,[(0,u.Wm)(o,{value:(0,u.SU)(a).welcome_subject,"onUpdate:value":t[4]||(t[4]=e=>(0,u.SU)(a).welcome_subject=e)},null,8,["value"])])]),_:1},8,["label"]),(0,u.Wm)(n,{label:e.$t("contacts.settings.subscribeSettings.welcomeEmail.redirectLink")},{default:(0,u.w5)(()=>[(0,u._)("div",B,[(0,u._)("div",Q,(0,u.zw)(e.$t("contacts.settings.subscribeSettings.welcomeEmail.redirectDescription")),1),(0,u._)("div",Y,[(0,u.Wm)(o,{value:(0,u.SU)(a).success_url,"onUpdate:value":t[5]||(t[5]=e=>(0,u.SU)(a).success_url=e)},null,8,["value"])])])]),_:1},8,["label"]),(0,u.Wm)(n,null,{label:(0,u.w5)(()=>[(0,u._)("span",X,(0,u.zw)(e.$t("contacts.settings.subscribeSettings.welcomeEmail.emailContent")),1),(0,u.Wm)(d,{value:(0,u.SU)(a).send_welcome_email,"onUpdate:value":t[6]||(t[6]=e=>(0,u.SU)(a).send_welcome_email=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),default:(0,u.w5)(()=>[(0,u._)("div",ee,[(0,u._)("div",et,[(0,u._)("p",null,[(0,u.Uk)((0,u.zw)(e.$t("contacts.settings.subscribeSettings.welcomeEmail.sendThroughTip"))+" ",1),(0,u.Wm)(r,{size:"small"},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)((0,u.SU)(l)),1)]),_:1}),(0,u.Uk)(" "+(0,u.zw)(e.$t("contacts.settings.subscribeSettings.welcomeEmail.mailboxTip")),1)]),(0,u._)("p",null,(0,u.zw)(e.$t("contacts.settings.subscribeSettings.welcomeEmail.enabledDescription")),1),(0,u._)("p",null,[(0,u._)("span",null,(0,u.zw)(e.$t("contacts.settings.subscribeSettings.welcomeEmail.templateVariablesTip")),1),(0,u.Wm)(r,{size:"small"},{default:(0,u.w5)(()=>t[10]||(t[10]=[(0,u.Uk)((0,u.zw)("{{ .Subscriber.Email }}"))])),_:1,__:[10]}),t[12]||(t[12]=(0,u._)("span",null,", ",-1)),(0,u.Wm)(r,{size:"small"},{default:(0,u.w5)(()=>t[11]||(t[11]=[(0,u.Uk)((0,u.zw)("{{ .Subscriber.name }}"))])),_:1,__:[11]}),t[13]||(t[13]=(0,u._)("span",null," ...",-1))])]),(0,u.Wm)(O,{value:(0,u.SU)(a).welcome_mail_html,"onUpdate:value":t[7]||(t[7]=e=>(0,u.SU)(a).welcome_mail_html=e)},null,8,["value"])])]),_:1}),(0,u.Wm)(n,{label:e.$t("contacts.settings.subscribeSettings.alreadySubscribed.redirectLink")},{default:(0,u.w5)(()=>[(0,u._)("div",el,[t[14]||(t[14]=(0,u._)("div",{class:"setting-description mb-8px"},null,-1)),(0,u._)("div",ea,[(0,u.Wm)(o,{value:(0,u.SU)(a).already_url,"onUpdate:value":t[8]||(t[8]=e=>(0,u.SU)(a).already_url=e)},null,8,["value"])])])]),_:1},8,["label"]),(0,u.Wm)(n,{"show-label":!1},{default:(0,u.w5)(()=>[(0,u.Wm)(p,{size:"large",type:"primary",onClick:c},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.save")),1)]),_:1})]),_:1})]),_:1})}}}),ei=(0,b.default)(es,[["__scopeId","data-v-20b8cdac"]]);var en=l(65965);let eu={class:"p-24px"},ec={class:"bt-title mb-12px!"},eo=(0,u.aZ)({__name:"index",setup(e){var t;let l=(0,en.yj)(),m=(0,en.tv)(),d=(0,u.Fl)(()=>Number(l.params.id)),p=(0,u.iH)("form"),_=(0,u.iH)(null),v=async()=>{let e=await (0,o.yL)({group_id:d.value});(0,c.Kn)(e)&&(_.value=e)},b=()=>{m.back()};return t={groupInfo:_,getInfo:v},(0,u.JJ)(r,t),v(),(e,t)=>{let l=(0,u.up)("router-link"),c=n.Z,o=i.ZP,r=s.Z,m=a.Z;return(0,u.wg)(),(0,u.iD)("div",eu,[(0,u._)("div",ec,(0,u.zw)(e.$t("layout.menu.contacts")),1),(0,u.Wm)(o,{class:"mb-4px"},{default:(0,u.w5)(()=>[(0,u.Wm)(c,null,{default:(0,u.w5)(()=>[(0,u.Wm)(l,{to:"/contacts/group"},{default:(0,u.w5)(()=>t[1]||(t[1]=[(0,u.Uk)("Group")])),_:1,__:[1]})]),_:1}),(0,u.Wm)(c,{onClick:b},{default:(0,u.w5)(()=>{var e;return[(0,u.Uk)((0,u.zw)((null==(e=(0,u.SU)(_))?void 0:e.name)||"--"),1)]}),_:1}),(0,u.Wm)(c,null,{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("contacts.settings.title")),1)]),_:1})]),_:1}),(0,u.Wm)(m,{value:(0,u.SU)(p),"onUpdate:value":t[0]||(t[0]=e=>(0,u.dq)(p)?p.value=e:null),type:"line"},{default:(0,u.w5)(()=>[(0,u.Wm)(r,{name:"form",tab:e.$t("contacts.settings.tabs.subscribeForm")},{default:(0,u.w5)(()=>[(0,u.Wm)(x)]),_:1},8,["tab"]),(0,u.Wm)(r,{name:"subscribe",tab:e.$t("contacts.settings.tabs.subscribeSettings")},{default:(0,u.w5)(()=>[(0,u.Wm)(ei)]),_:1},8,["tab"])]),_:1},8,["value"])])}}})},65302:function(e,t,l){l.d(t,{Z:()=>n});var a=l(53472),s=l(58786),i=l(51169);let n=(0,s.aZ)({__name:"TemplatePreview",setup(e){let t=(0,s.iH)(""),[l,n]=(0,i.d)({onChangeState:e=>{e&&(t.value=n.getState().html||"")}});return(e,i)=>{let n=a.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(l),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,s.w5)(()=>[(0,s.Wm)(n,{height:580,value:(0,s.SU)(t)},null,8,["value"])]),_:1},8,["title"])}}})}}]);