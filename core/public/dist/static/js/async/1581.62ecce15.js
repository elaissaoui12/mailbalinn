"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["1581"],{82822:function(e,t,a){a.d(t,{Z:()=>o});var l=a(21452),n=a(32398);let o=function(e){return"number"==typeof e||(0,n.Z)(e)&&"[object Number]"==(0,l.Z)(e)}},93953:function(e,t,a){a.d(t,{Z:()=>f});var l=a(65083),n=a(58786),o=a(56946),r=a(54470),i=a(51048),s=a(71309),c=a(60951),u=a(6445),p=a(73238);let d={name:"Flex",self:function(){return p.Z}},m=Object.assign(Object.assign({},o.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,n.aZ)({name:"Flex",props:m,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,r.ZP)(e),c=(0,o.Z)("Flex","-flex",void 0,d,e,t);return{rtlEnabled:(0,i.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,n.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,s.Tl)("gap",t)]:a}}=c.value,{row:n,col:o}=(0,l.yU)(a);return{horizontal:(0,l.fQ)(o),vertical:(0,l.fQ)(n)}})}},render(){let{vertical:e,reverse:t,align:a,inline:l,justify:o,margin:r,wrap:i,mergedClsPrefix:s,rtlEnabled:p}=this,d=(0,c.x)((0,u.z)(this),!1);return d.length?(0,n.h)("div",{role:"none",class:[`${s}-flex`,p&&`${s}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:o,flexWrap:!i||e?"nowrap":"wrap",alignItems:a,gap:`${r.vertical}px ${r.horizontal}px`}},d):null}})},84075:function(e,t,a){a.d(t,{WH:()=>i,hI:()=>r,iE:()=>p,mD:()=>u,sS:()=>c,uz:()=>f,vi:()=>d,yG:()=>m,yL:()=>s});var l=a(76882),n=a(34541);let{t:o}=l.Z.global,r=e=>n.e.get("/contact/group/list",{params:e}),i=()=>n.e.get("/contact/group/all"),s=e=>n.e.get("/contact/group/info",{params:e}),c=e=>n.e.post("/contact/group/create",e,{fetchOptions:{loading:o("contacts.group.loading.createGroup"),successMessage:!0}}),u=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.updateGroup"),successMessage:!0}}),p=e=>n.e.post("/contact/group/delete",e,{fetchOptions:{loading:o("contacts.group.loading.deleteGroup"),successMessage:!0}}),d=e=>n.e.post("/contact/group/contact_count",e),m=e=>n.e.post("/contact/group/export",e,{fetchOptions:{loading:o("contacts.group.loading.exportGroup"),successMessage:!0}}),f=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.saveSettings"),successMessage:!0}})},86559:function(e,t,a){a.d(t,{Z:()=>o});var l=a(73084),n=a(58786);let o=(0,n.aZ)({__name:"index",props:(0,n.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:o}=t,r=(0,n.iH)(null),i=(0,n.tT)(e,"value"),s=()=>{o("search",i.value)};return a({focus:()=>{var e;null==(e=r.value)||e.focus()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)({ref_key:"inputRef",ref:r,value:i.value,"onUpdate:value":t[0]||(t[0]=e=>i.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,n.D2)(s,["enter"])}),(0,n.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[1]||(t[1]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[2]||(t[2]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},8022:function(e,t,a){a.r(t),a.d(t,{default:()=>G});var l=a(39244),n=a(25170),o=a(60424),r=a(66760),i=a(86559),s=a(58786),c=a(15496),u=a(93953),p=a(51169),d=a(67512),m=a(68271),f=a(84075),g=a(46244),v=a(3179),_=a(8490),y=a(6455),h=a(73084),w=a(98003),x=a(52495);let S={class:"pt-12px"},U={class:"flex-1"},b={class:"mt-8px text-desc"},Z={class:"mr-4px"},k=`email,attributes
example1@example.com,"{""age"": ""13"", ""Gender"": ""XXX""}"
example2@example.com,"{""age"": ""45"", ""city"": ""XXX""}"
`,W=(0,s.aZ)({__name:"GroupAdd",setup(e){let{t}=(0,x.QT)(),a=(0,s.AE)("formRef"),l=(0,s.qj)({create_type:2,name:"",description:"",double_optin:0,file_data:"",file_type:""}),n={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},o=[{label:"Single Opt-in",value:0},{label:"Double Opt-in",value:1}],r=e=>{let t=new FileReader;t.onload=t=>{var a;l.file_type=e.name.substring(e.name.lastIndexOf(".")+1),l.file_data=null==(a=t.target)?void 0:a.result},e.file&&t.readAsText(e.file)},i=async()=>{await (0,w.Sv)({file_path:"./template/example_recipients.csv"})},[u,d]=(0,p.d)({onChangeState:e=>{e&&(l.name="")},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await (0,f.sS)((0,s.IU)(l));let t=d.getState();null==t||t.refresh()}});return(e,p)=>{let d=h.Z,m=y.ZP,f=_.Z,w=v.Z,x=c.ZP,W=g.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(u),{title:(0,s.SU)(t)("contacts.group.add.title"),width:"540"},{default:(0,s.w5)(()=>[(0,s._)("div",S,[(0,s.Wm)(W,{ref_key:"formRef",ref:a,model:(0,s.SU)(l),rules:n},{default:(0,s.w5)(()=>[(0,s.Wm)(m,{label:(0,s.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,s.w5)(()=>[(0,s.Wm)(d,{value:(0,s.SU)(l).name,"onUpdate:value":p[0]||(p[0]=e=>(0,s.SU)(l).name=e)},null,8,["value"])]),_:1},8,["label"]),(0,s.Wm)(m,{label:"List Type"},{default:(0,s.w5)(()=>[(0,s.Wm)(f,{value:(0,s.SU)(l).double_optin,"onUpdate:value":p[1]||(p[1]=e=>(0,s.SU)(l).double_optin=e),options:o},null,8,["value"])]),_:1}),(0,s.Wm)(m,{label:(0,s.SU)(t)("contacts.group.form.file"),path:"file_data"},{default:(0,s.w5)(()=>[(0,s._)("div",U,[(0,s.Wm)(w,{"is-upload":!1,accept:["csv"],onChange:r}),(0,s._)("div",b,[(0,s._)("span",Z,(0,s.zw)((0,s.SU)(t)("contacts.group.fileUpload.hint")),1),(0,s.Wm)(x,{text:"",type:"primary",onClick:i},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.download")),1)]),_:1})])])]),_:1},8,["label"]),(0,s.Wm)(m,{label:"Example raw CSV"},{default:(0,s.w5)(()=>[(0,s._)("pre",{class:"csv-example"},(0,s.zw)(k))]),_:1})]),_:1},8,["model"])])]),_:1},8,["title"])}}}),C=(0,a(41748).default)(W,[["__scopeId","data-v-abd80cea"]]),z={class:"pt-12px"},O=(0,s.aZ)({__name:"GroupRename",setup(e){let{t}=(0,x.QT)(),a=(0,s.AE)("formRef"),l=(0,s.qj)({group_id:0,name:""}),n={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},[o,r]=(0,p.d)({onChangeState:e=>{if(e){let{row:e}=r.getState();e&&(l.group_id=e.id,l.name=e.name)}else l.group_id=0,l.name=""},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await (0,f.mD)((0,s.IU)(l));let t=r.getState();null==t||t.refresh()}});return(e,r)=>{let i=h.Z,c=y.ZP,u=g.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(o),{title:(0,s.SU)(t)("contacts.group.rename.title"),width:"400"},{default:(0,s.w5)(()=>[(0,s._)("div",z,[(0,s.Wm)(u,{ref_key:"formRef",ref:a,model:(0,s.SU)(l),rules:n},{default:(0,s.w5)(()=>[(0,s.Wm)(c,{label:(0,s.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,s.w5)(()=>[(0,s.Wm)(i,{value:(0,s.SU)(l).name,"onUpdate:value":r[0]||(r[0]=e=>(0,s.SU)(l).name=e)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}});var R=a(65965);function j(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,s.lA)(e)}let G=(0,s.aZ)({__name:"temp",setup(e){let{t}=(0,x.QT)(),a=(0,R.tv)(),g=(0,s.iH)([]),{tableParams:v,tableList:_,loading:y,tableTotal:h,getTableData:S}=(0,d.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:f.hI}),U=(0,s.iH)([{type:"selection"},{key:"name",title:t("contacts.group.columns.name"),minWidth:120,render:e=>(0,s.Wm)(c.ZP,{text:!0,type:"primary",onClick:()=>{a.push({path:"/contacts/subscribers",state:{group_id:e.id}})}},{default:()=>[e.name]})},{key:"total_count",title:t("contacts.group.columns.subscribers"),minWidth:100,render:e=>e.total_count||0},{key:"double_optin",title:t("contacts.group.columns.type"),minWidth:100,render:e=>1===e.double_optin?t("contacts.group.type.doubleOptin"):t("contacts.group.type.singleOptin")},{key:"create_time",title:t("contacts.group.columns.createdAt"),minWidth:140,render:e=>(0,m.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:180,render:e=>{let a,l,n;return(0,s.Wm)(u.Z,{inline:!0},{default:()=>[(0,s.Wm)(c.ZP,{type:"primary",text:!0,onClick:()=>{W(e)}},j(a=t("common.actions.settings"))?a:{default:()=>[a]}),(0,s.Wm)(c.ZP,{type:"primary",text:!0,onClick:()=>{P(e)}},j(l=t("common.actions.rename"))?l:{default:()=>[l]}),(0,s.Wm)(c.ZP,{type:"error",text:!0,onClick:()=>{A(e)}},j(n=t("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[b,Z]=(0,p.d)({component:C,state:{refresh:S}}),k=()=>{Z.open()},W=e=>{a.push(`/contacts/settings/${e.id}`)},[z,G]=(0,p.d)({component:O,state:{refresh:S}}),P=e=>{G.setState({row:e}),G.open()},A=e=>{(0,m.iG)({title:t("contacts.group.delete.title"),content:t("contacts.group.delete.confirm",{name:e.name}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,f.iE)({group_ids:[e.id]}),S()}})},T=()=>{(0,m.iG)({title:t("contacts.group.export.title"),content:t("contacts.group.export.confirm",{count:g.value.length}),onConfirm:async()=>{let e=await (0,f.yG)({format:"csv",include_unsubscribe:!0,group_ids:g.value,export_type:1});(0,m.Kn)(e)&&(0,w.Sv)({file_path:e.file_url})}})};return(e,a)=>{let u=i.Z,p=r.Z,d=o.Z,m=n.Z,f=l.Z;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(f,null,{toolsLeft:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(c.ZP),{type:"primary",onClick:k},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t)("common.actions.add")),1)]),_:1})]),toolsRight:(0,s.w5)(()=>[(0,s.Wm)(u,{value:(0,s.SU)(v).keyword,"onUpdate:value":a[0]||(a[0]=e=>(0,s.SU)(v).keyword=e),width:280,placeholder:(0,s.SU)(t)("contacts.group.search.namePlaceholder"),onSearch:a[1]||(a[1]=()=>(0,s.SU)(S)(!0))},null,8,["value","placeholder"])]),table:(0,s.w5)(()=>[(0,s.Wm)(d,{"checked-row-keys":(0,s.SU)(g),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>(0,s.dq)(g)?g.value=e:null),"row-key":e=>e.id,loading:(0,s.SU)(y),columns:(0,s.SU)(U),data:(0,s.SU)(_)},{empty:(0,s.w5)(()=>[(0,s.Wm)(p)]),_:1},8,["checked-row-keys","row-key","loading","columns","data"])]),pageLeft:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(c.ZP),{disabled:0===(0,s.SU)(g).length,onClick:T},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.export")),1)]),_:1},8,["disabled"])]),pageRight:(0,s.w5)(()=>[(0,s.Wm)(m,{page:(0,s.SU)(v).page,"onUpdate:page":a[3]||(a[3]=e=>(0,s.SU)(v).page=e),"page-size":(0,s.SU)(v).page_size,"onUpdate:pageSize":a[4]||(a[4]=e=>(0,s.SU)(v).page_size=e),"item-count":(0,s.SU)(h),onRefresh:(0,s.SU)(S)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(b)),(0,s.Wm)((0,s.SU)(z))]),_:1})])}}})}}]);