"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3635"],{42987:function(e,l,a){a.r(l),a.d(l,{default:()=>ed});var t=a(57869),i=a(58786),s=a(60579),u=a(98048),r=a(6455),o=a(79537),p=a(73084),n=a(29875),d=a(15496),c=a(40972),m=a(5057),v=a(34541),_=a(68271);let w={fetchOptions:{loading:"Loading... Please wait.",successMessage:!0}};async function U(e){let{providerList:l,currentProvider:a}=e;try{let t=await v.e.post("/askai/supplier/list");l.value=t,t.length&&(a.value=t[0],await f(a.value.supplierName,e))}catch(e){console.warn(e)}}async function f(e,l){let{modelList:a,configurationLoading:t}=l;try{t.value=!0,a.value=await v.e.post("/askai/supplier/models",{supplierName:e})}catch(e){console.warn(e)}finally{t.value=!1}}async function y(e){let{addProviderFormData:l,addProviderFormDataRef:a,addProviderRef:t}=e;try{var i;if(!await x(e))return!1;await (null==(i=a.value)?void 0:i.validate()),await v.e.post("/askai/supplier/add_supplier",l.value,w),t.value.close(),await U(e)}catch(e){console.warn(e)}}async function g(e){let{currentProvider:l,addModelFormData:a,addModelFormRef:t,addModelRef:i}=e;try{var s;await (null==(s=t.value)?void 0:s.validate()),await v.e.post("/askai/supplier/add_model",{...a.value,supplierName:l.value.supplierName},w),await f(l.value.supplierName,e),i.value.close()}catch(e){console.warn(e)}}async function b(e){let{currentProvider:l,providerList:a}=e;try{let e=await v.e.post("/askai/supplier/get_supplier_config",{supplierName:l.value.supplierName},w),t=a.value.find(e=>e.supplierName==l.value.supplierName);t&&(t.apiKey=e.apiKey,t.baseUrl=e.baseUrl)}catch(e){console.warn(e)}}async function k(e,l){let{currentProvider:a}=l;try{await v.e.post("/askai/supplier/set_supplier_status",{supplierName:a.value.supplierName,status:e},w),a.value.status=e,f(a.value.supplierName,l)}catch(l){a.value.status=!e,console.warn(l)}}async function S(e){let{currentProvider:l}=e;try{await v.e.post("/askai/supplier/testing",{supplierName:l.value.supplierName,baseUrl:l.value.baseUrl,apiKey:l.value.apiKey},w)}catch(e){console.warn(e)}}async function h(e){let{currentProvider:l}=e;try{await v.e.post("/askai/supplier/set_supplier_config",{supplierName:l.value.supplierName,baseUrl:l.value.baseUrl,apiKey:l.value.apiKey},w),k(!0,e)}catch(e){console.warn(e)}}async function N(e,l,a){let{currentProvider:t}=a;try{await v.e.post("/askai/supplier/set_model_status",{supplierName:t.value.supplierName,modelId:e.modelId,status:l},w)}catch(a){e.status=!l,console.warn(a)}}async function W(e){let{currentProvider:l}=e;(0,_.iG)({title:"Notice",content:`Are you sure to remove the provider "${l.value.supplierName}"?`,onConfirm:async()=>{try{await v.e.post("/askai/supplier/remove_supplier",{supplierName:l.value.supplierName},w),await U(e)}catch(e){console.warn(e)}}})}async function x(e){let{addProviderFormData:l}=e;try{return await v.e.post("/askai/supplier/testing",l.value),!0}catch(e){return console.warn(e),!1}}async function M(e,l){(0,_.iG)({title:"Notice",content:`Are you sure to remove the Model "${e.title}"?`,onConfirm:async()=>{try{await v.e.post("/askai/supplier/remove_model",{supplierName:e.supplierName,modelId:e.modelId},w),await f(e.supplierName,l)}catch(e){console.warn(e)}}})}let C={class:"flex justify-end gap-5"},Z=(0,i.aZ)({__name:"AddProvider",setup(e,l){let{expose:a}=l,t=(0,i.f3)("modelStore"),{addProviderFormData:s,addProviderFormDataRef:o}=t,n=(0,i.iH)(!1),c={supplierTitle:[{required:!0,message:"supplierTitle is required",trigger:"blur"}],supplierName:[{required:!0,message:"supplierName is required",trigger:"blur"}],baseUrl:[{required:!0,message:"baseUrl is required",trigger:"blur"}],apiKey:[{required:!0,message:"apiKey is required",trigger:"blur"}]};return a({open:function(){n.value=!0},close:function(){n.value=!1}}),(e,l)=>{let a=p.Z,v=r.ZP,_=u.Z,w=d.ZP,U=m.Z;return(0,i.wg)(),(0,i.j4)(U,{show:(0,i.SU)(n),"onUpdate:show":l[5]||(l[5]=e=>(0,i.dq)(n)?n.value=e:null),preset:"card","close-on-esc":!1,"mask-closable":!1,draggable:"",class:"w-150",title:"Add Provider"},{footer:(0,i.w5)(()=>[(0,i._)("div",C,[(0,i.Wm)(w,null,{default:(0,i.w5)(()=>l[6]||(l[6]=[(0,i.Uk)("Cancel")])),_:1,__:[6]}),(0,i.Wm)(w,{type:"primary",onClick:l[4]||(l[4]=e=>(0,i.SU)(y)((0,i.SU)(t)))},{default:(0,i.w5)(()=>l[7]||(l[7]=[(0,i.Uk)("Confirm")])),_:1,__:[7]})])]),default:(0,i.w5)(()=>[(0,i.Wm)(_,{ref_key:"addProviderFormDataRef",ref:o,model:(0,i.SU)(s),rules:c},{default:(0,i.w5)(()=>[(0,i.Wm)(v,{label:e.$t("settings.aiModel.supplierTitle"),path:"supplierTitle"},{default:(0,i.w5)(()=>[(0,i.Wm)(a,{value:(0,i.SU)(s).supplierTitle,"onUpdate:value":l[0]||(l[0]=e=>(0,i.SU)(s).supplierTitle=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.Wm)(v,{label:e.$t("settings.aiModel.supplierName"),path:"supplierName"},{default:(0,i.w5)(()=>[(0,i.Wm)(a,{value:(0,i.SU)(s).supplierName,"onUpdate:value":l[1]||(l[1]=e=>(0,i.SU)(s).supplierName=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.Wm)(v,{label:"BaseURL",path:"baseUrl"},{default:(0,i.w5)(()=>[(0,i.Wm)(a,{value:(0,i.SU)(s).baseUrl,"onUpdate:value":l[2]||(l[2]=e=>(0,i.SU)(s).baseUrl=e)},null,8,["value"])]),_:1}),(0,i.Wm)(v,{label:"ApiKey",path:"apiKey"},{default:(0,i.w5)(()=>[(0,i.Wm)(a,{value:(0,i.SU)(s).apiKey,"onUpdate:value":l[3]||(l[3]=e=>(0,i.SU)(s).apiKey=e)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}});var K=a(29283),I=a(8490);let $={class:"flex justify-end gap-5"},q=(0,i.aZ)({__name:"AddModel",setup(e,l){let{expose:a}=l,t=(0,i.f3)("modelStore"),{addModelFormData:s,addModelFormRef:o}=t,n=(0,i.iH)(!1),c=[{label:"llm",value:"llm"},{label:"vision",value:"vision"},{label:"tools",value:"tools"},{label:"text-to-image",value:"text-to-image"}],v=(0,i.Fl)(()=>s.value.capability.includes("llm")||s.value.capability.includes("vision")||s.value.capability.includes("tools")?c.map(e=>"text-to-image"===e.value?{...e,disabled:!0}:e):s.value.capability.includes("text-to-image")?c.map(e=>"text-to-image"===e.value?{...e}:{...e,disabled:!0}):c),_={modelId:[{required:!0,message:"modelId is required",trigger:"blur"}],title:[{required:!0,message:"title is required",trigger:"blur"}],capability:[{validator:(e,l)=>!!l.length||Error("capability is required"),trigger:"blur"}],max_tokens:[{validator:(e,l)=>!!l||Error("max_tokens is required"),trigger:"blur"}]};function w(){n.value=!1,s.value.capability=["llm"],s.value.max_tokens=8192,s.value.modelId="",s.value.title=""}return a({open:function(){n.value=!0},close:w}),(e,l)=>{let a=p.Z,c=r.ZP,U=I.Z,f=K.Z,y=u.Z,b=d.ZP,k=m.Z;return(0,i.wg)(),(0,i.j4)(k,{show:(0,i.SU)(n),"onUpdate:show":l[5]||(l[5]=e=>(0,i.dq)(n)?n.value=e:null),preset:"card",draggable:"","close-on-esc":!1,"mask-closable":!1,title:"Add Model",class:"w-100"},{footer:(0,i.w5)(()=>[(0,i._)("div",$,[(0,i.Wm)(b,{onClick:w},{default:(0,i.w5)(()=>l[6]||(l[6]=[(0,i.Uk)("Cancel")])),_:1,__:[6]}),(0,i.Wm)(b,{type:"primary",onClick:l[4]||(l[4]=e=>(0,i.SU)(g)((0,i.SU)(t)))},{default:(0,i.w5)(()=>l[7]||(l[7]=[(0,i.Uk)("Confirm")])),_:1,__:[7]})])]),default:(0,i.w5)(()=>[(0,i.Wm)(y,{ref_key:"addModelFormRef",ref:o,model:(0,i.SU)(s),rules:_},{default:(0,i.w5)(()=>[(0,i.Wm)(c,{label:e.$t("settings.aiModel.modelId"),path:"modelId"},{default:(0,i.w5)(()=>[(0,i.Wm)(a,{value:(0,i.SU)(s).modelId,"onUpdate:value":l[0]||(l[0]=e=>(0,i.SU)(s).modelId=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.Wm)(c,{label:e.$t("settings.aiModel.modelAlias"),path:"title"},{default:(0,i.w5)(()=>[(0,i.Wm)(a,{value:(0,i.SU)(s).title,"onUpdate:value":l[1]||(l[1]=e=>(0,i.SU)(s).title=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.Wm)(c,{label:e.$t("settings.aiModel.modelFeature"),path:"capability"},{default:(0,i.w5)(()=>[(0,i.Wm)(U,{value:(0,i.SU)(s).capability,"onUpdate:value":l[2]||(l[2]=e=>(0,i.SU)(s).capability=e),options:(0,i.SU)(v),multiple:""},null,8,["value","options"])]),_:1},8,["label"]),(0,i.Wm)(c,{label:e.$t("settings.aiModel.contentLength"),path:"max_tokens"},{default:(0,i.w5)(()=>[(0,i.Wm)(f,{value:(0,i.SU)(s).max_tokens,"onUpdate:value":l[3]||(l[3]=e=>(0,i.SU)(s).max_tokens=e),min:1,class:"w-100%"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show"])}}}),H={class:"manager-wrapper"},P={class:"left-provider"},A={class:"provider-list"},z=["onClick"],T={class:"item-icon"},D={key:1,class:"i-ai:big-model w-6.5 h-6.5"},R={class:"tit"},j={class:"add-privider"},F={class:"right-configuration"},E={class:"top-switch"},L={class:"switch-info"},Y={class:"tit"},G={class:"center-api"},J={class:"w-100%"},B={class:"w-100%"},O={class:"text-[var(--color-text-3)] mt-5"},Q={class:"bottom-model-list"},V={class:"header-tit"},X={class:"tit"},ee={class:"sub-tit"},el={class:"tit"},ea={class:"model-item"},et={class:"model-name"},ei={class:"operation"},es=["onClick"],eu=(0,i.aZ)({__name:"ModelManager",setup(e){let l=(0,i.f3)("modelStore"),{providerList:a,modelList:t,currentProvider:m,configurationLoading:v,addProviderRef:_,addModelRef:w}=l;function y(){_.value.open()}function g(){w.value.open()}return U(l),(e,U)=>{let x=c.Z,C=d.ZP,K=n.Z,I=p.Z,$=o.Z,eu=r.ZP,er=u.Z,eo=s.Z;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",H,[(0,i._)("div",P,[(0,i._)("div",A,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(a),e=>{var a;return(0,i.wg)(),(0,i.iD)("div",{key:e.supplierName,class:(0,i.C_)(["provider-item",{active:e.supplierName==(null==(a=(0,i.SU)(m))?void 0:a.supplierName)}]),onClick:a=>{m.value=e,f(e.supplierName,l)}},[(0,i._)("div",T,[e.icon?((0,i.wg)(),(0,i.j4)(x,{key:0,src:e.icon,height:"24",width:"24"},null,8,["src"])):((0,i.wg)(),(0,i.iD)("i",D))]),(0,i._)("span",R,(0,i.zw)(e.supplierTitle[0].toUpperCase()+e.supplierTitle.slice(1)),1),(0,i._)("span",{class:(0,i.C_)(["status",{active:e.status}])},null,2)],10,z)}),128))]),(0,i._)("div",j,[(0,i.Wm)(C,{onClick:y},{icon:(0,i.w5)(()=>U[8]||(U[8]=[(0,i._)("i",{class:"i-ic:baseline-add-circle"},null,-1)])),default:(0,i.w5)(()=>[U[9]||(U[9]=(0,i.Uk)(" Add model service provider "))]),_:1,__:[9]})])]),(0,i.Wm)(eo,{show:(0,i.SU)(v)},{default:(0,i.w5)(()=>[(0,i._)("div",F,[(0,i._)("div",E,[(0,i._)("div",L,[(0,i._)("span",Y,(0,i.zw)((0,i.SU)(m).supplierName?(0,i.SU)(m).supplierName[0].toUpperCase()+(0,i.SU)(m).supplierName.slice(1):""),1),(0,i.Wm)(K,{value:(0,i.SU)(m).status,"onUpdate:value":[U[0]||(U[0]=e=>(0,i.SU)(m).status=e),U[1]||(U[1]=e=>(0,i.SU)(k)(e,(0,i.SU)(l)))]},null,8,["value"])]),(0,i._)("i",{class:"i-ri:delete-bin-3-line text-5.5 hover:text-red-5 cursor-pointer",onClick:U[2]||(U[2]=e=>(0,i.SU)(W)((0,i.SU)(l)))})]),(0,i._)("div",G,[(0,i.Wm)(er,{class:"mt-15px"},{default:(0,i.w5)(()=>[(0,i.Wm)(eu,{label:e.$t("settings.aiModel.aPIKey")},{default:(0,i.w5)(()=>[(0,i._)("div",J,[(0,i.Wm)($,null,{default:(0,i.w5)(()=>[(0,i.Wm)(I,{value:(0,i.SU)(m).apiKey,"onUpdate:value":U[3]||(U[3]=e=>(0,i.SU)(m).apiKey=e)},null,8,["value"]),(0,i.Wm)(C,{onClick:U[4]||(U[4]=e=>(0,i.SU)(S)((0,i.SU)(l)))},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("settings.aiModel.check")),1)]),_:1})]),_:1}),(0,i.Wm)(C,{text:"",type:"info",class:"mt-5px",onClick:U[5]||(U[5]=e=>(0,i.SU)(b)((0,i.SU)(l)))},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("settings.aiModel.getKey")),1)]),_:1})])]),_:1},8,["label"]),(0,i.Wm)(eu,{label:e.$t("settings.aiModel.apiPath")},{default:(0,i.w5)(()=>[(0,i._)("div",B,[(0,i.Wm)(I,{value:(0,i.SU)(m).baseUrl,"onUpdate:value":U[6]||(U[6]=e=>(0,i.SU)(m).baseUrl=e)},null,8,["value"]),(0,i._)("span",O,(0,i.zw)(e.$t("settings.aiModel.example"))+": https://api.deepseek.com/v1",1)])]),_:1},8,["label"])]),_:1}),(0,i.Wm)(C,{type:"primary",onClick:U[7]||(U[7]=e=>(0,i.SU)(h)((0,i.SU)(l)))},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("settings.aiModel.saveAPI")),1)]),_:1})]),(0,i._)("div",Q,[(0,i._)("div",V,[(0,i._)("div",null,[(0,i._)("span",X,(0,i.zw)(e.$t("settings.aiModel.model")),1),(0,i._)("span",ee,(0,i.zw)(e.$t("settings.aiModel.byDefault")),1)]),(0,i._)("div",{class:"add-model",onClick:g},[U[10]||(U[10]=(0,i._)("i",{class:"i-ic:baseline-control-point text-4"},null,-1)),(0,i._)("span",el,(0,i.zw)(e.$t("settings.aiModel.addModel")),1)])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(t),e=>((0,i.wg)(),(0,i.iD)("div",{key:e.title,class:"model-list"},[(0,i._)("div",ea,[(0,i._)("span",et,(0,i.zw)(e.title),1),(0,i._)("div",ei,[(0,i.Wm)(K,{value:e.status,"onUpdate:value":[l=>e.status=l,a=>(0,i.SU)(N)(e,a,(0,i.SU)(l))]},null,8,["value","onUpdate:value"]),(0,i._)("i",{class:"i-material-symbols:delete-outline text-5",onClick:a=>(0,i.SU)(M)(e,(0,i.SU)(l))},null,8,es)])])]))),128))])])]),_:1},8,["show"])]),(0,i.Wm)(Z,{ref_key:"addProviderRef",ref:_},null,512),(0,i.Wm)(q,{ref_key:"addModelRef",ref:w},null,512)],64)}}});var er=a(41748);let eo=(0,er.default)(eu,[["__scopeId","data-v-3e6fdcc4"]]),ep={class:"max-w-4xl mx-auto px-4 py-8"},en=(0,i.aZ)({__name:"index",setup(e){let l=function(){let e=(0,i.iH)([]),l=(0,i.iH)([]),a=(0,i.iH)(),t=(0,i.iH)({supplierTitle:"",supplierName:"",baseUrl:"",baseUrlExample:"",isUseUrlExample:!1,apiKey:"",home:"",help:"",status:!1,icon:"",sort:0}),s=(0,i.iH)(!1),u=(0,i.iH)({supplierTitle:"",supplierName:"",baseUrl:"",apiKey:""}),r=(0,i.iH)(),o=(0,i.iH)({title:"",modelId:"",max_tokens:8192,capability:["llm"]});return{providerList:e,modelList:l,addProviderRef:a,currentProvider:t,configurationLoading:s,addProviderFormData:u,addProviderFormDataRef:r,addModelFormData:o,addModelFormRef:(0,i.iH)(),addModelRef:(0,i.iH)()}}();return(0,i.JJ)("modelStore",l),(e,l)=>{let a=t.ZP;return(0,i.wg)(),(0,i.iD)("div",ep,[(0,i.Wm)(a,{class:"mb-5"},{default:(0,i.w5)(()=>l[0]||(l[0]=[(0,i._)("div",{class:"page-tit",style:{margin:"0"}},[(0,i._)("div",{class:"left-tit"},[(0,i._)("div",{class:"back-tool"},[(0,i._)("i",{class:"i-ri:apps-fill text-6"})]),(0,i._)("span",{class:"tit-content"}," AI Model ")])],-1)])),_:1,__:[0]}),(0,i.Wm)(a,null,{default:(0,i.w5)(()=>[(0,i.Wm)(eo)]),_:1})])}}}),ed=(0,er.default)(en,[["__scopeId","data-v-c50590a6"]])}}]);