"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["5779"],{39432:function(e,a,t){t.d(a,{Au:()=>v,Fj:()=>d,LC:()=>o,Lb:()=>w,M7:()=>f,OV:()=>c,dj:()=>r,gK:()=>u,i7:()=>s,qt:()=>n,rU:()=>_,v1:()=>p,xh:()=>g,yW:()=>m});var l=t(34541);let{t:i}=t(76882).Z.global,s=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),n=()=>l.e.post("/multi_ip_domain/apply"),d=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),r=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),c=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),v=e=>l.e.get("/domains/get_ssl",{params:e}),p=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),m=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),g=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:i("domain.api.loading.settingDefault"),successMessage:!0}}),_=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:i("domain.api.loading.settingBrandInfo"),successMessage:!0}}),f=e=>l.e.post("/multi_ip_domain/test",e,{fetchOptions:{loading:i("domain.api.loading.testingConnection"),successMessage:!0}}),w=()=>l.e.post("/askai/supplier/status")},92314:function(e,a,t){t.d(a,{AB:()=>u,CI:()=>n,Re:()=>r,a3:()=>p,cu:()=>d,de:()=>c,ou:()=>s,uJ:()=>o,v_:()=>v});var l=t(34541);let{t:i}=t(76882).Z.global,s=e=>l.e.get("/overview",{params:e}),o=e=>l.e.get("/overview/failed",{params:e}),n=()=>l.e.get("/postfix_queue/list"),d=e=>l.e.get("/postfix_queue/queue_info",{params:e}),u=e=>l.e.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:i("overview.api.loading.resendQueue"),successMessage:!0}}),r=e=>l.e.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:i("overview.api.loading.deleteQueue"),successMessage:!0}}),c=()=>l.e.get("/postfix_queue/get_config"),v=e=>l.e.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:i("overview.api.loading.setQueueConfig"),successMessage:!0}}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.e.post("/postfix_queue/delete",e,{fetchOptions:{loading:i("overview.api.loading.clearQueue"),successMessage:!0}})}},51169:function(e,a,t){t.d(a,{d:()=>o});var l=t(58786),i=t(49247);let s=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:a={},component:t,onCancel:o,onConfirm:n}=e,d=(0,l.qj)({});return t?[(0,l.aZ)({setup(i,o){let{attrs:n,slots:u}=o;return(0,l.JJ)(s,{state:a,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(a,e)}}),()=>(0,l.h)(t,{...i,...n},u)}}),d]:[(0,l.aZ)({setup(a,t){let{attrs:u,slots:r}=t,c=(0,l.f3)(s),v=(0,l.iH)(!1);return d.open=()=>{var a;v.value=!0,null==(a=e.onChangeState)||a.call(e,v.value)},d.close=()=>{v.value=!1},d.setState=a=>{var t;null==c||c.setState(a),null==(t=e.onChangeState)||t.call(e,v.value)},d.getState=()=>(null==c?void 0:c.state)??{},null==c||c.extendApi(d),()=>(0,l.Wm)(i.Z,(0,l.dG)({show:v.value},a,u,{onCancel:o,onConfirm:n,"onUpdate:show":e=>{v.value=e??!1}}),r)}}),d]}},69209:function(e,a,t){t.r(a),t.d(a,{default:()=>I});var l=t(57869),i=t(58786),s=t(22895),o=t(4020),n=t(68271),d=t(51169),u=t(92314),r=t(17977),c=t(16715),v=t(77227),p=t(8490),m=t(17987),g=t(36760),_=t(49468),f=t(39432),w=t(52495);let y={class:"filter-bar"},h={class:"w-260px"},b={class:"date-filters"},S={class:"w-240px"},U=(0,i.aZ)({__name:"FilterBar",props:{domain:{},domainModifiers:{},dateRange:{},dateRangeModifiers:{}},emits:["update:domain","update:dateRange"],setup(e){let{t:a}=(0,w.QT)(),t=(0,i.tT)(e,"domain"),l=(0,i.tT)(e,"dateRange"),s=(0,i.iH)([{label:a("common.all.domain"),value:""}]),o=(0,i.iH)("today"),d=e=>{let a=new Date,t=(0,m.E)(a,-30);return(0,g.b)(t).getTime()>e||(0,_.i)(a).getTime()<e},u=e=>{switch(e){case"today":l.value=(0,n.wb)();break;case"yesterday":l.value=(0,n.wb)((0,m.E)(new Date,-1));break;case"last7days":l.value=U()}},U=()=>{let e=new Date,a=(0,_.i)(e);return[(0,g.b)((0,m.E)(e,-6)).getTime(),a.getTime()]},k=e=>{o.value="custom",l.value=[(0,g.b)(e[0]).getTime(),(0,_.i)(e[1]).getTime()]},Z=async()=>{let e=await (0,f.LC)();(0,n.kJ)(e)&&(s.value=e.map(e=>({label:e.domain,value:e.domain})),s.value.unshift({label:a("common.all.domain"),value:""}))};return(0,i.bv)(()=>{Z()}),(e,a)=>{let n=p.Z,m=v.Z,g=c.Z,_=r.Z;return(0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("div",h,[(0,i.Wm)(n,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),options:(0,i.SU)(s)},null,8,["value","options"])]),(0,i._)("div",b,[(0,i.Wm)(g,{value:(0,i.SU)(o),"onUpdate:value":[a[1]||(a[1]=e=>(0,i.dq)(o)?o.value=e:null),u]},{default:(0,i.w5)(()=>[(0,i.Wm)(m,{value:"today"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.today")),1)]),_:1}),(0,i.Wm)(m,{value:"yesterday"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.yesterday")),1)]),_:1}),(0,i.Wm)(m,{value:"last7days"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.last7days")),1)]),_:1})]),_:1},8,["value"]),(0,i._)("div",S,[(0,i.Wm)(_,{value:l.value,type:"daterange","is-date-disabled":d,"onUpdate:value":k},null,8,["value"])])])])}}});var k=t(41748);let Z=(0,k.default)(U,[["__scopeId","data-v-1552f451"]]);var M=t(75762),W=t(28405),D=t(84439),O=t(53475),q=t(60424),x=t(35409);let C=(0,i.aZ)({__name:"SendFailDetails",setup(e){let{t:a}=(0,w.QT)(),t=(0,i.iH)(!1),l=(0,i.iH)([]),s=(0,i.iH)([{key:"recipient",title:a("overview.sendFailDetails.columns.recipient"),width:160,render:e=>(0,i.Wm)(x.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:a("overview.sendFailDetails.columns.dsn"),width:60},{key:"delay",title:a("overview.sendFailDetails.columns.delay"),width:70},{key:"delays",title:a("overview.sendFailDetails.columns.delays"),width:150},{key:"status",title:a("overview.sendFailDetails.columns.status"),width:100,ellipsis:{tooltip:!0},render:e=>e.status},{key:"relay",title:a("overview.sendFailDetails.columns.relay"),width:200,render:e=>(0,i.Wm)(x.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:a("overview.sendFailDetails.columns.details"),render:e=>(0,i.Wm)(x.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),o=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),r=async(e,a,i)=>{try{t.value=!0;let s=await (0,u.uJ)({domain:e,start_time:a/1e3,end_time:i/1e3});l.value=(0,n.kJ)(s)?s:[]}finally{t.value=!1}},[c,v]=(0,d.d)({onChangeState:e=>{if(e){let e=v.getState();r(e.domain,e.startTime,e.endTime)}else l.value=[]}});return(e,n)=>{let d=q.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(c),{title:(0,i.SU)(a)("overview.sendFailDetails.title"),width:1e3,footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(d,{loading:(0,i.SU)(t),"max-height":600,data:(0,i.SU)(l),columns:(0,i.SU)(s),"row-props":o},null,8,["loading","data","columns"])]),_:1},8,["title"])}}});var T=t(65965);let H={class:"email-analytics-container"},F={class:"bt-title"},j={class:"metrics-cards"},J={class:"detail-row"},Q={class:"rate-charts-card"},R=(0,i.aZ)({__name:"index",setup(e){let{t:a}=(0,w.QT)(),t=(0,o.m)(),r=(0,i.iH)(""),c=(0,i.iH)((0,n.wb)()),v=(0,i.iH)([]),p=(0,i.qj)({delivery_rate:{label:a("overview.delivered"),value:0,unit:"%"},open_rate:{label:a("overview.opened"),value:0,unit:"%"},click_rate:{label:a("overview.clicked"),value:0,unit:"%"},bounce_rate:{label:a("overview.bounced"),value:0,unit:"%"}}),m=(0,i.iH)(0),g=(0,i.iH)({column_type:"hourly",dashboard:{delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0},data:[]}),_=(0,i.iH)({column_type:"hourly",data:[]}),f=(0,i.iH)({column_type:"hourly",data:[]}),y=(0,i.iH)({column_type:"hourly",data:[]}),h=(0,T.tv)(),b=()=>{h.push("/settings/send-queue")},[S,U]=(0,d.d)({component:C}),k=()=>{U.setState({domain:r.value,startTime:c.value[0],endTime:c.value[1]}),U.open()},q=(0,s.DI)(R,300),x=e=>{Object.entries(e).forEach(e=>{let[a,t]=e;a in p&&(p[a].value=t)}),m.value=e.delayed_queue};async function R(){let e=await (0,u.ou)({domain:r.value,start_time:Math.floor(c.value[0]/1e3),end_time:Math.floor(c.value[1]/1e3)});(0,n.Kn)(e)&&(x(e.dashboard),v.value=(0,n.kJ)(e.mail_providers)?e.mail_providers:[],g.value=e.send_mail_chart,_.value=e.bounce_rate_chart,f.value=e.click_rate_chart,y.value=e.open_rate_chart)}return(0,i.bv)(()=>{R()}),(e,s)=>{let o=l.ZP;return(0,i.wg)(),(0,i.iD)("div",H,[(0,i._)("div",F,(0,i.zw)((0,i.SU)(a)("layout.menu.overview")),1),(0,i.Wm)(Z,{domain:(0,i.SU)(r),"onUpdate:domain":[s[0]||(s[0]=e=>(0,i.dq)(r)?r.value=e:null),(0,i.SU)(q)],"date-range":(0,i.SU)(c),"onUpdate:dateRange":[s[1]||(s[1]=e=>(0,i.dq)(c)?c.value=e:null),(0,i.SU)(q)]},null,8,["domain","date-range","onUpdate:domain","onUpdate:dateRange"]),(0,i._)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(p),(e,a)=>((0,i.wg)(),(0,i.j4)(M.Z,{key:a,title:e.label,value:e.value,unit:e.unit},null,8,["title","value","unit"]))),128)),(0,i.Wm)(M.Z,{class:"cursor-pointer",title:e.$t("overview.delayedQueue"),value:(0,i.SU)(m),"text-color":(0,i.SU)(m)>0?(0,i.SU)(t).warningColor:"",onClick:b},null,8,["title","value","text-color"])]),(0,i._)("div",J,[(0,i.Wm)(o,{class:"provider-table-card",title:e.$t("overview.mailProviders")},{default:(0,i.w5)(()=>[(0,i.Wm)(W.Z,{value:(0,i.SU)(v),"onUpdate:value":s[2]||(s[2]=e=>(0,i.dq)(v)?v.value=e:null)},null,8,["value"])]),_:1},8,["title"]),(0,i.Wm)(o,{class:"send-today-card",title:e.$t("overview.sendStats")},{default:(0,i.w5)(()=>[(0,i.Wm)(D.Z,{data:(0,i.SU)(g),onShowFail:k},null,8,["data"])]),_:1},8,["title"])]),(0,i._)("div",Q,[(0,i.Wm)(O.Z,{bounce:(0,i.SU)(_),click:(0,i.SU)(f),open:(0,i.SU)(y)},null,8,["bounce","click","open"])]),(0,i.Wm)((0,i.SU)(S))])}}}),I=(0,k.default)(R,[["__scopeId","data-v-02e68cd1"]])}}]);