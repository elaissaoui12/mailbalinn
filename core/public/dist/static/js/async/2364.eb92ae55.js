"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2364"],{39432:function(e,a,l){l.d(a,{Au:()=>p,Fj:()=>u,LC:()=>n,Lb:()=>h,M7:()=>g,OV:()=>m,dj:()=>d,gK:()=>r,i7:()=>o,qt:()=>s,rU:()=>w,v1:()=>c,xh:()=>v,yW:()=>f});var t=l(34541);let{t:i}=l(76882).Z.global,o=e=>t.e.get("/domains/list",{params:e}),n=()=>t.e.get("/domains/all"),s=()=>t.e.post("/multi_ip_domain/apply"),u=e=>t.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),r=e=>t.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),d=e=>t.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),m=e=>t.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),p=e=>t.e.get("/domains/get_ssl",{params:e}),c=e=>t.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),f=e=>t.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),v=e=>t.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:i("domain.api.loading.settingDefault"),successMessage:!0}}),w=e=>t.e.post("/askai/project/create",e,{fetchOptions:{loading:i("domain.api.loading.settingBrandInfo"),successMessage:!0}}),g=e=>t.e.post("/multi_ip_domain/test",e,{fetchOptions:{loading:i("domain.api.loading.testingConnection"),successMessage:!0}}),h=()=>t.e.post("/askai/supplier/status")},67127:function(e,a,l){l.d(a,{EV:()=>u,H2:()=>m,Ts:()=>n,WS:()=>r,Yi:()=>s,iC:()=>o,ym:()=>d});var t=l(34541);let{t:i}=l(76882).Z.global,o=e=>t.e.get("/mailbox/list",{params:e}),n=e=>t.e.post("/mailbox/create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),s=e=>t.e.post("/mailbox/batch_create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),u=e=>t.e.post("/mailbox/update",e,{fetchOptions:{loading:i("mailbox.api.loading.updating"),successMessage:!0}}),r=e=>t.e.post("/mailbox/delete",e,{fetchOptions:{loading:i("mailbox.api.loading.deleting"),successMessage:!0}}),d=e=>t.e.post("/mailbox/export",e,{responseType:"blob",fetchOptions:{loading:i("mailbox.api.loading.exporting"),successMessage:!0}}),m=e=>t.e.post("/mailbox/import",e,{fetchOptions:{loading:i("mailbox.api.loading.importing"),successMessage:!0}})},77984:function(e,a,l){l.d(a,{F:()=>n});var t=l(68271),i=l(94821),o=l(76882);let n=()=>{let{t:e}=o.Z.global,{copy:a,isSupported:l,copied:n}=(0,i.VPI)({legacy:!0});return{copied:n,copyText:async function(i){let o=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!i)return void t.v0.error(e("common.useCopy.noText"));l.value?(await a(i),o&&t.v0.success(e("common.useCopy.success"))):t.v0.error(e("common.useCopy.failed"))}}}},80947:function(e,a,l){l.d(a,{N:()=>n});var t=l(22895),i=l(68271),o=l(58786);let n=e=>{let{params:a,fetchFn:l,useParams:n,loading:s=!0,immediate:u=!0,rowKey:r=e=>e.id}=e,d=(0,o.iH)(s),m=(0,o.iH)([]),p=(0,o.iH)(0),c=(0,o.iH)(a),f=(0,o.iH)([]),v=()=>n?n(c.value):c.value,w=(0,t.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(c.value.page=1),d.value=!0;try{let e=v(),a=await l(e);(0,i.Kn)(a)&&(m.value=(0,i.kJ)(a.list)?a.list:[],p.value=(0,i.hj)(a.total)?a.total:0)}finally{f.value=[],d.value=!1}},300),g=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return w(e)},h=e=>{c.value.page=e},x=e=>{c.value.page_size=e};return(0,o.bv)(()=>{u&&g()}),{tableData:m,tableTotal:p,tableKeys:f,tableParams:c,fetchTable:g,resetTable:()=>g(!0),tableProps:(0,o.Fl)(()=>({rowKey:r,data:m.value,loading:d.value,checkedRowKeys:f.value,onUpdateCheckedRowKeys:e=>{f.value=e}})),batchProps:(0,o.Fl)(()=>({rowKey:r,data:m.value,checkedRowKeys:f.value,onUpdateCheckedRowKeys:e=>{f.value=e}})),pageProps:(0,o.Fl)(()=>({page:c.value.page,pageSize:c.value.page_size,itemCount:p.value,onUpdatePage:h,onUpdatePageSize:x}))}}},86559:function(e,a,l){l.d(a,{Z:()=>o});var t=l(73084),i=l(58786);let o=(0,i.aZ)({__name:"index",props:(0,i.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,i.Vf)(["search"],["update:value"]),setup(e,a){let{expose:l,emit:o}=a,n=(0,i.iH)(null),s=(0,i.tT)(e,"value"),u=()=>{o("search",s.value)};return l({focus:()=>{var e;null==(e=n.value)||e.focus()}}),(e,a)=>{let l=t.Z;return(0,i.wg)(),(0,i.j4)(l,(0,i.dG)({ref_key:"inputRef",ref:n,value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,i.D2)(u,["enter"])}),(0,i.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,i.w5)(()=>[(0,i._)("div",{class:"flex items-center cursor-pointer",onClick:u},a[1]||(a[1]=[(0,i._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,i.w5)(()=>[(0,i._)("div",{class:"flex items-center cursor-pointer",onClick:u},a[2]||(a[2]=[(0,i._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},4340:function(e,a,l){l.d(a,{Z:()=>u});var t=l(15496),i=l(23685),o=l(58786);let n={class:"flex gap-10px"},s={class:"flex-center w-40px"},u=(0,o.aZ)({__name:"index",props:{data:{type:Array,default:()=>[]},rowKey:{type:Function,required:!0},options:{type:Array,default:()=>[]},checkedRowKeys:{type:Array,default:()=>[]}},emits:["updateCheckedRowKeys","select"],setup(e,a){let{emit:l}=a,u=(0,o.Fl)({get:()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length===e.data.length,set(a){l("updateCheckedRowKeys",a?e.data.map(a=>e.rowKey(a)):[])}}),r=(0,o.Fl)(()=>0===e.data.length),d=(0,o.Fl)(()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length<e.data.length),m=(0,o.Fl)(()=>0===e.checkedRowKeys.length),p=a=>{l("select",a,e.checkedRowKeys)};return(a,l)=>{let c=i.Z,f=t.ZP;return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",s,[(0,o.Wm)(c,{checked:(0,o.SU)(u),"onUpdate:checked":l[0]||(l[0]=e=>(0,o.dq)(u)?u.value=e:null),disabled:(0,o.SU)(r),indeterminate:(0,o.SU)(d)},null,8,["checked","disabled","indeterminate"])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,e=>((0,o.wg)(),(0,o.j4)(f,{key:e.value,disabled:(0,o.SU)(m),onClick:a=>p(e.value)},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.label),1)]),_:2},1032,["disabled","onClick"]))),128))])}}})},66760:function(e,a,l){l.d(a,{Z:()=>s});var t=l(81021),i=l(15496),o=l(58786);let n={class:"leading-22px text-13px text-desc text-center"},s=(0,o.aZ)({__name:"index",setup(e){let a=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},l=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,s)=>{let u=i.ZP,r=(0,o.up)("i18n-t"),d=t.Z;return(0,o.wg)(),(0,o.j4)(d,null,{default:(0,o.w5)(()=>[(0,o._)("div",n,[(0,o.Wm)(r,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,o.w5)(()=>[(0,o.Wm)(u,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,o.w5)(()=>s[0]||(s[0]=[(0,o._)("span",null,"Issues",-1),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,o.w5)(()=>[(0,o.Wm)(u,{class:"text-13px",type:"primary",text:"",onClick:l},{default:(0,o.w5)(()=>s[1]||(s[1]=[(0,o.Uk)(" Star "),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),s[2]||(s[2]=(0,o._)("br",null,null,-1)),(0,o._)("span",null,(0,o.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},39244:function(e,a,l){l.d(a,{Z:()=>o});var t=l(93953),i=l(58786);let o=(0,i.aZ)({__name:"index",setup(e){let a=!!(0,i.Rr)().toolsLeft,l=!!(0,i.Rr)().toolsRight,o=!!(0,i.Rr)().pageLeft||!!(0,i.Rr)().pageRight;return(e,n)=>{let s=t.Z;return(0,i.wg)(),(0,i.iD)("div",null,[a||l?((0,i.wg)(),(0,i.j4)(s,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i.Wm)(s,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsLeft")]),_:3}),(0,i.Wm)(s,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"table"),(0,i.SU)(o)?((0,i.wg)(),(0,i.j4)(s,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i._)("div",null,[(0,i.WI)(e.$slots,"pageLeft")]),(0,i.Wm)(s,null,{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"modal")])}}})},25170:function(e,a,l){l.d(a,{Z:()=>s});var t=l(75459),i=l(58786),o=l(68271);let n={class:"ml-8px text-14px"},s=(0,i.aZ)({__name:"index",props:(0,i.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,i.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,a){let{emit:l}=a,s=(0,i.Fl)(()=>{let{storeKey:a}=e;return a?`${a}-page`:""}),u=(0,i.tT)(e,"page"),r=(0,i.tT)(e,"pageSize"),d=a=>{var t;null==(t=e.onUpdatePage)||t.call(e,a),l("refresh")},m=a=>{var t;u.value=1,null==(t=e.onUpdatePage)||t.call(e,1),p(a),l("refresh")},p=e=>{s.value&&(0,o.qQ)(s.value,String(e))};if(s.value){let e=(0,o.$o)(s.value);e&&(r.value=(0,o.Dx)(e))}return(e,a)=>{let l=t.Z;return(0,i.wg)(),(0,i.j4)(l,(0,i.dG)(e.$attrs,{page:u.value,"onUpdate:page":[a[0]||(a[0]=e=>u.value=e),d],"page-size":r.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>r.value=e),m],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,i.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,i.w5)(e=>{let{itemCount:a}=e;return[(0,i._)("span",n," Total "+(0,i.zw)(a),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},26638:function(e,a,l){l.r(a),l.d(a,{default:()=>D});var t=l(39244),i=l(25170),o=l(4340),n=l(60424),s=l(66760),u=l(86559),r=l(58786),d=l(15496),m=l(29875),p=l(93953),c=l(94821),f=l(68271),v=l(51169),w=l(77984),g=l(80947),h=l(67127),x=l(35409);let b={class:"flex"},_={class:"w-0 flex-1 flex items-center"},y={class:"min-w-0"},U=(0,r.aZ)({__name:"index",props:{value:{default:""}},setup(e){let{copyText:a}=(0,w.F)(),l=(0,r.iH)(!1),t=(0,r.Fl)(()=>l.value?e.value:"**********"),i=()=>{l.value=!l.value},o=async()=>{a(`${e.value}`)};return(e,a)=>{let n=x.ZP;return(0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("div",_,[(0,r._)("div",y,[(0,r.Wm)(n,{class:"max-w-full",tooltip:{contentStyle:{maxWidth:"200px"}}},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)((0,r.SU)(t)),1)]),_:1})]),(0,r._)("div",{class:"ml-6px text-15px cursor-pointer",title:"Show",onClick:i},[(0,r._)("i",{class:(0,r.C_)((0,r.SU)(l)?"i-mdi-eye-outline":"i-mdi-eye-off-outline")},null,2)]),(0,r._)("div",{class:"reset ml-6px text-15px cursor-pointer text-#333",title:"Copy",onClick:o},a[0]||(a[0]=[(0,r._)("i",{class:"i-mdi-content-copy"},null,-1)]))])])}}});var S=l(8490),k=l(39432),W=l(52495);let Z=(0,r.aZ)({__name:"DomainSelect",props:(0,r.Vf)({isAll:{type:Boolean,default:!0}},{value:{default:()=>null},valueModifiers:{}}),emits:["update:value"],setup(e){let{t:a}=(0,W.QT)(),l=(0,r.tT)(e,"value"),t=(0,r.iH)(!1),i=(0,r.iH)([]);return(async()=>{try{t.value=!0;let o=await (0,k.LC)();(0,f.kJ)(o)&&(i.value=o.map(e=>({label:e.domain,value:e.domain})),e.isAll?(i.value.unshift({label:a("common.all.text"),value:""}),l.value||(l.value="")):o.length>0&&!l.value&&(l.value=o[0].domain))}finally{t.value=!1}})(),(e,o)=>{let n=S.Z;return(0,r.wg)(),(0,r.j4)(n,{value:l.value,"onUpdate:value":o[0]||(o[0]=e=>l.value=e),loading:(0,r.SU)(t),filterable:!0,options:(0,r.SU)(i),placeholder:(0,r.SU)(a)("mailbox.domain.selectPlaceholder")},null,8,["value","loading","options","placeholder"])}}}),q=(0,l(41748).default)(Z,[["__scopeId","data-v-186220da"]]);var R=l(46244),C=l(29283),z=l(6455),T=l(79537),M=l(73084);let A=(0,r.aZ)({__name:"MailboxForm",setup(e){let{t:a}=(0,W.QT)(),l=(0,r.iH)(!1),t=(0,r.Fl)(()=>l.value?a("mailbox.form.editTitle"):a("mailbox.form.addTitle")),i=(0,r.AE)("formRef"),o=(0,r.qj)({quota:5,unit:"GB",isAdmin:0,full_name:"",local_part:"",domain:null,password:(0,f.JL)(),active:1}),n=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],s=[{label:a("mailbox.userType.general"),value:0},{label:a("mailbox.userType.admin"),value:1}],u={full_name:{required:!0,trigger:"blur",validator:()=>""!==o.full_name.trim()||Error("Please enter name")},domain:{trigger:"blur",required:!0,validator:()=>""!==o.local_part.trim()&&!!o.domain||Error(a("mailbox.validation.emailRequired"))},password:{trigger:"blur",required:!0,validator:()=>{if(l.value){if(o.password&&o.password.trim().length<8)return Error(a("mailbox.validation.passwordLength"));if(o.password&&!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/.test(o.password))return Error(a("mailbox.validation.passwordFormat"))}else{if(o.password.trim().length<8)return Error(a("mailbox.validation.passwordLength"));if(!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/.test(o.password))return Error(a("mailbox.validation.passwordFormat"))}return!0}}},d=e=>{o.full_name=e},p=(e,a)=>{switch(a){case"GB":e*=1024;case"MB":e*=1048576}return e},c=()=>({full_name:o.full_name,local_part:o.local_part,domain:o.domain||"",password:o.password,quota:p(o.quota,o.unit),isAdmin:o.isAdmin,active:o.active}),[w,g]=(0,v.d)({onChangeState:e=>{if(e){let e=g.getState(),{row:a}=e;if(l.value=e.isEdit,a){o.full_name=a.full_name,o.local_part=a.local_part,o.domain=a.domain,o.isAdmin=a.is_admin,o.active=a.active,o.password=a.password;let[e,l]=(0,f.UO)(a.quota).split(" ");o.quota=(0,f.Dx)(e),o.unit=l}}else o.full_name="",o.local_part="",o.domain=null,o.password=(0,f.JL)(),o.quota=5,o.unit="GB",o.isAdmin=0,o.active=1},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let a=c();l.value?await (0,h.EV)(a):await (0,h.Ts)(a),g.getState().refresh()}});return(e,p)=>{let c=M.Z,f=T.Z,v=z.ZP,g=C.Z,h=S.Z,x=m.Z,b=R.Z;return(0,r.wg)(),(0,r.j4)((0,r.SU)(w),{title:(0,r.SU)(t),width:"520"},{default:(0,r.w5)(()=>[(0,r.Wm)(b,{ref_key:"formRef",ref:i,class:"pt-20px",model:(0,r.SU)(o),rules:u},{default:(0,r.w5)(()=>[(0,r.Wm)(v,{label:(0,r.SU)(a)("mailbox.form.emailAddress"),path:"domain"},{default:(0,r.w5)(()=>[(0,r.Wm)(f,null,{default:(0,r.w5)(()=>[(0,r.Wm)(c,{value:(0,r.SU)(o).local_part,"onUpdate:value":[p[0]||(p[0]=e=>(0,r.SU)(o).local_part=e),d],class:"flex-1",disabled:(0,r.SU)(l)},null,8,["value","disabled"]),(0,r.Wm)(q,{value:(0,r.SU)(o).domain,"onUpdate:value":p[1]||(p[1]=e=>(0,r.SU)(o).domain=e),class:"flex-1","is-all":!1,disabled:(0,r.SU)(l)},null,8,["value","disabled"])]),_:1})]),_:1},8,["label"]),(0,r.Wm)(v,{label:"Display Name",path:"full_name"},{default:(0,r.w5)(()=>[(0,r.Wm)(c,{value:(0,r.SU)(o).full_name,"onUpdate:value":p[2]||(p[2]=e=>(0,r.SU)(o).full_name=e)},null,8,["value"])]),_:1}),(0,r.Wm)(v,{label:(0,r.SU)(a)("mailbox.form.password"),path:"password"},{default:(0,r.w5)(()=>[(0,r.Wm)(c,{value:(0,r.SU)(o).password,"onUpdate:value":p[3]||(p[3]=e=>(0,r.SU)(o).password=e),placeholder:(0,r.SU)(a)("mailbox.form.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,r.Wm)(v,{label:(0,r.SU)(a)("mailbox.form.quota"),path:"quota"},{default:(0,r.w5)(()=>[(0,r.Wm)(f,null,{default:(0,r.w5)(()=>[(0,r.Wm)(g,{value:(0,r.SU)(o).quota,"onUpdate:value":p[4]||(p[4]=e=>(0,r.SU)(o).quota=e),class:"flex-1",min:1,"show-button":!1},null,8,["value"]),(0,r.Wm)(h,{value:(0,r.SU)(o).unit,"onUpdate:value":p[5]||(p[5]=e=>(0,r.SU)(o).unit=e),class:"flex-1",options:n},null,8,["value"])]),_:1})]),_:1},8,["label"]),(0,r.Wm)(v,{label:(0,r.SU)(a)("mailbox.form.userType"),path:"userType"},{default:(0,r.w5)(()=>[(0,r.Wm)(h,{value:(0,r.SU)(o).isAdmin,"onUpdate:value":p[6]||(p[6]=e=>(0,r.SU)(o).isAdmin=e),options:s},null,8,["value"])]),_:1},8,["label"]),(0,r.Wm)(v,{label:(0,r.SU)(a)("mailbox.form.status"),"show-feedback":!1},{default:(0,r.w5)(()=>[(0,r.Wm)(x,{value:(0,r.SU)(o).active,"onUpdate:value":p[7]||(p[7]=e=>(0,r.SU)(o).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});var P=l(49247);let j=(0,r.aZ)({__name:"MailboxBatchAdd",emits:["refresh"],setup(e,a){let{expose:l,emit:t}=a,{t:i}=(0,W.QT)(),o=(0,r.iH)(!1),n=(0,r.AE)("formRef"),s=(0,r.qj)({domain:null,prefix:"",count:10,quota:5,unit:"GB",password:""}),u={domain:{trigger:"change",required:!0,validator:()=>!!s.domain||Error(i("mailbox.validation.domainRequired"))},prefix:{trigger:"blur",required:!0,validator:()=>!(s.prefix.trim().length<1)||Error(i("mailbox.validation.prefixRequired"))},count:{trigger:"blur",required:!0,validator:()=>!(s.count<1)||Error(i("mailbox.validation.countRequired"))}},d=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],m=async()=>{var e;await (null==(e=n.value)?void 0:e.validate()),await (0,h.Yi)(p()),t("refresh")},p=()=>({domain:s.domain||"",quota:c(s.quota,s.unit),prefix:s.prefix,count:s.count}),c=(e,a)=>{switch(a){case"GB":e*=1024;case"MB":e*=1048576}return e},f=()=>{s.domain=null,s.prefix="",s.count=10,s.quota=5,s.unit="GB",s.password=""};return l({open:()=>{f(),o.value=!0}}),(e,a)=>{let l=z.ZP,t=M.Z,i=C.Z,p=S.Z,c=T.Z,f=R.Z,v=P.Z;return(0,r.wg)(),(0,r.j4)(v,{show:(0,r.SU)(o),"onUpdate:show":a[6]||(a[6]=e=>(0,r.dq)(o)?o.value=e:null),title:e.$t("mailbox.form.batchAddTitle"),width:500,onConfirm:m},{default:(0,r.w5)(()=>[(0,r.Wm)(f,{ref_key:"formRef",ref:n,class:"pt-8px",model:(0,r.SU)(s),rules:u},{default:(0,r.w5)(()=>[(0,r.Wm)(l,{label:e.$t("mailbox.form.domain"),path:"domain"},{default:(0,r.w5)(()=>[(0,r.Wm)(q,{value:(0,r.SU)(s).domain,"onUpdate:value":a[0]||(a[0]=e=>(0,r.SU)(s).domain=e),class:"flex-1","is-all":!1,disabled:!1},null,8,["value"])]),_:1},8,["label"]),(0,r.Wm)(l,{label:e.$t("mailbox.form.prefix"),path:"prefix"},{default:(0,r.w5)(()=>[(0,r.Wm)(t,{value:(0,r.SU)(s).prefix,"onUpdate:value":a[1]||(a[1]=e=>(0,r.SU)(s).prefix=e)},null,8,["value"])]),_:1},8,["label"]),(0,r.Wm)(l,{label:e.$t("mailbox.form.count"),path:"count"},{default:(0,r.w5)(()=>[(0,r.Wm)(i,{value:(0,r.SU)(s).count,"onUpdate:value":a[2]||(a[2]=e=>(0,r.SU)(s).count=e),class:"flex-1",min:1,"show-button":!1},null,8,["value"])]),_:1},8,["label"]),(0,r.kq)("",!0),(0,r.Wm)(l,{label:e.$t("mailbox.form.quota"),path:"quota"},{default:(0,r.w5)(()=>[(0,r.Wm)(c,null,{default:(0,r.w5)(()=>[(0,r.Wm)(i,{value:(0,r.SU)(s).quota,"onUpdate:value":a[4]||(a[4]=e=>(0,r.SU)(s).quota=e),class:"flex-1",min:1,"show-button":!1},null,8,["value"]),(0,r.Wm)(p,{value:(0,r.SU)(s).unit,"onUpdate:value":a[5]||(a[5]=e=>(0,r.SU)(s).unit=e),class:"flex-1",options:d},null,8,["value"])]),_:1})]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title"])}}});var B=l(3179);let $={class:"py-16px"},E=(0,r.aZ)({__name:"MailboxImport",emits:["refresh"],setup(e,a){let{expose:l,emit:t}=a,{t:i}=(0,W.QT)(),o=(0,r.iH)(!1),n=(0,r.qj)({file_data:"",file_type:""}),s=e=>{let a=new FileReader;a.onload=a=>{var l;n.file_type=e.name.substring(e.name.lastIndexOf(".")+1),n.file_data=null==(l=a.target)?void 0:l.result},e.file&&a.readAsText(e.file)},u=async()=>{if(!n.file_data||!n.file_type)return f.v0.error(i("mailbox.validation.fileRequired")),!1;await (0,h.H2)((0,r.IU)(n)),t("refresh")},d=()=>{n.file_data="",n.file_type=""};return l({open:()=>{d(),o.value=!0}}),(e,a)=>{let l=B.Z,t=P.Z;return(0,r.wg)(),(0,r.j4)(t,{show:(0,r.SU)(o),"onUpdate:show":a[0]||(a[0]=e=>(0,r.dq)(o)?o.value=e:null),title:e.$t("mailbox.form.importTitle"),width:480,onConfirm:u},{default:(0,r.w5)(()=>[(0,r._)("div",$,[(0,r.Wm)(l,{"is-upload":!1,accept:["csv"],onChange:s})])]),_:1},8,["show","title"])}}}),K=(0,r.aZ)({__name:"MailboxExport",setup(e,a){let{expose:l}=a,t=(0,r.iH)(!1),i=(0,r.iH)(null),o=async()=>{await (0,h.ym)({domain:i.value||""})};return l({open:e=>{i.value=e||null,t.value=!0}}),(e,a)=>{let l=z.ZP,n=R.Z,s=P.Z;return(0,r.wg)(),(0,r.j4)(s,{show:(0,r.SU)(t),"onUpdate:show":a[1]||(a[1]=e=>(0,r.dq)(t)?t.value=e:null),title:e.$t("mailbox.form.exportTitle"),width:480,onConfirm:o},{default:(0,r.w5)(()=>[(0,r.Wm)(n,{class:"pt-8px"},{default:(0,r.w5)(()=>[(0,r.Wm)(l,{label:e.$t("mailbox.form.domain")},{default:(0,r.w5)(()=>[(0,r.Wm)(q,{value:(0,r.SU)(i),"onUpdate:value":a[0]||(a[0]=e=>(0,r.dq)(i)?i.value=e:null)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["show","title"])}}}),O={class:"p-24px"},F={class:"bt-title"},H={class:"w-220px"};function G(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.lA)(e)}let D=(0,r.aZ)({__name:"index",setup(e){let a=(0,c.tLD)(),{t:l}=(0,W.QT)(),{copyText:x}=(0,w.F)(),b=(0,r.AE)("batchAddRef"),_=()=>{var e;null==(e=b.value)||e.open()},y=(0,r.AE)("importRef"),S=()=>{var e;null==(e=y.value)||e.open()},k=(0,r.AE)("exportRef"),Z=()=>{var e;null==(e=k.value)||e.open(R.value.domain)},{tableParams:R,tableProps:C,pageProps:z,batchProps:T,fetchTable:M,resetTable:P}=(0,g.N)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:a.value.state.domain||"",keyword:""},rowKey:e=>e.username,fetchFn:h.iC}),B=(0,r.iH)([{type:"selection",width:40},{key:"username",title:l("mailbox.columns.username"),minWidth:120,ellipsis:{tooltip:!0}},{key:"password",title:l("mailbox.columns.password"),width:"18%",minWidth:120,render:e=>(0,r.Wm)(U,{value:e.password||"--"},null)},{key:"login",title:l("mailbox.columns.loginInfo"),align:"center",render:e=>{let a;return(0,r.Wm)(d.ZP,{text:!0,type:"primary",onClick:()=>{x(l("mailbox.loginInfo.template",{webmail:window.location.origin+"/roundcube",username:e.username,password:e.password,mx:e.mx}))}},G(a=l("common.actions.copy"))?a:{default:()=>[a]})}},{key:"quota",title:l("mailbox.columns.quota"),width:"14%",minWidth:120,render:e=>(0,f.UO)(e.quota)},{key:"is_admin",title:l("mailbox.columns.type"),width:"14%",minWidth:100,render:e=>1===e.is_admin?l("mailbox.userType.admin"):l("mailbox.userType.general")},{key:"status",title:l("mailbox.columns.status"),width:"12%",minWidth:80,render:e=>(0,r.Wm)(m.Z,{value:e.active,"checked-value":1,"unchecked-value":0,size:"small",onUpdateValue:a=>{L(e,a)}},null)},{title:l("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let a,t;return(0,r.Wm)(p.Z,{inline:!0},{default:()=>[(0,r.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{V(e)}},G(a=l("common.actions.edit"))?a:{default:()=>[a]}),(0,r.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{Q(e)}},G(t=l("common.actions.delete"))?t:{default:()=>[t]})]})}}]),[$,D]=(0,v.d)({component:A,state:{isEdit:!1,refresh:M}}),I=()=>{D.setState({isEdit:!1,row:null}),D.open()},L=async(e,a)=>{await (0,h.EV)({full_name:e.full_name,domain:e.domain,password:e.password,quota:e.quota,isAdmin:e.is_admin,active:a}),e.active=a},V=e=>{D.setState({isEdit:!0,row:e}),D.open()},Q=e=>{(0,f.iG)({title:l("mailbox.delete.title"),content:l("mailbox.delete.confirm",{name:e.username}),confirmText:l("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,h.WS)({emails:[e.username]}),M()}})},J=[{label:l("mailbox.actions.batchDelete"),value:"delete"}],N=(e,a)=>{"delete"===e&&Y(a)},Y=e=>{(0,f.iG)({title:l("mailbox.actions.batchDelete"),content:l("mailbox.delete.batchConfirm",{count:e.length}),confirmText:l("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,h.WS)({emails:e}),M()}})};return(e,a)=>{let m=u.Z,p=s.Z,c=n.Z,f=o.Z,v=i.Z,w=t.Z;return(0,r.wg)(),(0,r.iD)("div",O,[(0,r._)("div",F,(0,r.zw)((0,r.SU)(l)("layout.menu.mailboxes")),1),(0,r.Wm)(w,null,{toolsLeft:(0,r.w5)(()=>[(0,r.Wm)((0,r.SU)(d.ZP),{type:"primary",onClick:I},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)((0,r.SU)(l)("mailbox.actions.add")),1)]),_:1}),(0,r.Wm)((0,r.SU)(d.ZP),{onClick:_},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("mailbox.actions.batchAdd")),1)]),_:1}),(0,r.Wm)((0,r.SU)(d.ZP),{onClick:S},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)(e.$t("common.actions.import")),1)]),_:1}),(0,r.Wm)((0,r.SU)(d.ZP),{onClick:Z},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)((0,r.SU)(l)("mailbox.actions.exportAll")),1)]),_:1})]),toolsRight:(0,r.w5)(()=>[(0,r._)("div",H,[(0,r.Wm)(q,{value:(0,r.SU)(R).domain,"onUpdate:value":[a[0]||(a[0]=e=>(0,r.SU)(R).domain=e),a[1]||(a[1]=()=>(0,r.SU)(P)())]},null,8,["value"])]),(0,r.Wm)(m,{value:(0,r.SU)(R).keyword,"onUpdate:value":a[2]||(a[2]=e=>(0,r.SU)(R).keyword=e),width:280,placeholder:(0,r.SU)(l)("mailbox.search.usernamePlaceholder"),onSearch:a[3]||(a[3]=()=>(0,r.SU)(P)())},null,8,["value","placeholder"])]),table:(0,r.w5)(()=>[(0,r.Wm)(c,(0,r.dG)((0,r.SU)(C),{columns:(0,r.SU)(B)}),{empty:(0,r.w5)(()=>[(0,r.Wm)(p)]),_:1},16,["columns"])]),pageLeft:(0,r.w5)(()=>[(0,r.Wm)(f,(0,r.dG)((0,r.SU)(T),{options:J,onSelect:N}),null,16)]),pageRight:(0,r.w5)(()=>[(0,r.Wm)(v,(0,r.dG)((0,r.SU)(z),{onRefresh:(0,r.SU)(M)}),null,16,["onRefresh"])]),modal:(0,r.w5)(()=>[(0,r.Wm)((0,r.SU)($)),(0,r.Wm)(j,{ref_key:"batchAddRef",ref:b,onRefresh:(0,r.SU)(M)},null,8,["onRefresh"]),(0,r.Wm)(E,{ref_key:"importRef",ref:y,onRefresh:(0,r.SU)(M)},null,8,["onRefresh"]),(0,r.Wm)(K,{ref_key:"exportRef",ref:k},null,512)]),_:1})])}}})}}]);