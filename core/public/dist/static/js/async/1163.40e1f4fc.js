"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["1163"],{93953:function(e,t,l){l.d(t,{Z:()=>v});var a=l(65083),i=l(58786),n=l(56946),u=l(54470),o=l(51048),r=l(71309),s=l(60951),d=l(6445),c=l(73238);let f={name:"Flex",self:function(){return c.Z}},m=Object.assign(Object.assign({},n.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),v=(0,i.aZ)({name:"Flex",props:m,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:l}=(0,u.ZP)(e),s=(0,n.Z)("Flex","-flex",void 0,f,e,t);return{rtlEnabled:(0,o.V)("Flex",l,t),mergedClsPrefix:t,margin:(0,i.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,r.Tl)("gap",t)]:l}}=s.value,{row:i,col:n}=(0,a.yU)(l);return{horizontal:(0,a.fQ)(n),vertical:(0,a.fQ)(i)}})}},render(){let{vertical:e,reverse:t,align:l,inline:a,justify:n,margin:u,wrap:o,mergedClsPrefix:r,rtlEnabled:c}=this,f=(0,s.x)((0,d.z)(this),!1);return f.length?(0,i.h)("div",{role:"none",class:[`${r}-flex`,c&&`${r}-flex--rtl`],style:{display:a?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:n,flexWrap:!o||e?"nowrap":"wrap",alignItems:l,gap:`${u.vertical}px ${u.horizontal}px`}},f):null}})},92314:function(e,t,l){l.d(t,{AB:()=>s,CI:()=>o,Re:()=>d,a3:()=>m,cu:()=>r,de:()=>c,ou:()=>n,uJ:()=>u,v_:()=>f});var a=l(34541);let{t:i}=l(76882).Z.global,n=e=>a.e.get("/overview",{params:e}),u=e=>a.e.get("/overview/failed",{params:e}),o=()=>a.e.get("/postfix_queue/list"),r=e=>a.e.get("/postfix_queue/queue_info",{params:e}),s=e=>a.e.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:i("overview.api.loading.resendQueue"),successMessage:!0}}),d=e=>a.e.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:i("overview.api.loading.deleteQueue"),successMessage:!0}}),c=()=>a.e.get("/postfix_queue/get_config"),f=e=>a.e.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:i("overview.api.loading.setQueueConfig"),successMessage:!0}}),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.e.post("/postfix_queue/delete",e,{fetchOptions:{loading:i("overview.api.loading.clearQueue"),successMessage:!0}})}},80947:function(e,t,l){l.d(t,{N:()=>u});var a=l(22895),i=l(68271),n=l(58786);let u=e=>{let{params:t,fetchFn:l,useParams:u,loading:o=!0,immediate:r=!0,rowKey:s=e=>e.id}=e,d=(0,n.iH)(o),c=(0,n.iH)([]),f=(0,n.iH)(0),m=(0,n.iH)(t),v=(0,n.iH)([]),p=()=>u?u(m.value):m.value,w=(0,a.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(m.value.page=1),d.value=!0;try{let e=p(),t=await l(e);(0,i.Kn)(t)&&(c.value=(0,i.kJ)(t.list)?t.list:[],f.value=(0,i.hj)(t.total)?t.total:0)}finally{v.value=[],d.value=!1}},300),g=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return w(e)},_=e=>{m.value.page=e},h=e=>{m.value.page_size=e};return(0,n.bv)(()=>{r&&g()}),{tableData:c,tableTotal:f,tableKeys:v,tableParams:m,fetchTable:g,resetTable:()=>g(!0),tableProps:(0,n.Fl)(()=>({rowKey:s,data:c.value,loading:d.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),batchProps:(0,n.Fl)(()=>({rowKey:s,data:c.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),pageProps:(0,n.Fl)(()=>({page:m.value.page,pageSize:m.value.page_size,itemCount:f.value,onUpdatePage:_,onUpdatePageSize:h}))}}},4340:function(e,t,l){l.d(t,{Z:()=>r});var a=l(15496),i=l(23685),n=l(58786);let u={class:"flex gap-10px"},o={class:"flex-center w-40px"},r=(0,n.aZ)({__name:"index",props:{data:{type:Array,default:()=>[]},rowKey:{type:Function,required:!0},options:{type:Array,default:()=>[]},checkedRowKeys:{type:Array,default:()=>[]}},emits:["updateCheckedRowKeys","select"],setup(e,t){let{emit:l}=t,r=(0,n.Fl)({get:()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length===e.data.length,set(t){l("updateCheckedRowKeys",t?e.data.map(t=>e.rowKey(t)):[])}}),s=(0,n.Fl)(()=>0===e.data.length),d=(0,n.Fl)(()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length<e.data.length),c=(0,n.Fl)(()=>0===e.checkedRowKeys.length),f=t=>{l("select",t,e.checkedRowKeys)};return(t,l)=>{let m=i.Z,v=a.ZP;return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",o,[(0,n.Wm)(m,{checked:(0,n.SU)(r),"onUpdate:checked":l[0]||(l[0]=e=>(0,n.dq)(r)?r.value=e:null),disabled:(0,n.SU)(s),indeterminate:(0,n.SU)(d)},null,8,["checked","disabled","indeterminate"])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.options,e=>((0,n.wg)(),(0,n.j4)(v,{key:e.value,disabled:(0,n.SU)(c),onClick:t=>f(e.value)},{default:(0,n.w5)(()=>[(0,n.Uk)((0,n.zw)(e.label),1)]),_:2},1032,["disabled","onClick"]))),128))])}}})},39244:function(e,t,l){l.d(t,{Z:()=>n});var a=l(93953),i=l(58786);let n=(0,i.aZ)({__name:"index",setup(e){let t=!!(0,i.Rr)().toolsLeft,l=!!(0,i.Rr)().toolsRight,n=!!(0,i.Rr)().pageLeft||!!(0,i.Rr)().pageRight;return(e,u)=>{let o=a.Z;return(0,i.wg)(),(0,i.iD)("div",null,[t||l?((0,i.wg)(),(0,i.j4)(o,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i.Wm)(o,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsLeft")]),_:3}),(0,i.Wm)(o,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"table"),(0,i.SU)(n)?((0,i.wg)(),(0,i.j4)(o,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i._)("div",null,[(0,i.WI)(e.$slots,"pageLeft")]),(0,i.Wm)(o,null,{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"modal")])}}})},46244:function(e,t,l){l.d(t,{Z:()=>n});var a=l(98048),i=l(58786);let n=(0,i.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:l}=t,n=(0,i.iH)(null);return l({validate:()=>{var e;return null==(e=n.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=n.value)?void 0:e.restoreValidation()}}),(e,t)=>{let l=a.Z;return(0,i.wg)(),(0,i.j4)(l,(0,i.dG)(e.$attrs,{ref_key:"formRef",ref:n,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},55193:function(e,t,l){l.r(t),l.d(t,{default:()=>k});var a=l(39244),i=l(4340),n=l(60424),u=l(58786),o=l(15496),r=l(93953),s=l(68271),d=l(80947),c=l(92314),f=l(49247),m=l(46244),v=l(6455),p=l(73084);let w=(0,u.aZ)({__name:"param-config",setup(e,t){let{expose:l}=t,a=(0,u.iH)(!1),i=(0,u.qj)({bounce_queue_lifetime:"",maximal_queue_lifetime:"",minimal_backoff_time:"",maximal_backoff_time:"",queue_run_delay:"",trigger_timeout:""}),n=async()=>{let e=await (0,c.de)();(0,s.Kn)(e)&&Object.assign(i,e)},o=async()=>{await (0,c.v_)((0,u.IU)(i))};return l({open:()=>{a.value=!0,n()}}),(e,t)=>{let l=p.Z,n=v.ZP,r=m.Z,s=f.Z;return(0,u.wg)(),(0,u.j4)(s,{show:(0,u.SU)(a),"onUpdate:show":t[6]||(t[6]=e=>(0,u.dq)(a)?a.value=e:null),width:520,title:e.$t("overview.sendQueue.paramConfig.title"),onConfirm:o},{default:(0,u.w5)(()=>[(0,u.Wm)(r,{class:"pt-8px"},{default:(0,u.w5)(()=>[(0,u.Wm)(n,{label:e.$t("overview.sendQueue.paramConfig.fields.bounceQueueLifetime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(i).bounce_queue_lifetime,"onUpdate:value":t[0]||(t[0]=e=>(0,u.SU)(i).bounce_queue_lifetime=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(n,{label:e.$t("overview.sendQueue.paramConfig.fields.maximalQueueLifetime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(i).maximal_queue_lifetime,"onUpdate:value":t[1]||(t[1]=e=>(0,u.SU)(i).maximal_queue_lifetime=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(n,{label:e.$t("overview.sendQueue.paramConfig.fields.minimalBackoffTime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(i).minimal_backoff_time,"onUpdate:value":t[2]||(t[2]=e=>(0,u.SU)(i).minimal_backoff_time=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(n,{label:e.$t("overview.sendQueue.paramConfig.fields.maximalBackoffTime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(i).maximal_backoff_time,"onUpdate:value":t[3]||(t[3]=e=>(0,u.SU)(i).maximal_backoff_time=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(n,{label:e.$t("overview.sendQueue.paramConfig.fields.queueRunDelay")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(i).queue_run_delay,"onUpdate:value":t[4]||(t[4]=e=>(0,u.SU)(i).queue_run_delay=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(n,{label:e.$t("overview.sendQueue.paramConfig.fields.triggerTimeout")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(i).trigger_timeout,"onUpdate:value":t[5]||(t[5]=e=>(0,u.SU)(i).trigger_timeout=e)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["show","title"])}}});var g=l(60579),_=l(72290);let h=(0,u.aZ)({__name:"queue-logs",setup(e,t){let{expose:l}=t,a=(0,u.iH)(!1),i=(0,u.iH)(!1),n=(0,u.iH)("");return l({open:async e=>{a.value=!0,i.value=!0,n.value="";try{let t=await (0,c.cu)({queue_id:e});(0,s.HD)(t)&&(n.value=t)}finally{i.value=!1}}}),(e,t)=>{let l=_.Z,o=g.Z,r=f.Z;return(0,u.wg)(),(0,u.j4)(r,{show:(0,u.SU)(a),"onUpdate:show":t[0]||(t[0]=e=>(0,u.dq)(a)?a.value=e:null),title:e.$t("overview.sendQueue.queueLogs.title"),width:800,footer:!1},{default:(0,u.w5)(()=>[(0,u.Wm)(o,{show:(0,u.SU)(i)},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{height:"520px",code:(0,u.SU)(n)},null,8,["code"])]),_:1},8,["show"])]),_:1},8,["show","title"])}}});var y=l(52495);function b(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,u.lA)(e)}let k=(0,u.aZ)({__name:"index",setup(e){let{t}=(0,y.QT)(),l=(0,u.AE)("configModalRef"),f=(0,u.AE)("logsModalRef"),m=()=>{var e;null==(e=l.value)||e.open()},v=()=>{(0,s.iG)({title:t("overview.sendQueue.confirm.quickClear.title"),content:t("overview.sendQueue.confirm.quickClear.content"),confirmType:"error",onConfirm:async()=>{await (0,c.a3)(),_()}})},{tableProps:p,batchProps:g,fetchTable:_}=(0,d.N)({params:{},fetchFn:c.CI,rowKey:e=>e.queue_id}),k=(0,u.iH)([{width:40,type:"selection"},{key:"queue_id",title:"ID",width:"8%",minWidth:"90px",render:e=>(0,u.Wm)(o.ZP,{type:"primary",text:!0,onClick:()=>{var t;null==(t=f.value)||t.open(e.queue_id)}},{default:()=>[e.queue_id]})},{key:"sender",title:t("overview.sendQueue.table.columns.sender"),width:"10%",minWidth:"120px"},{key:"recipient",title:t("overview.sendQueue.table.columns.recipient"),width:"10%",minWidth:"120px",ellipsis:{tooltip:!0}},{key:"arrival_time",title:t("overview.sendQueue.table.columns.arrivalTime"),width:"12%",minWidth:"130px",render:e=>(0,s.mr)(e.arrival_time)},{key:"message_size",title:t("overview.sendQueue.table.columns.messageSize"),width:"8%",minWidth:"80px",render:e=>(0,s.UO)(e.message_size)},{key:"delay_reason",title:t("overview.sendQueue.table.columns.delayReason"),ellipsis:{tooltip:!0}},{key:"action",title:t("overview.sendQueue.table.columns.action"),align:"right",width:120,render:e=>{let l,a;return(0,u.Wm)(r.Z,{inline:!0},{default:()=>[(0,u.Wm)(o.ZP,{type:"primary",text:!0,onClick:()=>{x(e)}},b(l=t("overview.sendQueue.buttons.resend"))?l:{default:()=>[l]}),(0,u.Wm)(o.ZP,{type:"error",text:!0,onClick:()=>{U(e)}},b(a=t("common.actions.delete"))?a:{default:()=>[a]})]})}}]),x=async e=>{(0,s.iG)({title:t("overview.sendQueue.confirm.resend.title"),content:t("overview.sendQueue.confirm.resend.content"),onConfirm:async()=>{await (0,c.AB)({queue_ids:[e.queue_id]}),_()}})},U=async e=>{(0,s.iG)({title:t("overview.sendQueue.confirm.delete.title"),content:t("overview.sendQueue.confirm.delete.content"),confirmType:"error",onConfirm:async()=>{await (0,c.Re)({queue_ids:[e.queue_id]}),_()}})},W=[{label:t("overview.sendQueue.buttons.batchDelete"),value:"delete"},{label:t("overview.sendQueue.buttons.batchResend"),value:"resend"}],q=(e,t)=>{switch(e){case"delete":Q(t);break;case"resend":C(t)}},Q=async e=>{(0,s.iG)({title:t("overview.sendQueue.confirm.batchDelete.title"),content:t("overview.sendQueue.confirm.batchDelete.content",{count:e.length}),confirmType:"error",onConfirm:async()=>{await (0,c.Re)({queue_ids:e}),_()}})},C=async e=>{(0,s.iG)({title:t("overview.sendQueue.confirm.batchResend.title"),content:t("overview.sendQueue.confirm.batchResend.content",{count:e.length}),onConfirm:async()=>{await (0,c.AB)({queue_ids:e}),_()}})};return(e,t)=>{let r=n.Z,s=i.Z,d=a.Z;return(0,u.wg)(),(0,u.j4)(d,null,{toolsLeft:(0,u.w5)(()=>[(0,u.Wm)((0,u.SU)(o.ZP),{type:"primary",onClick:t[0]||(t[0]=e=>(0,u.SU)(_)())},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("overview.sendQueue.buttons.refresh")),1)]),_:1}),(0,u.Wm)((0,u.SU)(o.ZP),{onClick:v},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("overview.sendQueue.buttons.quickClear")),1)]),_:1}),(0,u.Wm)((0,u.SU)(o.ZP),{onClick:m},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("overview.sendQueue.buttons.paramConfig")),1)]),_:1})]),table:(0,u.w5)(()=>[(0,u.Wm)(r,(0,u.dG)((0,u.SU)(p),{"max-height":"540px",columns:(0,u.SU)(k)}),null,16,["columns"])]),pageLeft:(0,u.w5)(()=>[(0,u.Wm)(s,(0,u.dG)((0,u.SU)(g),{options:W,onSelect:q}),null,16)]),modal:(0,u.w5)(()=>[(0,u.Wm)(w,{ref_key:"configModalRef",ref:l},null,512),(0,u.Wm)(h,{ref_key:"logsModalRef",ref:f},null,512)]),_:1})}}})}}]);