"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["4317"],{65977:function(e,t,r){r.d(t,{Z:()=>l});var i=r(58786);let l=(0,i.aZ)({name:"Add",render:()=>(0,i.h)("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.h)("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))})},35336:function(e,t,r){r.d(t,{Z:()=>er});var i=r(17102),l=r(20013),n=r(58786),o=r(56946),a=r(54470),s=r(32196),u=r(53198),d=r(14501),c=r(44267),h=r(86524),p=r(49679),f=r(74482),g=r(28632),v=r(71309);let m=(0,v.c)([(0,v.cB)("upload","width: 100%;",[(0,v.cM)("dragger-inside",[(0,v.cB)("upload-trigger",`
 display: block;
 `)]),(0,v.cM)("drag-over",[(0,v.cB)("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),(0,v.cB)("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[(0,v.c)("&:hover",`
 border: var(--n-dragger-border-hover);
 `),(0,v.cM)("disabled",`
 cursor: not-allowed;
 `)]),(0,v.cB)("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[(0,v.c)("+",[(0,v.cB)("upload-file-list","margin-top: 8px;")]),(0,v.cM)("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),(0,v.cM)("image-card",`
 width: 96px;
 height: 96px;
 `,[(0,v.cB)("base-icon",`
 font-size: 24px;
 `),(0,v.cB)("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),(0,v.cB)("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[(0,v.c)("a, img","outline: none;"),(0,v.cM)("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[(0,v.cB)("upload-file","cursor: not-allowed;")]),(0,v.cM)("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),(0,v.cB)("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[(0,f.Y)(),(0,v.cB)("progress",[(0,f.Y)({foldPadding:!0})]),(0,v.c)("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[(0,v.cB)("upload-file-info",[(0,v.cE)("action",`
 opacity: 1;
 `)])]),(0,v.cM)("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[(0,v.cB)("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[(0,v.cB)("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),(0,v.cE)("name",`
 padding: 0 8px;
 `),(0,v.cE)("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[(0,v.c)("img",`
 width: 100%;
 `)])])]),(0,v.cM)("text-type",[(0,v.cB)("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),(0,v.cM)("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[(0,v.cB)("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),(0,v.cB)("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[(0,v.cE)("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[(0,v.c)("img",`
 width: 100%;
 `)])]),(0,v.c)("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),(0,v.c)("&:hover",[(0,v.c)("&::before","opacity: 1;"),(0,v.cB)("upload-file-info",[(0,v.cE)("thumbnail","opacity: .12;")])])]),(0,v.cM)("error-status",[(0,v.c)("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),(0,v.cB)("upload-file-info",[(0,v.cE)("name","color: var(--n-item-text-color-error);"),(0,v.cE)("thumbnail","color: var(--n-item-text-color-error);")]),(0,v.cM)("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),(0,v.cM)("with-url",`
 cursor: pointer;
 `,[(0,v.cB)("upload-file-info",[(0,v.cE)("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[(0,v.c)("a",`
 text-decoration: underline;
 `)])])]),(0,v.cB)("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[(0,v.cE)("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[(0,v.cB)("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),(0,v.cE)("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[(0,v.cB)("button",[(0,v.c)("&:not(:last-child)",{marginRight:"4px"}),(0,v.cB)("base-icon",[(0,v.c)("svg",[(0,g.c)()])])]),(0,v.cM)("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),(0,v.cM)("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),(0,v.cE)("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[(0,v.c)("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),(0,v.cB)("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]);var y=r(73255),b=r(77565),w=r(45063),x=r(61691),R=r(96823),B=r(76128),k=r(144);let C=(0,k.f)("attach",()=>(0,n.h)("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},(0,n.h)("g",{fill:"currentColor","fill-rule":"nonzero"},(0,n.h)("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"})))));var P=r(81748);let F=(0,k.f)("trash",()=>(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},(0,n.h)("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),(0,n.h)("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),(0,n.h)("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),(0,n.h)("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),L=(0,k.f)("cancel",()=>(0,n.h)("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},(0,n.h)("g",{fill:"currentColor","fill-rule":"nonzero"},(0,n.h)("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),U=(0,k.f)("retry",()=>(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},(0,n.h)("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),(0,n.h)("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"})));var T=r(46130),O=r(60309),j=r(15496),Z=r(40972);let z=(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},(0,n.h)("g",{fill:"none"},(0,n.h)("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),D=(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},(0,n.h)("g",{fill:"none"},(0,n.h)("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"})));var M=r(76561);let E=(0,n.aZ)({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup:()=>({mergedTheme:(0,n.f3)(p.U).mergedThemeRef}),render(){return(0,n.h)(b.Z,null,{default:()=>this.show?(0,n.h)(M.Z,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}});var V=r(68574),S=function(e,t,r,i){return new(r||(r=Promise))(function(l,n){function o(e){try{s(i.next(e))}catch(e){n(e)}}function a(e){try{s(i.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?l(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}s((i=i.apply(e,t||[])).next())})};function $(e){return e.includes("image/")}function A(e=""){let t=e.split("/"),r=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(r)||[""])[0]}let H=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,_=e=>{if(e.type)return $(e.type);let t=A(e.name||"");if(H.test(t))return!0;let r=e.thumbnailUrl||e.url||"",i=A(r);return!!(/^data:image\//.test(r)||H.test(i))},q=V.j&&window.FileReader&&window.File;function I(e){let{id:t,name:r,percentage:i,status:l,url:n,file:o,thumbnailUrl:a,type:s,fullPath:u,batchId:d}=e;return{id:t,name:r,percentage:null!=i?i:null,status:l,url:null!=n?n:null,file:null!=o?o:null,thumbnailUrl:null!=a?a:null,type:null!=s?s:null,fullPath:null!=u?u:null,batchId:null!=d?d:null}}var X=function(e,t,r,i){return new(r||(r=Promise))(function(l,n){function o(e){try{s(i.next(e))}catch(e){n(e)}}function a(e){try{s(i.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?l(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}s((i=i.apply(e,t||[])).next())})};let G={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},Y=(0,n.aZ)({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(e){let t=(0,n.f3)(p.U),r=(0,n.iH)(null),i=(0,n.iH)(""),l=(0,n.Fl)(()=>{let{file:t}=e;return"finished"===t.status?"success":"error"===t.status?"error":"info"}),o=(0,n.Fl)(()=>{let{file:t}=e;if("error"===t.status)return"error"}),a=(0,n.Fl)(()=>{let{file:t}=e;return"uploading"===t.status}),s=(0,n.Fl)(()=>{if(!t.showCancelButtonRef.value)return!1;let{file:r}=e;return["uploading","pending","error"].includes(r.status)}),u=(0,n.Fl)(()=>{if(!t.showRemoveButtonRef.value)return!1;let{file:r}=e;return["finished"].includes(r.status)}),c=(0,n.Fl)(()=>{if(!t.showDownloadButtonRef.value)return!1;let{file:r}=e;return["finished"].includes(r.status)}),h=(0,n.Fl)(()=>{if(!t.showRetryButtonRef.value)return!1;let{file:r}=e;return["error"].includes(r.status)}),f=(0,x.Z)(()=>i.value||e.file.thumbnailUrl||e.file.url),g=(0,n.Fl)(()=>{if(!t.showPreviewButtonRef.value)return!1;let{file:{status:r},listType:i}=e;return["finished"].includes(r)&&f.value&&"image-card"===i});function v(r){let{xhrMap:i,doChange:l,onRemoveRef:{value:n},mergedFileListRef:{value:o}}=t;Promise.resolve(!n||n({file:Object.assign({},r),fileList:o,index:e.index})).then(e=>{if(!1===e)return;let t=Object.assign({},r,{status:"removed"});i.delete(r.id),l(t,void 0,{remove:!0})})}let m=()=>X(this,void 0,void 0,function*(){let{listType:r}=e;("image"===r||"image-card"===r)&&t.shouldUseThumbnailUrlRef.value(e.file)&&(i.value=yield t.getFileThumbnailUrlResolver(e.file))});return(0,n.m0)(()=>{m()}),{mergedTheme:t.mergedThemeRef,progressStatus:l,buttonType:o,showProgress:a,disabled:t.mergedDisabledRef,showCancelButton:s,showRemoveButton:u,showDownloadButton:c,showRetryButton:h,showPreviewButton:g,mergedThumbnailUrl:f,shouldUseThumbnailUrl:t.shouldUseThumbnailUrlRef,renderIcon:t.renderIconRef,imageRef:r,handleRemoveOrCancelClick:function(r){r.preventDefault();let{file:i}=e;["finished","pending","error"].includes(i.status)?v(i):["uploading"].includes(i.status)?function(e){let{xhrMap:r}=t,i=r.get(e.id);null==i||i.abort(),v(Object.assign({},e))}(i):(0,d.ZK)("upload","The button clicked type is unknown.")},handleDownloadClick:function(r){r.preventDefault(),function(e){let{onDownloadRef:{value:r}}=t;Promise.resolve(!r||r(Object.assign({},e))).then(t=>{!1!==t&&(0,O.L)(e.url,e.name)})}(e.file)},handleRetryClick:function(){return X(this,void 0,void 0,function*(){let r=t.onRetryRef.value;r&&!1===(yield r({file:e.file}))||t.submit(e.file.id)})},handlePreviewClick:function(i){let{onPreviewRef:{value:l}}=t;if(l)l(e.file,{event:i});else if("image-card"===e.listType){let{value:e}=r;if(!e)return;e.click()}}}},render(){let e,{clsPrefix:t,mergedTheme:r,listType:i,file:l,renderIcon:o}=this,a="image"===i;e=a||"image-card"===i?this.shouldUseThumbnailUrl(l)&&this.mergedThumbnailUrl?(0,n.h)("a",{rel:"noopener noreferer",target:"_blank",href:l.url||void 0,class:`${t}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},"image-card"===i?(0,n.h)(Z.Z,{src:this.mergedThumbnailUrl||void 0,previewSrc:l.url||void 0,alt:l.name,ref:"imageRef"}):(0,n.h)("img",{src:this.mergedThumbnailUrl||void 0,alt:l.name})):(0,n.h)("span",{class:`${t}-upload-file-info__thumbnail`},o?o(l):_(l)?(0,n.h)(R.Z,{clsPrefix:t},{default:z}):(0,n.h)(R.Z,{clsPrefix:t},{default:D})):(0,n.h)("span",{class:`${t}-upload-file-info__thumbnail`},o?o(l):(0,n.h)(R.Z,{clsPrefix:t},{default:()=>(0,n.h)(C,null)}));let s=(0,n.h)(E,{show:this.showProgress,percentage:l.percentage||0,status:this.progressStatus});return(0,n.h)("div",{class:[`${t}-upload-file`,`${t}-upload-file--${this.progressStatus}-status`,l.url&&"error"!==l.status&&"image-card"!==i&&`${t}-upload-file--with-url`,`${t}-upload-file--${i}-type`]},(0,n.h)("div",{class:`${t}-upload-file-info`},e,(0,n.h)("div",{class:`${t}-upload-file-info__name`},("text"===i||"image"===i)&&(l.url&&"error"!==l.status?(0,n.h)("a",{rel:"noopener noreferer",target:"_blank",href:l.url||void 0,onClick:this.handlePreviewClick},l.name):(0,n.h)("span",{onClick:this.handlePreviewClick},l.name)),a&&s),(0,n.h)("div",{class:[`${t}-upload-file-info__action`,`${t}-upload-file-info__action--${i}-type`]},this.showPreviewButton?(0,n.h)(j.ZP,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:G},{icon:()=>(0,n.h)(R.Z,{clsPrefix:t},{default:()=>(0,n.h)(P.Z,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&(0,n.h)(j.ZP,{key:"cancelOrTrash",theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:G,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>(0,n.h)(B.Z,null,{default:()=>this.showRemoveButton?(0,n.h)(R.Z,{clsPrefix:t,key:"trash"},{default:()=>(0,n.h)(F,null)}):(0,n.h)(R.Z,{clsPrefix:t,key:"cancel"},{default:()=>(0,n.h)(L,null)})})}),this.showRetryButton&&!this.disabled&&(0,n.h)(j.ZP,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:G},{icon:()=>(0,n.h)(R.Z,{clsPrefix:t},{default:()=>(0,n.h)(U,null)})}),this.showDownloadButton?(0,n.h)(j.ZP,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:G},{icon:()=>(0,n.h)(R.Z,{clsPrefix:t},{default:()=>(0,n.h)(T.Z,null)})}):null)),!a&&s)}});var N=r(65977),J=r(93950);let W=(0,n.aZ)({name:"UploadTrigger",props:{abstract:Boolean},slots:Object,setup(e,{slots:t}){let r=(0,n.f3)(p.U,null);r||(0,d._y)("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");let{mergedClsPrefixRef:i,mergedDisabledRef:l,maxReachedRef:o,listTypeRef:a,dragOverRef:s,openOpenFileDialog:u,draggerInsideRef:c,handleFileAddition:h,mergedDirectoryDndRef:f,triggerClassRef:g,triggerStyleRef:v}=r,m=(0,n.Fl)(()=>"image-card"===a.value);function b(){l.value||o.value||u()}function w(e){e.preventDefault(),s.value=!0}function x(e){e.preventDefault(),s.value=!0}function B(e){e.preventDefault(),s.value=!1}function k(e){var t;if(e.preventDefault(),!c.value||l.value||o.value){s.value=!1;return}let r=null==(t=e.dataTransfer)?void 0:t.items;(null==r?void 0:r.length)?(function(e,t){return S(this,void 0,void 0,function*(){let r=[];return yield function e(i){return S(this,void 0,void 0,function*(){for(let l of i)if(l){if(t&&l.isDirectory){let t,r=l.createReader(),i=[];try{do t=yield new Promise((e,t)=>{r.readEntries(e,t)}),i=i.concat(t);while(t.length>0)}catch(e){(0,d.vU)("upload","error happens when handling directory upload",e)}yield e(i)}else if(l.isFile)try{let e=yield new Promise((e,t)=>{l.file(e,t)});r.push({file:e,entry:l,source:"dnd"})}catch(e){(0,d.vU)("upload","error happens when handling file upload",e)}}})}(e),r})})(Array.from(r).map(e=>e.webkitGetAsEntry()),f.value).then(e=>{h(e)}).finally(()=>{s.value=!1}):s.value=!1}return()=>{var r;let{value:a}=i;return e.abstract?null==(r=t.default)?void 0:r.call(t,{handleClick:b,handleDrop:k,handleDragOver:w,handleDragEnter:x,handleDragLeave:B}):(0,n.h)("div",{class:[`${a}-upload-trigger`,(l.value||o.value)&&`${a}-upload-trigger--disabled`,m.value&&`${a}-upload-trigger--image-card`,g.value],style:v.value,onClick:b,onDrop:k,onDragover:w,onDragenter:x,onDragleave:B},m.value?(0,n.h)(y.Z,null,{default:()=>(0,J.gI)(t.default,()=>[(0,n.h)(R.Z,{clsPrefix:a},{default:()=>(0,n.h)(N.Z,null)})])}):t)}}}),K=(0,n.aZ)({name:"UploadFileList",setup(e,{slots:t}){let r=(0,n.f3)(p.U,null);r||(0,d._y)("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");let{abstractRef:i,mergedClsPrefixRef:l,listTypeRef:o,mergedFileListRef:a,fileListClassRef:s,fileListStyleRef:u,cssVarsRef:c,themeClassRef:h,maxReachedRef:f,showTriggerRef:g,imageGroupPropsRef:v}=r,m=(0,n.Fl)(()=>"image-card"===o.value),y=()=>a.value.map((e,t)=>(0,n.h)(Y,{clsPrefix:l.value,key:e.id,file:e,index:t,listType:o.value})),x=()=>m.value?(0,n.h)(w.ZP,Object.assign({},v.value),{default:y}):(0,n.h)(b.Z,{group:!0},{default:y});return()=>{let{value:e}=l,{value:r}=i;return(0,n.h)("div",{class:[`${e}-upload-file-list`,m.value&&`${e}-upload-file-list--grid`,r?null==h?void 0:h.value:void 0,s.value],style:[r&&c?c.value:"",u.value]},x(),g.value&&!f.value&&m.value&&(0,n.h)(W,null,t))}}});var Q=function(e,t,r,i){return new(r||(r=Promise))(function(l,n){function o(e){try{s(i.next(e))}catch(e){n(e)}}function a(e){try{s(i.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?l(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}s((i=i.apply(e,t||[])).next())})};function ee(e,t){return"function"==typeof e?e({file:t}):e||{}}let et=Object.assign(Object.assign({},o.Z.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onRetry:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:e=>!!q&&_(e)},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),er=(0,n.aZ)({name:"Upload",props:et,setup(e){e.abstract&&"image-card"===e.listType&&(0,d._y)("upload","when the list-type is image-card, abstract is not supported.");let{mergedClsPrefixRef:t,inlineThemeDisabled:r}=(0,a.ZP)(e),f=(0,o.Z)("Upload","-upload",m,h.Z,e,t),g=(0,s.Z)(e),v=(0,n.iH)(e.defaultFileList),y=(0,n.Vh)(e,"fileList"),b=(0,n.iH)(null),w={value:!1},x=(0,n.iH)(!1),R=new Map,B=(0,l.Z)(y,v),k=(0,n.Fl)(()=>B.value.map(I)),C=(0,n.Fl)(()=>{let{max:t}=e;return void 0!==t&&k.value.length>=t});function P(){var e;null==(e=b.value)||e.click()}let F=(0,n.Fl)(()=>e.multiple||e.directory),L=(t,r,i={append:!1,remove:!1})=>{let{append:l,remove:n}=i,o=Array.from(k.value),a=o.findIndex(e=>e.id===t.id);if(l||n||~a){l?o.push(t):n?o.splice(a,1):o.splice(a,1,t);let{onChange:i}=e;i&&i({file:t,fileList:o,event:r});let{"onUpdate:fileList":s,onUpdateFileList:u}=e;s&&(0,c.R)(s,o),u&&(0,c.R)(u,o),v.value=o}};function U(t,r){if(!t||0===t.length)return;let{onBeforeUpload:l}=e;t=F.value?t:[t[0]];let{max:o,accept:a}=e;t=t.filter(({file:e,source:t})=>{var r,i,l;return!("dnd"===t&&(null==a?void 0:a.trim()))||(r=e.name,i=e.type,l=a,r=r.toLowerCase(),i=i.toLocaleLowerCase(),(l=l.toLocaleLowerCase()).split(",").map(e=>e.trim()).filter(Boolean).some(e=>{if(e.startsWith(".")){if(r.endsWith(e))return!0}else{if(!e.includes("/"))return!0;let[t,r]=i.split("/"),[l,n]=e.split("/");if(("*"===l||t&&l&&l===t)&&("*"===n||r&&n&&n===r))return!0}return!1}))}),o&&(t=t.slice(0,o-k.value.length));let s=(0,i.Mc)();Promise.all(t.map(e=>Q(this,[e],void 0,function*({file:e,entry:t}){var r;let n={id:(0,i.Mc)(),batchId:s,name:e.name,status:"pending",percentage:0,file:e,url:null,type:e.type,thumbnailUrl:null,fullPath:null!=(r=null==t?void 0:t.fullPath)?r:`/${e.webkitRelativePath||e.name}`};return l&&(yield l({file:n,fileList:k.value}))===!1?null:n}))).then(e=>Q(this,void 0,void 0,function*(){let t=Promise.resolve();e.forEach(e=>{t=t.then(n.Y3).then(()=>{e&&L(e,r,{append:!0})})}),yield t})).then(()=>{e.defaultUpload&&T()})}function T(t){let{method:r,action:i,withCredentials:l,headers:n,data:o,name:a}=e,s=void 0!==t?k.value.filter(e=>e.id===t):k.value,u=void 0!==t;s.forEach(t=>{let{status:s}=t;("pending"===s||"error"===s&&u)&&(e.customRequest?function(e){let{inst:t,file:r,data:i,headers:l,withCredentials:n,action:o,customRequest:a}=e,{doChange:s}=e.inst,u=0;a({file:r,data:i,headers:l,withCredentials:n,action:o,onProgress(e){let t=Object.assign({},r,{status:"uploading"}),i=e.percent;t.percentage=i,u=i,s(t)},onFinish(){var e;let i=Object.assign({},r,{status:"finished",percentage:u});s(i=I((null==(e=t.onFinish)?void 0:e.call(t,{file:i}))||i))},onError(){var e;let i=Object.assign({},r,{status:"error",percentage:u});s(i=I((null==(e=t.onError)?void 0:e.call(t,{file:i}))||i))}})}({inst:{doChange:L,xhrMap:R,onFinish:e.onFinish,onError:e.onError},file:t,action:i,withCredentials:l,headers:n,data:o,customRequest:e.customRequest}):function(e,t,r,{method:i,action:l,withCredentials:n,responseType:o,headers:a,data:s}){let u=new XMLHttpRequest;u.responseType=o,e.xhrMap.set(r.id,u),u.withCredentials=n;let d=new FormData,c=ee(s,r);c&&Object.keys(c).forEach(e=>{d.append(e,c[e])}),null!==r.file&&d.append(t,r.file);let h=function(e,t,r){let{doChange:i,xhrMap:l}=e,n=0;function o(r){var o;let a=Object.assign({},t,{status:"error",percentage:n});l.delete(t.id),i(a=I((null==(o=e.onError)?void 0:o.call(e,{file:a,event:r}))||a),r)}return{handleXHRLoad:function(a){var s;if(e.isErrorState){if(e.isErrorState(r))return void o(a)}else if(r.status<200||r.status>=300)return void o(a);let u=Object.assign({},t,{status:"finished",percentage:n});l.delete(t.id),i(u=I((null==(s=e.onFinish)?void 0:s.call(e,{file:u,event:a}))||u),a)},handleXHRError:o,handleXHRAbort(e){let r=Object.assign({},t,{status:"removed",file:null,percentage:n});l.delete(t.id),i(r,e)},handleXHRProgress(e){let r=Object.assign({},t,{status:"uploading"});if(e.lengthComputable){let t=Math.ceil(e.loaded/e.total*100);r.percentage=t,n=t}i(r,e)}}}(e,r,u);if(u.onabort=h.handleXHRAbort,u.onerror=h.handleXHRError,u.onload=h.handleXHRLoad,u.upload&&(u.upload.onprogress=h.handleXHRProgress),void 0!==l){u.open(i.toUpperCase(),l);let t=ee(a,r);t&&Object.keys(t).forEach(e=>{u.setRequestHeader(e,t[e])}),u.send(d);let n=Object.assign({},r,{status:"uploading"});e.doChange(n)}}({doChange:L,xhrMap:R,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},a,t,{method:r,action:i,withCredentials:l,responseType:e.responseType,headers:n,data:o}))})}let O=(0,n.Fl)(()=>{let{common:{cubicBezierEaseInOut:e},self:{draggerColor:t,draggerBorder:r,draggerBorderHover:i,itemColorHover:l,itemColorHoverError:n,itemTextColorError:o,itemTextColorSuccess:a,itemTextColor:s,itemIconColor:u,itemDisabledOpacity:d,lineHeight:c,borderRadius:h,fontSize:p,itemBorderImageCardError:g,itemBorderImageCard:v}}=f.value;return{"--n-bezier":e,"--n-border-radius":h,"--n-dragger-border":r,"--n-dragger-border-hover":i,"--n-dragger-color":t,"--n-font-size":p,"--n-item-color-hover":l,"--n-item-color-hover-error":n,"--n-item-disabled-opacity":d,"--n-item-icon-color":u,"--n-item-text-color":s,"--n-item-text-color-error":o,"--n-item-text-color-success":a,"--n-line-height":c,"--n-item-border-image-card-error":g,"--n-item-border-image-card":v}}),j=r?(0,u.F)("upload",void 0,O,e):void 0;return(0,n.JJ)(p.U,{mergedClsPrefixRef:t,mergedThemeRef:f,showCancelButtonRef:(0,n.Vh)(e,"showCancelButton"),showDownloadButtonRef:(0,n.Vh)(e,"showDownloadButton"),showRemoveButtonRef:(0,n.Vh)(e,"showRemoveButton"),showRetryButtonRef:(0,n.Vh)(e,"showRetryButton"),onRemoveRef:(0,n.Vh)(e,"onRemove"),onDownloadRef:(0,n.Vh)(e,"onDownload"),mergedFileListRef:k,triggerClassRef:(0,n.Vh)(e,"triggerClass"),triggerStyleRef:(0,n.Vh)(e,"triggerStyle"),shouldUseThumbnailUrlRef:(0,n.Vh)(e,"shouldUseThumbnailUrl"),renderIconRef:(0,n.Vh)(e,"renderIcon"),xhrMap:R,submit:T,doChange:L,showPreviewButtonRef:(0,n.Vh)(e,"showPreviewButton"),onPreviewRef:(0,n.Vh)(e,"onPreview"),getFileThumbnailUrlResolver:function(t){var r;if(t.thumbnailUrl)return t.thumbnailUrl;let{createThumbnailUrl:i}=e;return i?null!=(r=i(t.file,t))?r:t.url||"":t.url?t.url:t.file?function(e){return S(this,void 0,void 0,function*(){return yield new Promise(t=>{if(!e.type||!$(e.type))return void t("");t(window.URL.createObjectURL(e))})})}(t.file):""},listTypeRef:(0,n.Vh)(e,"listType"),dragOverRef:x,openOpenFileDialog:P,draggerInsideRef:w,handleFileAddition:U,mergedDisabledRef:g.mergedDisabledRef,maxReachedRef:C,fileListClassRef:(0,n.Vh)(e,"fileListClass"),fileListStyleRef:(0,n.Vh)(e,"fileListStyle"),abstractRef:(0,n.Vh)(e,"abstract"),acceptRef:(0,n.Vh)(e,"accept"),cssVarsRef:r?void 0:O,themeClassRef:null==j?void 0:j.themeClass,onRender:null==j?void 0:j.onRender,showTriggerRef:(0,n.Vh)(e,"showTrigger"),imageGroupPropsRef:(0,n.Vh)(e,"imageGroupProps"),mergedDirectoryDndRef:(0,n.Fl)(()=>{var t;return null!=(t=e.directoryDnd)?t:e.directory}),onRetryRef:(0,n.Vh)(e,"onRetry")}),Object.assign({mergedClsPrefix:t,draggerInsideRef:w,inputElRef:b,mergedTheme:f,dragOver:x,mergedMultiple:F,cssVars:r?void 0:O,themeClass:null==j?void 0:j.themeClass,onRender:null==j?void 0:j.onRender,handleFileInputChange:function(e){let t=e.target;U(t.files?Array.from(t.files).map(e=>({file:e,entry:null,source:"input"})):null,e),t.value=""}},{clear:()=>{v.value=[]},submit:T,openOpenFileDialog:P})},render(){var e,t;let{draggerInsideRef:r,mergedClsPrefix:i,$slots:l,directory:o,onRender:a}=this;if(l.default&&!this.abstract){let t=l.default()[0];(null==(e=null==t?void 0:t.type)?void 0:e[y.c])&&(r.value=!0)}let s=(0,n.h)("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${i}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:o||void 0,directory:o||void 0}));return this.abstract?(0,n.h)(n.HY,null,null==(t=l.default)?void 0:t.call(l),(0,n.h)(n.lR,{to:"body"},s)):(null==a||a(),(0,n.h)("div",{class:[`${i}-upload`,r.value&&`${i}-upload--dragger-inside`,this.dragOver&&`${i}-upload--drag-over`,this.themeClass],style:this.cssVars},s,this.showTrigger&&"image-card"!==this.listType&&(0,n.h)(W,null,l),this.showFileList&&(0,n.h)(K,null,l)))}})},73255:function(e,t,r){r.d(t,{Z:()=>a,c:()=>o});var i=r(58786),l=r(14501),n=r(49679);let o="__UPLOAD_DRAGGER__",a=(0,i.aZ)({name:"UploadDragger",[o]:!0,setup(e,{slots:t}){let r=(0,i.f3)(n.U,null);return r||(0,l._y)("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{let{mergedClsPrefixRef:{value:e},mergedDisabledRef:{value:l},maxReachedRef:{value:n}}=r;return(0,i.h)("div",{class:[`${e}-upload-dragger`,(l||n)&&`${e}-upload-dragger--disabled`]},t)}}})},49679:function(e,t,r){r.d(t,{U:()=>i});let i=(0,r(19050).U)("n-upload")}}]);