"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["8559"],{82822:function(e,t,a){a.d(t,{Z:()=>n});var r=a(21452),l=a(32398);let n=function(e){return"number"==typeof e||(0,l.Z)(e)&&"[object Number]"==(0,r.Z)(e)}},93953:function(e,t,a){a.d(t,{Z:()=>b});var r=a(65083),l=a(58786),n=a(56946),o=a(54470),i=a(51048),s=a(71309),d=a(60951),c=a(6445),p=a(73238);let u={name:"Flex",self:function(){return p.Z}},m=Object.assign(Object.assign({},n.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),b=(0,l.aZ)({name:"Flex",props:m,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,o.ZP)(e),d=(0,n.Z)("Flex","-flex",void 0,u,e,t);return{rtlEnabled:(0,i.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,l.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,s.Tl)("gap",t)]:a}}=d.value,{row:l,col:n}=(0,r.yU)(a);return{horizontal:(0,r.fQ)(n),vertical:(0,r.fQ)(l)}})}},render(){let{vertical:e,reverse:t,align:a,inline:r,justify:n,margin:o,wrap:i,mergedClsPrefix:s,rtlEnabled:p}=this,u=(0,d.x)((0,c.z)(this),!1);return u.length?(0,l.h)("div",{role:"none",class:[`${s}-flex`,p&&`${s}-flex--rtl`],style:{display:r?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:n,flexWrap:!i||e?"nowrap":"wrap",alignItems:a,gap:`${o.vertical}px ${o.horizontal}px`}},u):null}})},55855:function(e,t,a){a.d(t,{Gk:()=>i,Q5:()=>u,Xr:()=>p,ZS:()=>o,_5:()=>c,gI:()=>d,jC:()=>m,ke:()=>b,mQ:()=>s,oS:()=>g});var r=a(76882),l=a(34541);let{t:n}=r.Z.global;function o(e){return l.e.get("/batch_mail/task/list",{params:e})}function i(e){return l.e.get("/batch_mail/task/stat_chart",{params:e})}function s(e){return l.e.get("/batch_mail/task/find",{params:e})}function d(e){return l.e.post("/batch_mail/task/create",e,{fetchOptions:{loading:n("market.task.loading.creating"),successMessage:!0}})}function c(e){return l.e.post("/batch_mail/task/delete",e,{fetchOptions:{loading:n("market.task.loading.deleting"),successMessage:!0}})}function p(e){return l.e.post("/batch_mail/task/pause",e,{fetchOptions:{loading:n("market.task.loading.pausing"),successMessage:!0}})}function u(e){return l.e.post("/batch_mail/task/resume",e,{fetchOptions:{loading:n("market.task.loading.resuming"),successMessage:!0}})}function m(e){return l.e.post("/batch_mail/task/send_test",e,{fetchOptions:{loading:n("market.task.loading.sendingTest"),successMessage:!0}})}function b(e){return l.e.get("/batch_mail/tracking/mail_provider",{params:e})}function g(e){return l.e.get("/batch_mail/tracking/logs",{params:e})}},51169:function(e,t,a){a.d(t,{d:()=>o});var r=a(58786),l=a(49247);let n=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:o,onConfirm:i}=e,s=(0,r.qj)({});return a?[(0,r.aZ)({setup(l,o){let{attrs:i,slots:d}=o;return(0,r.JJ)(n,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(s,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,r.h)(a,{...l,...i},d)}}),s]:[(0,r.aZ)({setup(t,a){let{attrs:d,slots:c}=a,p=(0,r.f3)(n),u=(0,r.iH)(!1);return s.open=()=>{var t;u.value=!0,null==(t=e.onChangeState)||t.call(e,u.value)},s.close=()=>{u.value=!1},s.setState=t=>{var a;null==p||p.setState(t),null==(a=e.onChangeState)||a.call(e,u.value)},s.getState=()=>(null==p?void 0:p.state)??{},null==p||p.extendApi(s),()=>(0,r.Wm)(l.Z,(0,r.dG)({show:u.value},t,d,{onCancel:o,onConfirm:i,"onUpdate:show":e=>{u.value=e??!1}}),c)}}),s]}},86559:function(e,t,a){a.d(t,{Z:()=>n});var r=a(73084),l=a(58786);let n=(0,l.aZ)({__name:"index",props:(0,l.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,l.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:n}=t,o=(0,l.iH)(null),i=(0,l.tT)(e,"value"),s=()=>{n("search",i.value)};return a({focus:()=>{var e;null==(e=o.value)||e.focus()}}),(e,t)=>{let a=r.Z;return(0,l.wg)(),(0,l.j4)(a,(0,l.dG)({ref_key:"inputRef",ref:o,value:i.value,"onUpdate:value":t[0]||(t[0]=e=>i.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,l.D2)(s,["enter"])}),(0,l.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,l.w5)(()=>[(0,l._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[1]||(t[1]=[(0,l._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,l.w5)(()=>[(0,l._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[2]||(t[2]=[(0,l._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},66469:function(e,t,a){a.r(t),a.d(t,{default:()=>M});var r=a(39244),l=a(25170),n=a(60424),o=a(66760),i=a(86559),s=a(58786),d=a(15496),c=a(53903),p=a(76561),u=a(93953),m=a(51169),b=a(67512),g=a(68271),h=a(55855),k=a(17102),f=a(23125),w=a(56946),v=a(54470),y=a(53198),S=a(71309),_=a(60951);function x(e,t="default",a=[]){let{children:r}=e;if(null!==r&&"object"==typeof r&&!Array.isArray(r)){let e=r[t];if("function"==typeof e)return e()}return a}var U=a(6445),Z=a(31838);let z=(0,S.c)([(0,S.cB)("descriptions",{fontSize:"var(--n-font-size)"},[(0,S.cB)("descriptions-separator",`
 display: inline-block;
 margin: 0 8px 0 2px;
 `),(0,S.cB)("descriptions-table-wrapper",[(0,S.cB)("descriptions-table",[(0,S.cB)("descriptions-table-row",[(0,S.cB)("descriptions-table-header",{padding:"var(--n-th-padding)"}),(0,S.cB)("descriptions-table-content",{padding:"var(--n-td-padding)"})])])]),(0,S.u4)("bordered",[(0,S.cB)("descriptions-table-wrapper",[(0,S.cB)("descriptions-table",[(0,S.cB)("descriptions-table-row",[(0,S.c)("&:last-child",[(0,S.cB)("descriptions-table-content",{paddingBottom:0})])])])])]),(0,S.cM)("left-label-placement",[(0,S.cB)("descriptions-table-content",[(0,S.c)("> *",{verticalAlign:"top"})])]),(0,S.cM)("left-label-align",[(0,S.c)("th",{textAlign:"left"})]),(0,S.cM)("center-label-align",[(0,S.c)("th",{textAlign:"center"})]),(0,S.cM)("right-label-align",[(0,S.c)("th",{textAlign:"right"})]),(0,S.cM)("bordered",[(0,S.cB)("descriptions-table-wrapper",`
 border-radius: var(--n-border-radius);
 overflow: hidden;
 background: var(--n-merged-td-color);
 border: 1px solid var(--n-merged-border-color);
 `,[(0,S.cB)("descriptions-table",[(0,S.cB)("descriptions-table-row",[(0,S.c)("&:not(:last-child)",[(0,S.cB)("descriptions-table-content",{borderBottom:"1px solid var(--n-merged-border-color)"}),(0,S.cB)("descriptions-table-header",{borderBottom:"1px solid var(--n-merged-border-color)"})]),(0,S.cB)("descriptions-table-header",`
 font-weight: 400;
 background-clip: padding-box;
 background-color: var(--n-merged-th-color);
 `,[(0,S.c)("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})]),(0,S.cB)("descriptions-table-content",[(0,S.c)("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})])])])])]),(0,S.cB)("descriptions-header",`
 font-weight: var(--n-th-font-weight);
 font-size: 18px;
 transition: color .3s var(--n-bezier);
 line-height: var(--n-line-height);
 margin-bottom: 16px;
 color: var(--n-title-text-color);
 `),(0,S.cB)("descriptions-table-wrapper",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[(0,S.cB)("descriptions-table",`
 width: 100%;
 border-collapse: separate;
 border-spacing: 0;
 box-sizing: border-box;
 `,[(0,S.cB)("descriptions-table-row",`
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[(0,S.cB)("descriptions-table-header",`
 font-weight: var(--n-th-font-weight);
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-th-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),(0,S.cB)("descriptions-table-content",`
 vertical-align: top;
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-td-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[(0,S.cE)("content",`
 transition: color .3s var(--n-bezier);
 display: inline-block;
 color: var(--n-td-text-color);
 `)]),(0,S.cE)("label",`
 font-weight: var(--n-th-font-weight);
 transition: color .3s var(--n-bezier);
 display: inline-block;
 margin-right: 14px;
 color: var(--n-th-text-color);
 `)])])])]),(0,S.cB)("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color);
 --n-merged-td-color: var(--n-td-color);
 --n-merged-border-color: var(--n-border-color);
 `),(0,S.ko)((0,S.cB)("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-modal);
 --n-merged-td-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),(0,S.WW)((0,S.cB)("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-popover);
 --n-merged-td-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),W="DESCRIPTION_ITEM_FLAG",$=Object.assign(Object.assign({},w.Z.props),{title:String,column:{type:Number,default:3},columns:Number,labelPlacement:{type:String,default:"top"},labelAlign:{type:String,default:"left"},separator:{type:String,default:":"},size:{type:String,default:"medium"},bordered:Boolean,labelClass:String,labelStyle:[Object,String],contentClass:String,contentStyle:[Object,String]}),j=(0,s.aZ)({name:"Descriptions",props:$,slots:Object,setup(e){let{mergedClsPrefixRef:t,inlineThemeDisabled:a}=(0,v.ZP)(e),r=(0,w.Z)("Descriptions","-descriptions",z,Z.Z,e,t),l=(0,s.Fl)(()=>{let{size:t,bordered:a}=e,{common:{cubicBezierEaseInOut:l},self:{titleTextColor:n,thColor:o,thColorModal:i,thColorPopover:s,thTextColor:d,thFontWeight:c,tdTextColor:p,tdColor:u,tdColorModal:m,tdColorPopover:b,borderColor:g,borderColorModal:h,borderColorPopover:k,borderRadius:f,lineHeight:w,[(0,S.Tl)("fontSize",t)]:v,[(0,S.Tl)(a?"thPaddingBordered":"thPadding",t)]:y,[(0,S.Tl)(a?"tdPaddingBordered":"tdPadding",t)]:_}}=r.value;return{"--n-title-text-color":n,"--n-th-padding":y,"--n-td-padding":_,"--n-font-size":v,"--n-bezier":l,"--n-th-font-weight":c,"--n-line-height":w,"--n-th-text-color":d,"--n-td-text-color":p,"--n-th-color":o,"--n-th-color-modal":i,"--n-th-color-popover":s,"--n-td-color":u,"--n-td-color-modal":m,"--n-td-color-popover":b,"--n-border-radius":f,"--n-border-color":g,"--n-border-color-modal":h,"--n-border-color-popover":k}}),n=a?(0,y.F)("descriptions",(0,s.Fl)(()=>{let t="",{size:a,bordered:r}=e;return r&&(t+="a"),t+=a[0]}),l,e):void 0;return{mergedClsPrefix:t,cssVars:a?void 0:l,themeClass:null==n?void 0:n.themeClass,onRender:null==n?void 0:n.onRender,compitableColumn:(0,f.Z)(e,["columns","column"]),inlineThemeDisabled:a}},render(){let e=this.$slots.default,t=e?(0,_.x)(e()):[];t.length;let{contentClass:a,labelClass:r,compitableColumn:l,labelPlacement:n,labelAlign:o,size:i,bordered:d,title:c,cssVars:p,mergedClsPrefix:u,separator:m,onRender:b}=this;null==b||b();let g=t.filter(e=>!("object"!=typeof e||!e||Array.isArray(e))&&e.type&&e.type[W]),h=g.reduce((e,t,o)=>{let i=t.props||{},c=g.length-1===o,p=["label"in i?i.label:x(t,"label")],b=[x(t)],h=i.span||1,k=e.span;e.span+=h;let f=i.labelStyle||i["label-style"]||this.labelStyle,w=i.contentStyle||i["content-style"]||this.contentStyle;if("left"===n)d?e.row.push((0,s.h)("th",{class:[`${u}-descriptions-table-header`,r],colspan:1,style:f},p),(0,s.h)("td",{class:[`${u}-descriptions-table-content`,a],colspan:c?(l-k)*2+1:2*h-1,style:w},b)):e.row.push((0,s.h)("td",{class:`${u}-descriptions-table-content`,colspan:c?(l-k)*2:2*h},(0,s.h)("span",{class:[`${u}-descriptions-table-content__label`,r],style:f},[...p,m&&(0,s.h)("span",{class:`${u}-descriptions-separator`},m)]),(0,s.h)("span",{class:[`${u}-descriptions-table-content__content`,a],style:w},b)));else{let t=c?(l-k)*2:2*h;e.row.push((0,s.h)("th",{class:[`${u}-descriptions-table-header`,r],colspan:t,style:f},p)),e.secondRow.push((0,s.h)("td",{class:[`${u}-descriptions-table-content`,a],colspan:t,style:w},b))}return(e.span>=l||c)&&(e.span=0,e.row.length&&(e.rows.push(e.row),e.row=[]),"left"!==n&&e.secondRow.length&&(e.rows.push(e.secondRow),e.secondRow=[])),e},{span:0,row:[],secondRow:[],rows:[]}).rows.map(e=>(0,s.h)("tr",{class:`${u}-descriptions-table-row`},e));return(0,s.h)("div",{style:p,class:[`${u}-descriptions`,this.themeClass,`${u}-descriptions--${n}-label-placement`,`${u}-descriptions--${o}-label-align`,`${u}-descriptions--${i}-size`,d&&`${u}-descriptions--bordered`]},c||this.$slots.header?(0,s.h)("div",{class:`${u}-descriptions-header`},c||(0,U.z)(this,"header")):null,(0,s.h)("div",{class:`${u}-descriptions-table-wrapper`},(0,s.h)("table",{class:`${u}-descriptions-table`},(0,s.h)("tbody",null,"top"===n&&(0,s.h)("tr",{class:`${u}-descriptions-table-row`,style:{visibility:"collapse"}},(0,k.rx)(2*l,(0,s.h)("td",null))),h))))}}),B=(0,s.aZ)({name:"DescriptionsItem",[W]:!0,props:{label:String,span:{type:Number,default:1},labelClass:String,labelStyle:[Object,String],contentClass:String,contentStyle:[Object,String]},slots:Object,render:()=>null}),C=(0,s.aZ)({__name:"TaskDetail",setup(e){let t=(0,s.iH)(null),[a,r]=(0,m.d)({onChangeState:e=>{e&&(t.value=r.getState().row)}});return(e,r)=>{let l=c.ZP,n=u.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(a),{title:e.$t("market.task.detail.title"),width:600,footer:!1},{default:(0,s.w5)(()=>[(0,s.SU)(t)?((0,s.wg)(),(0,s.j4)(j,{key:0,"label-placement":"left",bordered:!0,column:1,"label-style":{width:"180px"}},{default:(0,s.w5)(()=>[(0,s.Wm)(B,{label:e.$t("market.task.detail.displayName")},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t).full_name),1)]),_:1},8,["label"]),(0,s.Wm)(B,{label:e.$t("market.task.detail.sender")},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t).addresser),1)]),_:1},8,["label"]),(0,s.Wm)(B,{label:e.$t("market.task.detail.subject")},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t).subject),1)]),_:1},8,["label"]),(0,s.Wm)(B,{label:e.$t("market.task.detail.groups")},{default:(0,s.w5)(()=>[(0,s.Wm)(n,null,{default:(0,s.w5)(()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,s.SU)(t).groups,e=>((0,s.wg)(),(0,s.j4)(l,{key:e.id,size:"small"},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.name),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["label"]),(0,s.Wm)(B,{label:e.$t("market.task.detail.sendTime")},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(g.mr)((0,s.SU)(t).start_time)),1)]),_:1},8,["label"]),(0,s.Wm)(B,{label:e.$t("market.task.detail.unsubscribeLink")},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(1===(0,s.SU)(t).unsubscribe?e.$t("market.task.detail.yes"):e.$t("market.task.detail.no")),1)]),_:1},8,["label"]),(0,s.Wm)(B,{label:e.$t("market.task.detail.threads")},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(0===(0,s.SU)(t).threads?e.$t("market.task.detail.auto"):(0,s.SU)(t).threads),1)]),_:1},8,["label"]),(0,s.Wm)(B,{label:e.$t("market.task.detail.remark")},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t).remark||"--"),1)]),_:1},8,["label"])]),_:1})):(0,s.kq)("",!0)]),_:1},8,["title"])}}});var P=a(35409);let O=(0,s.aZ)({__name:"TaskStatusDetails",setup(e){let t=(0,s.iH)(""),{loading:a,tableParams:o,tableList:i,tableTotal:d,getTableData:c}=(0,b.Z)({loading:!0,immediate:!1,params:{page:1,page_size:10,task_id:0,status:0,domain:""},fetchFn:h.oS}),p=(0,s.iH)([{key:"recipient",title:"Recipient",width:160,render:e=>(0,s.Wm)(P.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:"Dsn",width:60},{key:"delay",title:"Delay",width:70},{key:"delays",title:"Delays",width:150},{key:"relay",title:"Relay",width:200,render:e=>(0,s.Wm)(P.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:"Details",render:e=>(0,s.Wm)(P.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),u=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),[g,k]=(0,m.d)({onChangeState:e=>{if(e){let{status:e,taskId:a,row:r}=k.getState();r&&(t.value=`Failure Details [${r.domain}]`,o.value.page=1,o.value.status=e,o.value.task_id=a,o.value.domain=r.domain,c())}else i.value=[]}});return(e,m)=>{let b=n.Z,h=l.Z,k=r.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(g),{title:(0,s.SU)(t),width:1e3,footer:!1},{default:(0,s.w5)(()=>[(0,s.Wm)(k,null,{table:(0,s.w5)(()=>[(0,s.Wm)(b,{bordered:!1,loading:(0,s.SU)(a),columns:(0,s.SU)(p),data:(0,s.SU)(i),"row-props":u},null,8,["loading","columns","data"])]),pageRight:(0,s.w5)(()=>[(0,s.Wm)(h,{page:(0,s.SU)(o).page,"onUpdate:page":m[0]||(m[0]=e=>(0,s.SU)(o).page=e),"page-size":(0,s.SU)(o).page_size,"onUpdate:pageSize":m[1]||(m[1]=e=>(0,s.SU)(o).page_size=e),"item-count":(0,s.SU)(d),onRefresh:(0,s.SU)(c)},null,8,["page","page-size","item-count","onRefresh"])]),_:1})]),_:1},8,["title"])}}}),R=(0,s.aZ)({__name:"TaskStatus",setup(e){let t=(0,s.iH)("Error tasks"),a=(0,s.iH)(!1),l=(0,s.qj)({status:0,task_id:0}),o=(0,s.iH)([]),i=(0,s.iH)([{key:"domain",title:"Domain"},{key:"count",title:"Count"},{key:"active",title:"Operator",align:"right",render:e=>(0,s.Wm)(d.ZP,{text:!0,type:"primary",onClick:()=>{u(e)}},{default:()=>[(0,s.Uk)("Details")]})}]),[c,p]=(0,m.d)({component:O}),u=e=>{p.setState({taskId:l.task_id,status:l.status,row:e}),p.open()},b=async()=>{let e=await (0,h.ke)((0,s.IU)(l));(0,g.kJ)(e)&&(o.value=e)},[k,f]=(0,m.d)({onChangeState:e=>{if(e){let{row:e}=f.getState();e&&(o.value=[],l.task_id=e.id,t.value=`Error tasks [${e.subject}]`,b())}else o.value=[]}});return(e,l)=>{let d=n.Z,p=r.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(k),{title:(0,s.SU)(t),width:600,footer:!1},{default:(0,s.w5)(()=>[(0,s.Wm)(p,null,{toolsLeft:(0,s.w5)(()=>l[0]||(l[0]=[])),toolsRight:(0,s.w5)(()=>l[1]||(l[1]=[])),table:(0,s.w5)(()=>[(0,s.Wm)(d,{bordered:!1,loading:(0,s.SU)(a),columns:(0,s.SU)(i),data:(0,s.SU)(o)},null,8,["loading","columns","data"])]),modal:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(c))]),_:1})]),_:1},8,["title"])}}});var D=a(52495),A=a(65965);function T(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,s.lA)(e)}let M=(0,s.aZ)({__name:"index",setup(e){let{t}=(0,D.QT)(),{loading:a,tableParams:k,tableList:f,tableTotal:w,getTableData:v}=(0,b.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:h.ZS}),y=(0,s.iH)([{key:"create_time",title:t("market.task.columns.time"),width:"9%",minWidth:130,ellipsis:{tooltip:!0},render:e=>(0,g.mr)(e.create_time)},{key:"subject",title:t("market.task.columns.subject"),minWidth:120,ellipsis:{tooltip:!0}},{key:"addresser",title:t("market.task.columns.sender"),minWidth:130,ellipsis:{tooltip:!0}},{key:"recipient_count",title:t("market.task.columns.recipients"),width:"6%",minWidth:80},{key:"success_count",title:t("market.task.columns.success"),width:"6%",minWidth:80},{key:"error_count",title:t("market.task.columns.failed"),width:"6%",minWidth:80,render:e=>(0,s.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{$(e)}},{default:()=>[e.error_count]})},{key:"active",title:t("market.task.columns.status"),width:"8%",minWidth:90,render:e=>{let a,r,l;return 0===e.task_process||3===e.task_process?(0,s.Wm)(c.ZP,{size:"small",bordered:!1,type:"warning"},T(a=t("market.task.status.pending"))?a:{default:()=>[a]}):1===e.task_process?(0,s.Wm)(c.ZP,{size:"small",bordered:!1,type:"info"},T(r=t("market.task.status.processing"))?r:{default:()=>[r]}):(0,s.Wm)(c.ZP,{size:"small",bordered:!1,type:"success"},T(l=t("market.task.status.done"))?l:{default:()=>[l]})}},{key:"remark",title:t("market.task.columns.remark"),width:"8%",minWidth:80,ellipsis:{tooltip:!0},render:e=>e.remark||"--"},{key:"estimated_time_with_warmup",title:t("market.task.columns.estimatedTime"),width:"11%",minWidth:110,ellipsis:{tooltip:!0},render:e=>2===e.task_process?"--":e.estimated_time_with_warmup>=0?(0,g.NY)(e.estimated_time_with_warmup):t("market.task.status.noIpWarmup")},{key:"progress",title:t("market.task.columns.progress"),width:"8%",minWidth:130,render:e=>(0,s.Wm)("div",{class:"max-w-160px"},[(0,s.Wm)(p.Z,{type:"line",status:"success","indicator-placement":"inside",processing:100!==e.progress,percentage:e.progress,"show-indicator":!1},null)])},{title:t("common.columns.actions"),key:"actions",align:"right",width:250,render:e=>{let a,r,l,n;return(0,s.Wm)(u.Z,{inline:!0},{default:()=>[2!==e.task_process&&(0,s.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{Z(e)}},{default:()=>[3===e.task_process?t("market.task.actions.send"):t("market.task.actions.pause")]}),(0,s.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{x(e)}},T(a=t("market.task.actions.analytics"))?a:{default:()=>[a]}),(0,s.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{U(e)}},T(r=t("common.actions.copy"))?r:{default:()=>[r]}),(0,s.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{P(e)}},T(l=t("market.task.actions.detail"))?l:{default:()=>[l]}),(0,s.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{O(e)}},T(n=t("common.actions.delete"))?n:{default:()=>[n]})]})}}]),S=(0,A.tv)(),_=()=>{S.push("/market/task/edit")},x=e=>{S.push(`/market/task/analytics/${e.id}`)},U=e=>{S.push(`/market/task/edit?task_id=${e.id}`)},Z=e=>{(0,g.iG)({title:t("market.task.changeStatus.title",{subject:e.subject}),content:3===e.task_process?t("market.task.changeStatus.startConfirm"):t("market.task.changeStatus.pauseConfirm"),onConfirm:async()=>{3===e.task_process?await (0,h.Q5)({task_id:e.id}):await (0,h.Xr)({task_id:e.id}),v()}})},[z,W]=(0,m.d)({component:R}),$=e=>{W.setState({row:e}),W.open()},[j,B]=(0,m.d)({component:C}),P=e=>{B.setState({row:e}),B.open()},O=e=>{(0,g.iG)({title:t("market.task.delete.title"),content:t("market.task.delete.confirm",{subject:e.subject}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,h._5)({id:e.id}),v()}})};return(e,c)=>{let p=i.Z,u=o.Z,m=n.Z,b=l.Z,g=r.Z;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(g,null,{toolsLeft:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(d.ZP),{type:"primary",onClick:_},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t)("market.task.actions.add")),1)]),_:1})]),toolsRight:(0,s.w5)(()=>[(0,s.Wm)(p,{value:(0,s.SU)(k).keyword,"onUpdate:value":c[0]||(c[0]=e=>(0,s.SU)(k).keyword=e),width:320,placeholder:(0,s.SU)(t)("market.task.search.subjectPlaceholder"),onSearch:c[1]||(c[1]=()=>(0,s.SU)(v)(!0))},null,8,["value","placeholder"])]),table:(0,s.w5)(()=>[(0,s.Wm)(m,{loading:(0,s.SU)(a),columns:(0,s.SU)(y),data:(0,s.SU)(f)},{empty:(0,s.w5)(()=>[(0,s.Wm)(u)]),_:1},8,["loading","columns","data"])]),pageRight:(0,s.w5)(()=>[(0,s.Wm)(b,{page:(0,s.SU)(k).page,"onUpdate:page":c[2]||(c[2]=e=>(0,s.SU)(k).page=e),"page-size":(0,s.SU)(k).page_size,"onUpdate:pageSize":c[3]||(c[3]=e=>(0,s.SU)(k).page_size=e),"item-count":(0,s.SU)(w),onRefresh:(0,s.SU)(v)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(z)),(0,s.Wm)((0,s.SU)(j))]),_:1})])}}})}}]);